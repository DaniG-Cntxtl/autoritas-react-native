diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js
index 10a51e5..99428ad 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 var _reactNative = require("react-native");
 var _getDisplayMedia = _interopRequireDefault(require("./getDisplayMedia"));
 var _getUserMedia = _interopRequireDefault(require("./getUserMedia"));
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js.map
index 94974dc..79846bc 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaDevices.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_reactNative","_getDisplayMedia","_interopRequireDefault","_getUserMedia","obj","__esModule","default","WebRTCModule","NativeModules","MediaDevices","EventTarget","enumerateDevices","Promise","resolve","getDisplayMedia","getUserMedia","constraints","proto","prototype","defineEventAttribute","_default","exports"],"sources":["MediaDevices.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport getDisplayMedia from './getDisplayMedia';\nimport getUserMedia, { Constraints } from './getUserMedia';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaDevicesEventMap = {\n    devicechange: Event<'devicechange'>\n}\n\nclass MediaDevices extends EventTarget<MediaDevicesEventMap> {\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code enumerateDevices}\n     * implementation.\n     */\n    enumerateDevices() {\n        return new Promise(resolve => WebRTCModule.enumerateDevices(resolve));\n    }\n\n    /**\n     * W3C \"Screen Capture\" compatible {@code getDisplayMedia} implementation.\n     * See: https://w3c.github.io/mediacapture-screen-share/\n     *\n     * @returns {Promise}\n     */\n    getDisplayMedia() {\n        return getDisplayMedia();\n    }\n\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code getUserMedia}\n     * implementation.\n     * See: https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices\n     *\n     * @param {*} constraints\n     * @returns {Promise}\n     */\n    getUserMedia(constraints: Constraints) {\n        return getUserMedia(constraints);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaDevices.prototype;\n\ndefineEventAttribute(proto, 'devicechange');\n\n\nexport default new MediaDevices();\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,gBAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,aAAA,GAAAD,sBAAA,CAAAH,OAAA;AAA2D,SAAAG,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3D,MAAM;EAAEG;AAAa,CAAC,GAAGC,0BAAa;AAMtC,MAAMC,YAAY,SAASC,kBAAW,CAAuB;EACzD;AACJ;AACA;AACA;EACIC,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAIN,YAAY,CAACI,gBAAgB,CAACE,OAAO,CAAC,CAAC;EACzE;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIC,eAAeA,CAAA,EAAG;IACd,OAAO,IAAAA,wBAAe,EAAC,CAAC;EAC5B;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAACC,WAAwB,EAAE;IACnC,OAAO,IAAAD,qBAAY,EAACC,WAAW,CAAC;EACpC;AACJ;;AAEA;AACA;AACA;AACA,MAAMC,KAAK,GAAGR,YAAY,CAACS,SAAS;AAEpC,IAAAC,2BAAoB,EAACF,KAAK,EAAE,cAAc,CAAC;AAAC,IAAAG,QAAA,GAG7B,IAAIX,YAAY,CAAC,CAAC;AAAAY,OAAA,CAAAf,OAAA,GAAAc,QAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_reactNative","_getDisplayMedia","_interopRequireDefault","_getUserMedia","obj","__esModule","default","WebRTCModule","NativeModules","MediaDevices","EventTarget","enumerateDevices","Promise","resolve","getDisplayMedia","getUserMedia","constraints","proto","prototype","defineEventAttribute","_default","exports"],"sources":["MediaDevices.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport getDisplayMedia from './getDisplayMedia';\nimport getUserMedia, { Constraints } from './getUserMedia';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaDevicesEventMap = {\n    devicechange: Event<'devicechange'>\n}\n\nclass MediaDevices extends EventTarget<MediaDevicesEventMap> {\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code enumerateDevices}\n     * implementation.\n     */\n    enumerateDevices() {\n        return new Promise(resolve => WebRTCModule.enumerateDevices(resolve));\n    }\n\n    /**\n     * W3C \"Screen Capture\" compatible {@code getDisplayMedia} implementation.\n     * See: https://w3c.github.io/mediacapture-screen-share/\n     *\n     * @returns {Promise}\n     */\n    getDisplayMedia() {\n        return getDisplayMedia();\n    }\n\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code getUserMedia}\n     * implementation.\n     * See: https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices\n     *\n     * @param {*} constraints\n     * @returns {Promise}\n     */\n    getUserMedia(constraints: Constraints) {\n        return getUserMedia(constraints);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaDevices.prototype;\n\ndefineEventAttribute(proto, 'devicechange');\n\n\nexport default new MediaDevices();\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,gBAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,aAAA,GAAAD,sBAAA,CAAAH,OAAA;AAA2D,SAAAG,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3D,MAAM;EAAEG;AAAa,CAAC,GAAGC,0BAAa;AAMtC,MAAMC,YAAY,SAASC,kBAAW,CAAuB;EACzD;AACJ;AACA;AACA;EACIC,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAIN,YAAY,CAACI,gBAAgB,CAACE,OAAO,CAAC,CAAC;EACzE;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIC,eAAeA,CAAA,EAAG;IACd,OAAO,IAAAA,wBAAe,EAAC,CAAC;EAC5B;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAACC,WAAwB,EAAE;IACnC,OAAO,IAAAD,qBAAY,EAACC,WAAW,CAAC;EACpC;AACJ;;AAEA;AACA;AACA;AACA,MAAMC,KAAK,GAAGR,YAAY,CAACS,SAAS;AAEpC,IAAAC,2BAAoB,EAACF,KAAK,EAAE,cAAc,CAAC;AAAC,IAAAG,QAAA,GAG7B,IAAIX,YAAY,CAAC,CAAC;AAAAY,OAAA,CAAAf,OAAA,GAAAc,QAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js
index 4c9653f..e142232 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 var _reactNative = require("react-native");
 var _MediaStreamTrack = _interopRequireDefault(require("./MediaStreamTrack"));
 var _RTCUtil = require("./RTCUtil");
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js.map
index 3b0d3e3..96c17e3 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStream.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_reactNative","_MediaStreamTrack","_interopRequireDefault","_RTCUtil","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","WebRTCModule","NativeModules","MediaStream","EventTarget","constructor","arg","_id","uniqueID","_reactTag","mediaStreamCreate","id","track","getTracks","addTrack","Array","isArray","streamId","streamReactTag","tracks","trackInfo","_tracks","push","MediaStreamTrack","TypeError","active","index","indexOf","mediaStreamAddTrack","remote","_peerConnectionId","removeTrack","splice","mediaStreamRemoveTrack","slice","getTrackById","trackId","find","getAudioTracks","filter","kind","getVideoTracks","clone","Error","toURL","release","releaseTracks","arguments","length","undefined","mediaStreamRelease","exports","proto","prototype","defineEventAttribute"],"sources":["MediaStream.ts"],"sourcesContent":["import { EventTarget, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport MediaStreamTrack, { MediaStreamTrackInfo } from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport { uniqueID } from './RTCUtil';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaStreamEventMap = {\n    addtrack: MediaStreamTrackEvent<'addtrack'>\n    removetrack: MediaStreamTrackEvent<'removetrack'>\n}\n\nexport default class MediaStream extends EventTarget<MediaStreamEventMap> {\n    _tracks: MediaStreamTrack[] = [];\n    _id: string;\n\n    /**\n     * The identifier of this MediaStream unique within the associated\n     * WebRTCModule instance. As the id of a remote MediaStream instance is unique\n     * only within the associated RTCPeerConnection, it is not sufficiently unique\n     * to identify this MediaStream across multiple RTCPeerConnections and to\n     * unambiguously differentiate it from a local MediaStream instance not added\n     * to an RTCPeerConnection.\n     */\n    _reactTag: string;\n\n    /**\n     * A MediaStream can be constructed in several ways, depending on the parameters\n     * that are passed here.\n     *\n     * - undefined: just a new stream, with no tracks.\n     * - MediaStream instance: a new stream, with a copy of the tracks of the passed stream.\n     * - Array of MediaStreamTrack: a new stream with a copy of the tracks in the array.\n     * - object: a new stream instance, represented by the passed info object, this is always\n     *   done internally, when the stream is first created in native and the JS wrapper is\n     *   built afterwards.\n     */\n    constructor(arg?:\n        MediaStream |\n        MediaStreamTrack[] |\n        { streamId: string, streamReactTag: string, tracks: MediaStreamTrackInfo[] }\n    ) {\n        super();\n\n        // Assign a UUID to start with. It will get overridden for remote streams.\n        this._id = uniqueID();\n\n        // Local MediaStreams are created by WebRTCModule to have their id and\n        // reactTag equal because WebRTCModule follows the respective standard's\n        // recommendation for id generation i.e. uses UUID which is unique enough\n        // for the purposes of reactTag.\n        this._reactTag = this._id;\n\n        if (typeof arg === 'undefined') {\n            WebRTCModule.mediaStreamCreate(this.id);\n        } else if (arg instanceof MediaStream) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg.getTracks()) {\n                this.addTrack(track);\n            }\n        } else if (Array.isArray(arg)) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg) {\n                this.addTrack(track);\n            }\n        } else if (typeof arg === 'object' && arg.streamId && arg.streamReactTag && arg.tracks) {\n            this._id = arg.streamId;\n            this._reactTag = arg.streamReactTag;\n\n            for (const trackInfo of arg.tracks) {\n                // We are not using addTrack here because the track is already part of the\n                // stream, so there is no need to add it on the native side.\n                this._tracks.push(new MediaStreamTrack(trackInfo));\n            }\n        } else {\n            throw new TypeError(`invalid type: ${typeof arg}`);\n        }\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get active(): boolean {\n        // TODO: can we reliably report this value?\n\n        return true;\n    }\n\n    addTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index !== -1) {\n            return;\n        }\n\n        this._tracks.push(track);\n        WebRTCModule.mediaStreamAddTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    removeTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index === -1) {\n            return;\n        }\n\n        this._tracks.splice(index, 1);\n        WebRTCModule.mediaStreamRemoveTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    getTracks(): MediaStreamTrack[] {\n        return this._tracks.slice();\n    }\n\n    getTrackById(trackId): MediaStreamTrack | undefined {\n        return this._tracks.find(track => track.id === trackId);\n    }\n\n    getAudioTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'audio');\n    }\n\n    getVideoTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'video');\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    toURL(): string {\n        return this._reactTag;\n    }\n\n    release(releaseTracks = true): void {\n        const tracks = [ ...this._tracks ];\n\n        for (const track of tracks) {\n            this.removeTrack(track);\n\n            if (releaseTracks) {\n                track.release();\n            }\n        }\n\n        WebRTCModule.mediaStreamRelease(this._reactTag);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStream.prototype;\n\ndefineEventAttribute(proto, 'addtrack');\ndefineEventAttribute(proto, 'removetrack');\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,iBAAA,GAAAC,sBAAA,CAAAH,OAAA;AAEA,IAAAI,QAAA,GAAAJ,OAAA;AAAqC,SAAAG,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,gBAAAH,GAAA,EAAAI,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAJ,GAAA,IAAAM,MAAA,CAAAC,cAAA,CAAAP,GAAA,EAAAI,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAV,GAAA,CAAAI,GAAA,IAAAC,KAAA,WAAAL,GAAA;AAErC,MAAM;EAAEW;AAAa,CAAC,GAAGC,0BAAa;AAOvB,MAAMC,WAAW,SAASC,kBAAW,CAAsB;EAItE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAGI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,WAAWA,CAACC,GAGoE,EAC9E;IACE,KAAK,CAAC,CAAC;;IAEP;IAAAb,eAAA,kBA/B0B,EAAE;IAAAA,eAAA;IAAAA,eAAA;IAgC5B,IAAI,CAACc,GAAG,GAAG,IAAAC,iBAAQ,EAAC,CAAC;;IAErB;IACA;IACA;IACA;IACA,IAAI,CAACC,SAAS,GAAG,IAAI,CAACF,GAAG;IAEzB,IAAI,OAAOD,GAAG,KAAK,WAAW,EAAE;MAC5BL,YAAY,CAACS,iBAAiB,CAAC,IAAI,CAACC,EAAE,CAAC;IAC3C,CAAC,MAAM,IAAIL,GAAG,YAAYH,WAAW,EAAE;MACnCF,YAAY,CAACS,iBAAiB,CAAC,IAAI,CAACC,EAAE,CAAC;MAEvC,KAAK,MAAMC,KAAK,IAAIN,GAAG,CAACO,SAAS,CAAC,CAAC,EAAE;QACjC,IAAI,CAACC,QAAQ,CAACF,KAAK,CAAC;MACxB;IACJ,CAAC,MAAM,IAAIG,KAAK,CAACC,OAAO,CAACV,GAAG,CAAC,EAAE;MAC3BL,YAAY,CAACS,iBAAiB,CAAC,IAAI,CAACC,EAAE,CAAC;MAEvC,KAAK,MAAMC,KAAK,IAAIN,GAAG,EAAE;QACrB,IAAI,CAACQ,QAAQ,CAACF,KAAK,CAAC;MACxB;IACJ,CAAC,MAAM,IAAI,OAAON,GAAG,KAAK,QAAQ,IAAIA,GAAG,CAACW,QAAQ,IAAIX,GAAG,CAACY,cAAc,IAAIZ,GAAG,CAACa,MAAM,EAAE;MACpF,IAAI,CAACZ,GAAG,GAAGD,GAAG,CAACW,QAAQ;MACvB,IAAI,CAACR,SAAS,GAAGH,GAAG,CAACY,cAAc;MAEnC,KAAK,MAAME,SAAS,IAAId,GAAG,CAACa,MAAM,EAAE;QAChC;QACA;QACA,IAAI,CAACE,OAAO,CAACC,IAAI,CAAC,IAAIC,yBAAgB,CAACH,SAAS,CAAC,CAAC;MACtD;IACJ,CAAC,MAAM;MACH,MAAM,IAAII,SAAS,CAAE,iBAAgB,OAAOlB,GAAI,EAAC,CAAC;IACtD;EACJ;EAEA,IAAIK,EAAEA,CAAA,EAAW;IACb,OAAO,IAAI,CAACJ,GAAG;EACnB;EAEA,IAAIkB,MAAMA,CAAA,EAAY;IAClB;;IAEA,OAAO,IAAI;EACf;EAEAX,QAAQA,CAACF,KAAuB,EAAQ;IACpC,MAAMc,KAAK,GAAG,IAAI,CAACL,OAAO,CAACM,OAAO,CAACf,KAAK,CAAC;IAEzC,IAAIc,KAAK,KAAK,CAAC,CAAC,EAAE;MACd;IACJ;IAEA,IAAI,CAACL,OAAO,CAACC,IAAI,CAACV,KAAK,CAAC;IACxBX,YAAY,CAAC2B,mBAAmB,CAAC,IAAI,CAACnB,SAAS,EAAEG,KAAK,CAACiB,MAAM,GAAGjB,KAAK,CAACkB,iBAAiB,GAAG,CAAC,CAAC,EAAElB,KAAK,CAACD,EAAE,CAAC;EAC3G;EAEAoB,WAAWA,CAACnB,KAAuB,EAAQ;IACvC,MAAMc,KAAK,GAAG,IAAI,CAACL,OAAO,CAACM,OAAO,CAACf,KAAK,CAAC;IAEzC,IAAIc,KAAK,KAAK,CAAC,CAAC,EAAE;MACd;IACJ;IAEA,IAAI,CAACL,OAAO,CAACW,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;IAC7BzB,YAAY,CAACgC,sBAAsB,CAAC,IAAI,CAACxB,SAAS,EAAEG,KAAK,CAACiB,MAAM,GAAGjB,KAAK,CAACkB,iBAAiB,GAAG,CAAC,CAAC,EAAElB,KAAK,CAACD,EAAE,CAAC;EAC9G;EAEAE,SAASA,CAAA,EAAuB;IAC5B,OAAO,IAAI,CAACQ,OAAO,CAACa,KAAK,CAAC,CAAC;EAC/B;EAEAC,YAAYA,CAACC,OAAO,EAAgC;IAChD,OAAO,IAAI,CAACf,OAAO,CAACgB,IAAI,CAACzB,KAAK,IAAIA,KAAK,CAACD,EAAE,KAAKyB,OAAO,CAAC;EAC3D;EAEAE,cAAcA,CAAA,EAAuB;IACjC,OAAO,IAAI,CAACjB,OAAO,CAACkB,MAAM,CAAC3B,KAAK,IAAIA,KAAK,CAAC4B,IAAI,KAAK,OAAO,CAAC;EAC/D;EAEAC,cAAcA,CAAA,EAAuB;IACjC,OAAO,IAAI,CAACpB,OAAO,CAACkB,MAAM,CAAC3B,KAAK,IAAIA,KAAK,CAAC4B,IAAI,KAAK,OAAO,CAAC;EAC/D;EAEAE,KAAKA,CAAA,EAAU;IACX,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC;EACvC;EAEAC,KAAKA,CAAA,EAAW;IACZ,OAAO,IAAI,CAACnC,SAAS;EACzB;EAEAoC,OAAOA,CAAA,EAA6B;IAAA,IAA5BC,aAAa,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IACxB,MAAM5B,MAAM,GAAG,CAAE,GAAG,IAAI,CAACE,OAAO,CAAE;IAElC,KAAK,MAAMT,KAAK,IAAIO,MAAM,EAAE;MACxB,IAAI,CAACY,WAAW,CAACnB,KAAK,CAAC;MAEvB,IAAIkC,aAAa,EAAE;QACflC,KAAK,CAACiC,OAAO,CAAC,CAAC;MACnB;IACJ;IAEA5C,YAAY,CAACiD,kBAAkB,CAAC,IAAI,CAACzC,SAAS,CAAC;EACnD;AACJ;;AAEA;AACA;AACA;AAFA0C,OAAA,CAAA3D,OAAA,GAAAW,WAAA;AAGA,MAAMiD,KAAK,GAAGjD,WAAW,CAACkD,SAAS;AAEnC,IAAAC,2BAAoB,EAACF,KAAK,EAAE,UAAU,CAAC;AACvC,IAAAE,2BAAoB,EAACF,KAAK,EAAE,aAAa,CAAC"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_reactNative","_MediaStreamTrack","_interopRequireDefault","_RTCUtil","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","WebRTCModule","NativeModules","MediaStream","EventTarget","constructor","arg","_id","uniqueID","_reactTag","mediaStreamCreate","id","track","getTracks","addTrack","Array","isArray","streamId","streamReactTag","tracks","trackInfo","_tracks","push","MediaStreamTrack","TypeError","active","index","indexOf","mediaStreamAddTrack","remote","_peerConnectionId","removeTrack","splice","mediaStreamRemoveTrack","slice","getTrackById","trackId","find","getAudioTracks","filter","kind","getVideoTracks","clone","Error","toURL","release","releaseTracks","arguments","length","undefined","mediaStreamRelease","exports","proto","prototype","defineEventAttribute"],"sources":["MediaStream.ts"],"sourcesContent":["import { EventTarget, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport MediaStreamTrack, { MediaStreamTrackInfo } from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport { uniqueID } from './RTCUtil';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaStreamEventMap = {\n    addtrack: MediaStreamTrackEvent<'addtrack'>\n    removetrack: MediaStreamTrackEvent<'removetrack'>\n}\n\nexport default class MediaStream extends EventTarget<MediaStreamEventMap> {\n    _tracks: MediaStreamTrack[] = [];\n    _id: string;\n\n    /**\n     * The identifier of this MediaStream unique within the associated\n     * WebRTCModule instance. As the id of a remote MediaStream instance is unique\n     * only within the associated RTCPeerConnection, it is not sufficiently unique\n     * to identify this MediaStream across multiple RTCPeerConnections and to\n     * unambiguously differentiate it from a local MediaStream instance not added\n     * to an RTCPeerConnection.\n     */\n    _reactTag: string;\n\n    /**\n     * A MediaStream can be constructed in several ways, depending on the parameters\n     * that are passed here.\n     *\n     * - undefined: just a new stream, with no tracks.\n     * - MediaStream instance: a new stream, with a copy of the tracks of the passed stream.\n     * - Array of MediaStreamTrack: a new stream with a copy of the tracks in the array.\n     * - object: a new stream instance, represented by the passed info object, this is always\n     *   done internally, when the stream is first created in native and the JS wrapper is\n     *   built afterwards.\n     */\n    constructor(arg?:\n        MediaStream |\n        MediaStreamTrack[] |\n        { streamId: string, streamReactTag: string, tracks: MediaStreamTrackInfo[] }\n    ) {\n        super();\n\n        // Assign a UUID to start with. It will get overridden for remote streams.\n        this._id = uniqueID();\n\n        // Local MediaStreams are created by WebRTCModule to have their id and\n        // reactTag equal because WebRTCModule follows the respective standard's\n        // recommendation for id generation i.e. uses UUID which is unique enough\n        // for the purposes of reactTag.\n        this._reactTag = this._id;\n\n        if (typeof arg === 'undefined') {\n            WebRTCModule.mediaStreamCreate(this.id);\n        } else if (arg instanceof MediaStream) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg.getTracks()) {\n                this.addTrack(track);\n            }\n        } else if (Array.isArray(arg)) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg) {\n                this.addTrack(track);\n            }\n        } else if (typeof arg === 'object' && arg.streamId && arg.streamReactTag && arg.tracks) {\n            this._id = arg.streamId;\n            this._reactTag = arg.streamReactTag;\n\n            for (const trackInfo of arg.tracks) {\n                // We are not using addTrack here because the track is already part of the\n                // stream, so there is no need to add it on the native side.\n                this._tracks.push(new MediaStreamTrack(trackInfo));\n            }\n        } else {\n            throw new TypeError(`invalid type: ${typeof arg}`);\n        }\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get active(): boolean {\n        // TODO: can we reliably report this value?\n\n        return true;\n    }\n\n    addTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index !== -1) {\n            return;\n        }\n\n        this._tracks.push(track);\n        WebRTCModule.mediaStreamAddTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    removeTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index === -1) {\n            return;\n        }\n\n        this._tracks.splice(index, 1);\n        WebRTCModule.mediaStreamRemoveTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    getTracks(): MediaStreamTrack[] {\n        return this._tracks.slice();\n    }\n\n    getTrackById(trackId): MediaStreamTrack | undefined {\n        return this._tracks.find(track => track.id === trackId);\n    }\n\n    getAudioTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'audio');\n    }\n\n    getVideoTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'video');\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    toURL(): string {\n        return this._reactTag;\n    }\n\n    release(releaseTracks = true): void {\n        const tracks = [ ...this._tracks ];\n\n        for (const track of tracks) {\n            this.removeTrack(track);\n\n            if (releaseTracks) {\n                track.release();\n            }\n        }\n\n        WebRTCModule.mediaStreamRelease(this._reactTag);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStream.prototype;\n\ndefineEventAttribute(proto, 'addtrack');\ndefineEventAttribute(proto, 'removetrack');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js
index 3af4c13..feb53d7 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 var _reactNative = require("react-native");
 var _EventEmitter = require("./EventEmitter");
 var _Logger = _interopRequireDefault(require("./Logger"));
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js.map
index e7dc6fc..93ef73e 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrack.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_reactNative","_EventEmitter","_Logger","_interopRequireDefault","_RTCUtil","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","log","Logger","WebRTCModule","NativeModules","MediaStreamTrack","EventTarget","constructor","info","_constraints","constraints","_enabled","enabled","_settings","settings","_muted","_peerConnectionId","peerConnectionId","_readyState","readyState","id","kind","remote","_registerEvents","Boolean","mediaStreamTrackSetEnabled","muted","stop","_switchCamera","Error","deepClone","deviceId","facingMode","applyConstraints","_setVideoEffects","names","mediaStreamTrackSetVideoEffects","_setVideoEffect","name","_setMutedInternal","dispatchEvent","Event","_setVolume","volume","mediaStreamTrackSetVolume","normalized","normalizeConstraints","video","mediaStreamTrackApplyConstraints","clone","getCapabilities","getConstraints","getSettings","addListener","ev","trackId","debug","release","removeListener","mediaStreamTrackRelease","exports","proto","prototype","defineEventAttribute"],"sources":["MediaStreamTrack.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { MediaTrackConstraints } from './Constraints';\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport { deepClone, normalizeConstraints } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\n\ntype MediaStreamTrackState = 'live' | 'ended';\n\nexport type MediaStreamTrackInfo = {\n    id: string;\n    kind: string;\n    remote: boolean;\n    constraints: object;\n    enabled: boolean;\n    settings: object;\n    peerConnectionId: number;\n    readyState: MediaStreamTrackState;\n}\n\nexport type MediaTrackSettings = {\n    width?: number;\n    height?: number;\n    frameRate?: number;\n    facingMode?: string;\n    deviceId?: string;\n    groupId?: string;\n}\n\ntype MediaStreamTrackEventMap = {\n    ended: Event<'ended'>;\n    mute: Event<'mute'>;\n    unmute: Event<'unmute'>;\n}\n\nexport default class MediaStreamTrack extends EventTarget<MediaStreamTrackEventMap> {\n    _constraints: MediaTrackConstraints;\n    _enabled: boolean;\n    _settings: MediaTrackSettings;\n    _muted: boolean;\n    _peerConnectionId: number;\n    _readyState: MediaStreamTrackState;\n\n    readonly id: string;\n    readonly kind: string;\n    readonly label: string = '';\n    readonly remote: boolean;\n\n    constructor(info: MediaStreamTrackInfo) {\n        super();\n\n        this._constraints = info.constraints || {};\n        this._enabled = info.enabled;\n        this._settings = info.settings || {};\n        this._muted = false;\n        this._peerConnectionId = info.peerConnectionId;\n        this._readyState = info.readyState;\n\n        this.id = info.id;\n        this.kind = info.kind;\n        this.remote = info.remote;\n\n        if (!this.remote) {\n            this._registerEvents();\n        }\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        if (enabled === this._enabled) {\n            return;\n        }\n\n        this._enabled = Boolean(enabled);\n\n        if (this._readyState === 'ended') {\n            return;\n        }\n\n        WebRTCModule.mediaStreamTrackSetEnabled(this.remote ? this._peerConnectionId : -1, this.id, this._enabled);\n    }\n\n    get muted(): boolean {\n        return this._muted;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    stop(): void {\n        this.enabled = false;\n        this._readyState = 'ended';\n    }\n\n    /**\n     * Private / custom API for switching the cameras on the fly, without the\n     * need for adding / removing tracks or doing any SDP renegotiation.\n     *\n     * This is how the reference application (AppRTCMobile) implements camera\n     * switching.\n     *\n     * @deprecated Use applyConstraints instead.\n     */\n    _switchCamera(): void {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        const constraints = deepClone(this._settings);\n\n        delete constraints.deviceId;\n        constraints.facingMode = this._settings.facingMode === 'user' ? 'environment' : 'user';\n\n        this.applyConstraints(constraints);\n    }\n\n    _setVideoEffects(names: string[]) {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVideoEffects(this.id, names);\n    }\n\n    _setVideoEffect(name: string) {\n        this._setVideoEffects([ name ]);\n    }\n\n    /**\n     * Internal function which is used to set the muted state on remote tracks and\n     * emit the mute / unmute event.\n     *\n     * @param muted Whether the track should be marked as muted / unmuted.\n     */\n    _setMutedInternal(muted: boolean) {\n        if (!this.remote) {\n            throw new Error('Track is not remote!');\n        }\n\n        this._muted = muted;\n        this.dispatchEvent(new Event(muted ? 'mute' : 'unmute'));\n    }\n\n    /**\n     * Custom API for setting the volume on an individual audio track.\n     *\n     * @param volume a gain value in the range of 0-10. defaults to 1.0\n     */\n    _setVolume(volume: number) {\n        if (this.kind !== 'audio') {\n            throw new Error('Only implemented for audio tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVolume(this.remote ? this._peerConnectionId : -1, this.id, volume);\n    }\n\n    /**\n     * Applies a new set of constraints to the track.\n     *\n     * @param constraints An object listing the constraints\n     * to apply to the track's constrainable properties; any existing\n     * constraints are replaced with the new values specified, and any\n     * constrainable properties not included are restored to their default\n     * constraints. If this parameter is omitted, all currently set custom\n     * constraints are cleared.\n     */\n    async applyConstraints(constraints?: MediaTrackConstraints): Promise<void> {\n        if (this.kind !== 'video') {\n            log.info(`Only implemented for video tracks, ignoring applyConstraints for ${this.id}`);\n\n            return;\n        }\n\n        const normalized = normalizeConstraints({ video: constraints ?? true });\n\n        this._settings = await WebRTCModule.mediaStreamTrackApplyConstraints(this.id, normalized.video);\n        this._constraints = constraints ?? {};\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getCapabilities(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getConstraints() {\n        return deepClone(this._constraints);\n    }\n\n    getSettings(): MediaTrackSettings {\n        return deepClone(this._settings);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'mediaStreamTrackEnded', (ev: any) => {\n            if (ev.trackId !== this.id || this._readyState === 'ended') {\n                return;\n            }\n\n            log.debug(`${this.id} mediaStreamTrackEnded`);\n            this._readyState = 'ended';\n\n            this.dispatchEvent(new Event('ended'));\n        });\n    }\n\n    release(): void {\n        if (this.remote) {\n            return;\n        }\n\n        removeListener(this);\n        WebRTCModule.mediaStreamTrackRelease(this.id);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStreamTrack.prototype;\n\ndefineEventAttribute(proto, 'ended');\ndefineEventAttribute(proto, 'mute');\ndefineEventAttribute(proto, 'unmute');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_reactNative","_EventEmitter","_Logger","_interopRequireDefault","_RTCUtil","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","log","Logger","WebRTCModule","NativeModules","MediaStreamTrack","EventTarget","constructor","info","_constraints","constraints","_enabled","enabled","_settings","settings","_muted","_peerConnectionId","peerConnectionId","_readyState","readyState","id","kind","remote","_registerEvents","Boolean","mediaStreamTrackSetEnabled","muted","stop","_switchCamera","Error","deepClone","deviceId","facingMode","applyConstraints","_setVideoEffects","names","mediaStreamTrackSetVideoEffects","_setVideoEffect","name","_setMutedInternal","dispatchEvent","Event","_setVolume","volume","mediaStreamTrackSetVolume","normalized","normalizeConstraints","video","mediaStreamTrackApplyConstraints","clone","getCapabilities","getConstraints","getSettings","addListener","ev","trackId","debug","release","removeListener","mediaStreamTrackRelease","exports","proto","prototype","defineEventAttribute"],"sources":["MediaStreamTrack.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { MediaTrackConstraints } from './Constraints';\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport { deepClone, normalizeConstraints } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\n\ntype MediaStreamTrackState = 'live' | 'ended';\n\nexport type MediaStreamTrackInfo = {\n    id: string;\n    kind: string;\n    remote: boolean;\n    constraints: object;\n    enabled: boolean;\n    settings: object;\n    peerConnectionId: number;\n    readyState: MediaStreamTrackState;\n}\n\nexport type MediaTrackSettings = {\n    width?: number;\n    height?: number;\n    frameRate?: number;\n    facingMode?: string;\n    deviceId?: string;\n    groupId?: string;\n}\n\ntype MediaStreamTrackEventMap = {\n    ended: Event<'ended'>;\n    mute: Event<'mute'>;\n    unmute: Event<'unmute'>;\n}\n\nexport default class MediaStreamTrack extends EventTarget<MediaStreamTrackEventMap> {\n    _constraints: MediaTrackConstraints;\n    _enabled: boolean;\n    _settings: MediaTrackSettings;\n    _muted: boolean;\n    _peerConnectionId: number;\n    _readyState: MediaStreamTrackState;\n\n    readonly id: string;\n    readonly kind: string;\n    readonly label: string = '';\n    readonly remote: boolean;\n\n    constructor(info: MediaStreamTrackInfo) {\n        super();\n\n        this._constraints = info.constraints || {};\n        this._enabled = info.enabled;\n        this._settings = info.settings || {};\n        this._muted = false;\n        this._peerConnectionId = info.peerConnectionId;\n        this._readyState = info.readyState;\n\n        this.id = info.id;\n        this.kind = info.kind;\n        this.remote = info.remote;\n\n        if (!this.remote) {\n            this._registerEvents();\n        }\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        if (enabled === this._enabled) {\n            return;\n        }\n\n        this._enabled = Boolean(enabled);\n\n        if (this._readyState === 'ended') {\n            return;\n        }\n\n        WebRTCModule.mediaStreamTrackSetEnabled(this.remote ? this._peerConnectionId : -1, this.id, this._enabled);\n    }\n\n    get muted(): boolean {\n        return this._muted;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    stop(): void {\n        this.enabled = false;\n        this._readyState = 'ended';\n    }\n\n    /**\n     * Private / custom API for switching the cameras on the fly, without the\n     * need for adding / removing tracks or doing any SDP renegotiation.\n     *\n     * This is how the reference application (AppRTCMobile) implements camera\n     * switching.\n     *\n     * @deprecated Use applyConstraints instead.\n     */\n    _switchCamera(): void {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        const constraints = deepClone(this._settings);\n\n        delete constraints.deviceId;\n        constraints.facingMode = this._settings.facingMode === 'user' ? 'environment' : 'user';\n\n        this.applyConstraints(constraints);\n    }\n\n    _setVideoEffects(names: string[]) {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVideoEffects(this.id, names);\n    }\n\n    _setVideoEffect(name: string) {\n        this._setVideoEffects([ name ]);\n    }\n\n    /**\n     * Internal function which is used to set the muted state on remote tracks and\n     * emit the mute / unmute event.\n     *\n     * @param muted Whether the track should be marked as muted / unmuted.\n     */\n    _setMutedInternal(muted: boolean) {\n        if (!this.remote) {\n            throw new Error('Track is not remote!');\n        }\n\n        this._muted = muted;\n        this.dispatchEvent(new Event(muted ? 'mute' : 'unmute'));\n    }\n\n    /**\n     * Custom API for setting the volume on an individual audio track.\n     *\n     * @param volume a gain value in the range of 0-10. defaults to 1.0\n     */\n    _setVolume(volume: number) {\n        if (this.kind !== 'audio') {\n            throw new Error('Only implemented for audio tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVolume(this.remote ? this._peerConnectionId : -1, this.id, volume);\n    }\n\n    /**\n     * Applies a new set of constraints to the track.\n     *\n     * @param constraints An object listing the constraints\n     * to apply to the track's constrainable properties; any existing\n     * constraints are replaced with the new values specified, and any\n     * constrainable properties not included are restored to their default\n     * constraints. If this parameter is omitted, all currently set custom\n     * constraints are cleared.\n     */\n    async applyConstraints(constraints?: MediaTrackConstraints): Promise<void> {\n        if (this.kind !== 'video') {\n            log.info(`Only implemented for video tracks, ignoring applyConstraints for ${this.id}`);\n\n            return;\n        }\n\n        const normalized = normalizeConstraints({ video: constraints ?? true });\n\n        this._settings = await WebRTCModule.mediaStreamTrackApplyConstraints(this.id, normalized.video);\n        this._constraints = constraints ?? {};\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getCapabilities(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getConstraints() {\n        return deepClone(this._constraints);\n    }\n\n    getSettings(): MediaTrackSettings {\n        return deepClone(this._settings);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'mediaStreamTrackEnded', (ev: any) => {\n            if (ev.trackId !== this.id || this._readyState === 'ended') {\n                return;\n            }\n\n            log.debug(`${this.id} mediaStreamTrackEnded`);\n            this._readyState = 'ended';\n\n            this.dispatchEvent(new Event('ended'));\n        });\n    }\n\n    release(): void {\n        if (this.remote) {\n            return;\n        }\n\n        removeListener(this);\n        WebRTCModule.mediaStreamTrackRelease(this.id);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStreamTrack.prototype;\n\ndefineEventAttribute(proto, 'ended');\ndefineEventAttribute(proto, 'mute');\ndefineEventAttribute(proto, 'unmute');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js
index c90f7c3..e6105db 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 /**
  * @eventClass
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js.map
index 95e6a5e..6e7316b 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MediaStreamTrackEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","MediaStreamTrackEvent","Event","constructor","type","eventInitDict","track","exports","default"],"sources":["MediaStreamTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport type MediaStreamTrack from './MediaStreamTrack';\n\ntype MEDIA_STREAM_EVENTS = 'addtrack'| 'removetrack'\n\ninterface IMediaStreamTrackEventInitDict extends Event.EventInit {\n  track: MediaStreamTrack;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the MediaStreamTrack has changed in any way.\n * @param {MEDIA_STREAM_EVENTS} type - The type of event.\n * @param {IMediaStreamTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaStream#events MDN} for details.\n */\nexport default class MediaStreamTrackEvent<TEventType extends MEDIA_STREAM_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    track: MediaStreamTrack;\n    constructor(type: TEventType, eventInitDict: IMediaStreamTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.track = eventInitDict.track;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAUhD;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,qBAAqB,SAAiDC,YAAK,CAAa;EACzG;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAA6C,EAAE;IACzE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACc,KAAK,GAAGD,aAAa,CAACC,KAAK;EACpC;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,qBAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","MediaStreamTrackEvent","Event","constructor","type","eventInitDict","track","exports","default"],"sources":["MediaStreamTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport type MediaStreamTrack from './MediaStreamTrack';\n\ntype MEDIA_STREAM_EVENTS = 'addtrack'| 'removetrack'\n\ninterface IMediaStreamTrackEventInitDict extends Event.EventInit {\n  track: MediaStreamTrack;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the MediaStreamTrack has changed in any way.\n * @param {MEDIA_STREAM_EVENTS} type - The type of event.\n * @param {IMediaStreamTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaStream#events MDN} for details.\n */\nexport default class MediaStreamTrackEvent<TEventType extends MEDIA_STREAM_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    track: MediaStreamTrack;\n    constructor(type: TEventType, eventInitDict: IMediaStreamTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.track = eventInitDict.track;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAUhD;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,qBAAqB,SAAiDC,YAAK,CAAa;EACzG;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAA6C,EAAE;IACzE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACc,KAAK,GAAGD,aAAa,CAACC,KAAK;EACpC;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,qBAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js
index a4d4a53..e123aca 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 /**
  * @eventClass
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js.map
index 3c23f72..a292514 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/MessageEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","MessageEvent","Event","constructor","type","eventInitDict","data","exports","default"],"sources":["MessageEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nexport type MessageEventData = string | ArrayBuffer | Blob;\n\ntype MESSAGE_EVENTS = 'message' | 'messageerror';\n\ninterface IMessageEventInitDict extends Event.EventInit {\n    data: MessageEventData;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel send message.\n * @param {MESSAGE_EVENTS} type - The type of event.\n * @param {IMessageEventInitDict} eventInitDict - The event init properties.\n * @see\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel/message_event#event_type MDN} for details.\n */\nexport default class MessageEvent<TEventType extends MESSAGE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    data: MessageEventData;\n    constructor(type: TEventType, eventInitDict: IMessageEventInitDict) {\n        super(type, eventInitDict);\n        this.data = eventInitDict.data;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAUhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,YAAY,SAA4CC,YAAK,CAAa;EAC3F;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAAoC,EAAE;IAChE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACc,IAAI,GAAGD,aAAa,CAACC,IAAI;EAClC;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,YAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","MessageEvent","Event","constructor","type","eventInitDict","data","exports","default"],"sources":["MessageEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nexport type MessageEventData = string | ArrayBuffer | Blob;\n\ntype MESSAGE_EVENTS = 'message' | 'messageerror';\n\ninterface IMessageEventInitDict extends Event.EventInit {\n    data: MessageEventData;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel send message.\n * @param {MESSAGE_EVENTS} type - The type of event.\n * @param {IMessageEventInitDict} eventInitDict - The event init properties.\n * @see\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel/message_event#event_type MDN} for details.\n */\nexport default class MessageEvent<TEventType extends MESSAGE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    data: MessageEventData;\n    constructor(type: TEventType, eventInitDict: IMessageEventInitDict) {\n        super(type, eventInitDict);\n        this.data = eventInitDict.data;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAUhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,YAAY,SAA4CC,YAAK,CAAa;EAC3F;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAAoC,EAAE;IAChE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACc,IAAI,GAAGD,aAAa,CAACC,IAAI;EAClC;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,YAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js
index 51fc497..100f6d6 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js
@@ -5,7 +5,7 @@ Object.defineProperty(exports, "__esModule", {
 });
 exports.default = void 0;
 var base64 = _interopRequireWildcard(require("base64-js"));
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 var _reactNative = require("react-native");
 var _EventEmitter = require("./EventEmitter");
 var _MessageEvent = _interopRequireDefault(require("./MessageEvent"));
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js.map
index bcb62b3..c1d9701 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannel.js.map
@@ -1 +1 @@
-{"version":3,"names":["base64","_interopRequireWildcard","require","_index","_reactNative","_EventEmitter","_MessageEvent","_interopRequireDefault","_RTCDataChannelEvent","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","enumerable","configurable","writable","WebRTCModule","NativeModules","RTCDataChannel","EventTarget","constructor","info","_peerConnectionId","peerConnectionId","_reactTag","reactTag","_bufferedAmount","_label","label","_id","id","_ordered","Boolean","ordered","_maxPacketLifeTime","maxPacketLifeTime","_maxRetransmits","maxRetransmits","_protocol","protocol","_negotiated","negotiated","_readyState","readyState","_registerEvents","bufferedAmount","send","data","dataChannelSend","ArrayBuffer","isView","Uint8Array","buffer","byteOffset","byteLength","TypeError","base64data","fromByteArray","close","dataChannelClose","addListener","ev","state","dispatchEvent","RTCDataChannelEvent","channel","removeListener","dataChannelDispose","type","toByteArray","MessageEvent","bufferedAmountLowThreshold","exports","proto","defineEventAttribute"],"sources":["RTCDataChannel.ts"],"sourcesContent":["import * as base64 from 'base64-js';\nimport { EventTarget, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport MessageEvent from './MessageEvent';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\n\nconst { WebRTCModule } = NativeModules;\n\ntype RTCDataChannelState = 'connecting' | 'open' | 'closing' | 'closed';\n\ntype DataChannelEventMap = {\n    bufferedamountlow: RTCDataChannelEvent<'bufferedamountlow'>;\n    close: RTCDataChannelEvent<'close'>;\n    closing: RTCDataChannelEvent<'closing'>;\n    error: RTCDataChannelEvent<'error'>;\n    message: MessageEvent<'message'>;\n    open: RTCDataChannelEvent<'open'>;\n};\n\nexport default class RTCDataChannel extends EventTarget<DataChannelEventMap> {\n    _peerConnectionId: number;\n    _reactTag: string;\n\n    _bufferedAmount: number;\n    _id: number;\n    _label: string;\n    _maxPacketLifeTime?: number;\n    _maxRetransmits?: number;\n    _negotiated: boolean;\n    _ordered: boolean;\n    _protocol: string;\n    _readyState: RTCDataChannelState;\n\n    binaryType = 'arraybuffer'; // we only support 'arraybuffer'\n    bufferedAmountLowThreshold = 0;\n\n    constructor(info) {\n        super();\n\n        this._peerConnectionId = info.peerConnectionId;\n        this._reactTag = info.reactTag;\n\n        this._bufferedAmount = 0;\n        this._label = info.label;\n        this._id = info.id === -1 ? null : info.id; // null until negotiated.\n        this._ordered = Boolean(info.ordered);\n        this._maxPacketLifeTime = info.maxPacketLifeTime;\n        this._maxRetransmits = info.maxRetransmits;\n        this._protocol = info.protocol || '';\n        this._negotiated = Boolean(info.negotiated);\n        this._readyState = info.readyState;\n\n        this._registerEvents();\n    }\n\n    get bufferedAmount(): number {\n        return this._bufferedAmount;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get id(): number {\n        return this._id;\n    }\n\n    get ordered(): boolean {\n        return this._ordered;\n    }\n\n    get maxPacketLifeTime(): number | undefined {\n        return this._maxPacketLifeTime;\n    }\n\n    get maxRetransmits(): number | undefined {\n        return this._maxRetransmits;\n    }\n\n    get protocol(): string {\n        return this._protocol;\n    }\n\n    get negotiated(): boolean {\n        return this._negotiated;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    send(data: string): void;\n    send(data: ArrayBuffer): void;\n    send(data: ArrayBufferView): void;\n    send(data: string | ArrayBuffer | ArrayBufferView): void {\n        if (typeof data === 'string') {\n            WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, data, 'text');\n\n            return;\n        }\n\n        // Safely convert the buffer object to an Uint8Array for base64-encoding\n        if (ArrayBuffer.isView(data)) {\n            data = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n        } else if (data instanceof ArrayBuffer) {\n            data = new Uint8Array(data);\n        } else {\n            throw new TypeError('Data must be either string, ArrayBuffer, or ArrayBufferView');\n        }\n\n        const base64data = base64.fromByteArray(data as Uint8Array);\n\n        WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, base64data, 'binary');\n    }\n\n    close(): void {\n        if (this._readyState === 'closing' || this._readyState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.dataChannelClose(this._peerConnectionId, this._reactTag);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'dataChannelStateChanged', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._readyState = ev.state;\n\n            if (this._id === null && ev.id !== -1) {\n                this._id = ev.id;\n            }\n\n            if (this._readyState === 'open') {\n                this.dispatchEvent(new RTCDataChannelEvent('open', { channel: this }));\n            } else if (this._readyState === 'closing') {\n                this.dispatchEvent(new RTCDataChannelEvent('closing', { channel: this }));\n            } else if (this._readyState === 'closed') {\n                this.dispatchEvent(new RTCDataChannelEvent('close', { channel: this }));\n\n                // This DataChannel is done, clean up event handlers.\n                removeListener(this);\n\n                WebRTCModule.dataChannelDispose(this._peerConnectionId, this._reactTag);\n            }\n        });\n\n        addListener(this, 'dataChannelReceiveMessage', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            let data = ev.data;\n\n            if (ev.type === 'binary') {\n                data = base64.toByteArray(ev.data).buffer;\n            }\n\n            this.dispatchEvent(new MessageEvent('message', { data }));\n        });\n\n        addListener(this, 'dataChannelDidChangeBufferedAmount', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._bufferedAmount = ev.bufferedAmount;\n\n            if (this._bufferedAmount < this.bufferedAmountLowThreshold) {\n                this.dispatchEvent(new RTCDataChannelEvent('bufferedamountlow', { channel: this }));\n            }\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCDataChannel.prototype;\n\ndefineEventAttribute(proto, 'bufferedamountlow');\ndefineEventAttribute(proto, 'close');\ndefineEventAttribute(proto, 'closing');\ndefineEventAttribute(proto, 'error');\ndefineEventAttribute(proto, 'message');\ndefineEventAttribute(proto, 'open');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["base64","_interopRequireWildcard","require","_index","_reactNative","_EventEmitter","_MessageEvent","_interopRequireDefault","_RTCDataChannelEvent","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","enumerable","configurable","writable","WebRTCModule","NativeModules","RTCDataChannel","EventTarget","constructor","info","_peerConnectionId","peerConnectionId","_reactTag","reactTag","_bufferedAmount","_label","label","_id","id","_ordered","Boolean","ordered","_maxPacketLifeTime","maxPacketLifeTime","_maxRetransmits","maxRetransmits","_protocol","protocol","_negotiated","negotiated","_readyState","readyState","_registerEvents","bufferedAmount","send","data","dataChannelSend","ArrayBuffer","isView","Uint8Array","buffer","byteOffset","byteLength","TypeError","base64data","fromByteArray","close","dataChannelClose","addListener","ev","state","dispatchEvent","RTCDataChannelEvent","channel","removeListener","dataChannelDispose","type","toByteArray","MessageEvent","bufferedAmountLowThreshold","exports","proto","defineEventAttribute"],"sources":["RTCDataChannel.ts"],"sourcesContent":["import * as base64 from 'base64-js';\nimport { EventTarget, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport MessageEvent from './MessageEvent';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\n\nconst { WebRTCModule } = NativeModules;\n\ntype RTCDataChannelState = 'connecting' | 'open' | 'closing' | 'closed';\n\ntype DataChannelEventMap = {\n    bufferedamountlow: RTCDataChannelEvent<'bufferedamountlow'>;\n    close: RTCDataChannelEvent<'close'>;\n    closing: RTCDataChannelEvent<'closing'>;\n    error: RTCDataChannelEvent<'error'>;\n    message: MessageEvent<'message'>;\n    open: RTCDataChannelEvent<'open'>;\n};\n\nexport default class RTCDataChannel extends EventTarget<DataChannelEventMap> {\n    _peerConnectionId: number;\n    _reactTag: string;\n\n    _bufferedAmount: number;\n    _id: number;\n    _label: string;\n    _maxPacketLifeTime?: number;\n    _maxRetransmits?: number;\n    _negotiated: boolean;\n    _ordered: boolean;\n    _protocol: string;\n    _readyState: RTCDataChannelState;\n\n    binaryType = 'arraybuffer'; // we only support 'arraybuffer'\n    bufferedAmountLowThreshold = 0;\n\n    constructor(info) {\n        super();\n\n        this._peerConnectionId = info.peerConnectionId;\n        this._reactTag = info.reactTag;\n\n        this._bufferedAmount = 0;\n        this._label = info.label;\n        this._id = info.id === -1 ? null : info.id; // null until negotiated.\n        this._ordered = Boolean(info.ordered);\n        this._maxPacketLifeTime = info.maxPacketLifeTime;\n        this._maxRetransmits = info.maxRetransmits;\n        this._protocol = info.protocol || '';\n        this._negotiated = Boolean(info.negotiated);\n        this._readyState = info.readyState;\n\n        this._registerEvents();\n    }\n\n    get bufferedAmount(): number {\n        return this._bufferedAmount;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get id(): number {\n        return this._id;\n    }\n\n    get ordered(): boolean {\n        return this._ordered;\n    }\n\n    get maxPacketLifeTime(): number | undefined {\n        return this._maxPacketLifeTime;\n    }\n\n    get maxRetransmits(): number | undefined {\n        return this._maxRetransmits;\n    }\n\n    get protocol(): string {\n        return this._protocol;\n    }\n\n    get negotiated(): boolean {\n        return this._negotiated;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    send(data: string): void;\n    send(data: ArrayBuffer): void;\n    send(data: ArrayBufferView): void;\n    send(data: string | ArrayBuffer | ArrayBufferView): void {\n        if (typeof data === 'string') {\n            WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, data, 'text');\n\n            return;\n        }\n\n        // Safely convert the buffer object to an Uint8Array for base64-encoding\n        if (ArrayBuffer.isView(data)) {\n            data = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n        } else if (data instanceof ArrayBuffer) {\n            data = new Uint8Array(data);\n        } else {\n            throw new TypeError('Data must be either string, ArrayBuffer, or ArrayBufferView');\n        }\n\n        const base64data = base64.fromByteArray(data as Uint8Array);\n\n        WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, base64data, 'binary');\n    }\n\n    close(): void {\n        if (this._readyState === 'closing' || this._readyState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.dataChannelClose(this._peerConnectionId, this._reactTag);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'dataChannelStateChanged', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._readyState = ev.state;\n\n            if (this._id === null && ev.id !== -1) {\n                this._id = ev.id;\n            }\n\n            if (this._readyState === 'open') {\n                this.dispatchEvent(new RTCDataChannelEvent('open', { channel: this }));\n            } else if (this._readyState === 'closing') {\n                this.dispatchEvent(new RTCDataChannelEvent('closing', { channel: this }));\n            } else if (this._readyState === 'closed') {\n                this.dispatchEvent(new RTCDataChannelEvent('close', { channel: this }));\n\n                // This DataChannel is done, clean up event handlers.\n                removeListener(this);\n\n                WebRTCModule.dataChannelDispose(this._peerConnectionId, this._reactTag);\n            }\n        });\n\n        addListener(this, 'dataChannelReceiveMessage', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            let data = ev.data;\n\n            if (ev.type === 'binary') {\n                data = base64.toByteArray(ev.data).buffer;\n            }\n\n            this.dispatchEvent(new MessageEvent('message', { data }));\n        });\n\n        addListener(this, 'dataChannelDidChangeBufferedAmount', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._bufferedAmount = ev.bufferedAmount;\n\n            if (this._bufferedAmount < this.bufferedAmountLowThreshold) {\n                this.dispatchEvent(new RTCDataChannelEvent('bufferedamountlow', { channel: this }));\n            }\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCDataChannel.prototype;\n\ndefineEventAttribute(proto, 'bufferedamountlow');\ndefineEventAttribute(proto, 'close');\ndefineEventAttribute(proto, 'closing');\ndefineEventAttribute(proto, 'error');\ndefineEventAttribute(proto, 'message');\ndefineEventAttribute(proto, 'open');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js
index b41a908..9d99329 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 /**
  * @eventClass
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js.map
index 2f8b5d1..e751f1b 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCDataChannelEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCDataChannelEvent","Event","constructor","type","eventInitDict","channel","exports","default"],"sources":["RTCDataChannelEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport type RTCDataChannel from './RTCDataChannel';\n\ntype DATA_CHANNEL_EVENTS =  'open'| 'message'| 'bufferedamountlow'| 'closing'| 'close'| 'error' | 'datachannel';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    channel: RTCDataChannel;\n}\n\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {DATA_CHANNEL_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport default class RTCDataChannelEvent<\nTEventType extends DATA_CHANNEL_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    channel: RTCDataChannel;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.channel = eventInitDict.channel;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAWhD;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,mBAAmB,SAE9BC,YAAK,CAAa;EACxB;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IACvE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACc,OAAO,GAAGD,aAAa,CAACC,OAAO;EACxC;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,mBAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCDataChannelEvent","Event","constructor","type","eventInitDict","channel","exports","default"],"sources":["RTCDataChannelEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport type RTCDataChannel from './RTCDataChannel';\n\ntype DATA_CHANNEL_EVENTS =  'open'| 'message'| 'bufferedamountlow'| 'closing'| 'close'| 'error' | 'datachannel';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    channel: RTCDataChannel;\n}\n\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {DATA_CHANNEL_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport default class RTCDataChannelEvent<\nTEventType extends DATA_CHANNEL_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    channel: RTCDataChannel;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.channel = eventInitDict.channel;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAWhD;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,mBAAmB,SAE9BC,YAAK,CAAa;EACxB;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IACvE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACc,OAAO,GAAGD,aAAa,CAACC,OAAO;EACxC;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,mBAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js
index c62e943..e5e40b4 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 /**
  * @brief This class Represents internal error happening on the native side as
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js.map
index 7a9761a..64b1435 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCErrorEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCErrorEvent","Event","constructor","type","func","message","exports","default"],"sources":["RTCErrorEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\ntype RTCPeerConnectionErrorFunc =\n    | 'addTransceiver'\n    | 'getTransceivers'\n    | 'addTrack'\n    | 'removeTrack';\n\n/**\n * @brief This class Represents internal error happening on the native side as\n * part of asynchronous invocations to synchronous web APIs.\n */\nexport default class RTCErrorEvent<TEventType extends RTCPeerConnectionErrorFunc> extends Event<TEventType> {\n    readonly func: RTCPeerConnectionErrorFunc;\n    readonly message: string;\n    constructor(type: TEventType, func: RTCPeerConnectionErrorFunc, message: string) {\n        super(type);\n        this.func = func;\n        this.message = message;\n    }\n}"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAQhD;AACA;AACA;AACA;AACe,MAAMQ,aAAa,SAAwDC,YAAK,CAAa;EAGxGC,WAAWA,CAACC,IAAgB,EAAEC,IAAgC,EAAEC,OAAe,EAAE;IAC7E,KAAK,CAACF,IAAI,CAAC;IAACZ,eAAA;IAAAA,eAAA;IACZ,IAAI,CAACa,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,aAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCErrorEvent","Event","constructor","type","func","message","exports","default"],"sources":["RTCErrorEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\ntype RTCPeerConnectionErrorFunc =\n    | 'addTransceiver'\n    | 'getTransceivers'\n    | 'addTrack'\n    | 'removeTrack';\n\n/**\n * @brief This class Represents internal error happening on the native side as\n * part of asynchronous invocations to synchronous web APIs.\n */\nexport default class RTCErrorEvent<TEventType extends RTCPeerConnectionErrorFunc> extends Event<TEventType> {\n    readonly func: RTCPeerConnectionErrorFunc;\n    readonly message: string;\n    constructor(type: TEventType, func: RTCPeerConnectionErrorFunc, message: string) {\n        super(type);\n        this.func = func;\n        this.message = message;\n    }\n}"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAQhD;AACA;AACA;AACA;AACe,MAAMQ,aAAa,SAAwDC,YAAK,CAAa;EAGxGC,WAAWA,CAACC,IAAgB,EAAEC,IAAgC,EAAEC,OAAe,EAAE;IAC7E,KAAK,CAACF,IAAI,CAAC;IAACZ,eAAA;IAAAA,eAAA;IACZ,IAAI,CAACa,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAP,aAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js
index f9e522c..9bea356 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = exports.RTCFrameCryptorStateEvent = exports.RTCFrameCryptorState = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 var _reactNative = require("react-native");
 var _EventEmitter = require("./EventEmitter");
 var _Logger = _interopRequireDefault(require("./Logger"));
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js.map
index 92a3293..43d2e85 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCFrameCryptor.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_reactNative","_EventEmitter","_Logger","_interopRequireDefault","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","WebRTCModule","NativeModules","log","Logger","RTCFrameCryptorStateEvent","Event","constructor","type","eventInitDict","frameCryptor","state","exports","RTCFrameCryptorState","RTCFrameCryptor","EventTarget","frameCryptorId","participantId","_frameCryptorId","_participantId","_registerEvents","id","_cryptorStateFromString","str","FrameCryptorStateNew","FrameCryptorStateOk","FrameCryptorStateDecryptionFailed","FrameCryptorStateEncryptionFailed","FrameCryptorStateInternalError","FrameCryptorStateKeyRatcheted","FrameCryptorStateMissingKey","setKeyIndex","keyIndex","params","frameCryptorSetKeyIndex","then","data","getKeyIndex","frameCryptorGetKeyIndex","setEnabled","enabled","frameCryptorSetEnabled","getEnabled","frameCryptorGetEnabled","dispose","frameCryptorDispose","removeListener","addListener","ev","debug","initDict","dispatchEvent","proto","prototype","defineEventAttribute"],"sources":["RTCFrameCryptor.ts"],"sourcesContent":["import { Event, EventTarget, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nconst { WebRTCModule } = NativeModules;\n\nconst log = new Logger('pc');\n\ntype FRAME_CRYPTOR_EVENTS =  'onframecryptorstatechanged';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    frameCryptor: RTCFrameCryptor;\n    state: RTCFrameCryptorState;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {FRAME_CRYPTOR_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport class RTCFrameCryptorStateEvent<\nTEventType extends FRAME_CRYPTOR_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    frameCryptor: RTCFrameCryptor;\n    /** @eventProperty */\n    state: RTCFrameCryptorState;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.frameCryptor = eventInitDict.frameCryptor;\n        this.state = eventInitDict.state;\n    }\n}\n\ntype RTCFrameCryptorEventMap = {\n    onframecryptorstatechanged: RTCFrameCryptorStateEvent<'onframecryptorstatechanged'>;\n}\n\nexport enum RTCFrameCryptorState {\n    FrameCryptorStateNew,\n    FrameCryptorStateOk,\n    FrameCryptorStateEncryptionFailed,\n    FrameCryptorStateDecryptionFailed,\n    FrameCryptorStateMissingKey,\n    FrameCryptorStateKeyRatcheted,\n    FrameCryptorStateInternalError,\n}\n\nexport default class RTCFrameCryptor extends EventTarget<RTCFrameCryptorEventMap> {\n    private _frameCryptorId: string;\n    private _participantId: string;\n\n    constructor(frameCryptorId: string, participantId: string) {\n        super();\n        this._frameCryptorId = frameCryptorId;\n        this._participantId = participantId;\n        this._registerEvents();\n    }\n\n    get id() {\n        return this._frameCryptorId;\n    }\n\n    get participantId() {\n        return this._participantId;\n    }\n\n    _cryptorStateFromString(str: string): RTCFrameCryptorState {\n        switch (str) {\n            case 'new':\n                return RTCFrameCryptorState.FrameCryptorStateNew;\n            case 'ok':\n                return RTCFrameCryptorState.FrameCryptorStateOk;\n            case 'decryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateDecryptionFailed;\n            case 'encryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateEncryptionFailed;\n            case 'internalError':\n                return RTCFrameCryptorState.FrameCryptorStateInternalError;\n            case 'keyRatcheted':\n                return RTCFrameCryptorState.FrameCryptorStateKeyRatcheted;\n            case 'missingKey':\n                return RTCFrameCryptorState.FrameCryptorStateMissingKey;\n            default:\n                throw 'Unknown FrameCryptorState: $str';\n        }\n    }\n\n    async setKeyIndex(keyIndex: number): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            keyIndex,\n        };\n\n        return WebRTCModule.frameCryptorSetKeyIndex(params)\n            .then(data => data['result']);\n    }\n\n    async getKeyIndex(): Promise<number> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetKeyIndex(params)\n            .then(data => data['keyIndex']);\n    }\n\n    async setEnabled(enabled: boolean): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            enabled,\n        };\n\n        return WebRTCModule.frameCryptorSetEnabled(params)\n            .then(data => data['result']);\n    }\n\n    async getEnabled(): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetEnabled(params)\n            .then(data => data['enabled']);\n    }\n\n    async dispose(): Promise<void> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        await WebRTCModule.frameCryptorDispose(params);\n        removeListener(this);\n    }\n\n\n    _registerEvents(): void {\n        addListener(this, 'frameCryptionStateChanged', (ev: any) => {\n            if (ev.participantId !== this._participantId || ev.frameCryptorId !== this._frameCryptorId) {\n                return;\n            }\n\n            log.debug(`${this.id} frameCryptionStateChanged ${ev.state}`);\n\n            const initDict = {\n                frameCryptor: this,\n                state: ev.state,\n            };\n\n            this.dispatchEvent(new RTCFrameCryptorStateEvent('onframecryptorstatechanged', initDict));\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCFrameCryptor.prototype;\n\ndefineEventAttribute(proto, 'onframecryptorstatechanged');"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_reactNative","_EventEmitter","_Logger","_interopRequireDefault","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","WebRTCModule","NativeModules","log","Logger","RTCFrameCryptorStateEvent","Event","constructor","type","eventInitDict","frameCryptor","state","exports","RTCFrameCryptorState","RTCFrameCryptor","EventTarget","frameCryptorId","participantId","_frameCryptorId","_participantId","_registerEvents","id","_cryptorStateFromString","str","FrameCryptorStateNew","FrameCryptorStateOk","FrameCryptorStateDecryptionFailed","FrameCryptorStateEncryptionFailed","FrameCryptorStateInternalError","FrameCryptorStateKeyRatcheted","FrameCryptorStateMissingKey","setKeyIndex","keyIndex","params","frameCryptorSetKeyIndex","then","data","getKeyIndex","frameCryptorGetKeyIndex","setEnabled","enabled","frameCryptorSetEnabled","getEnabled","frameCryptorGetEnabled","dispose","frameCryptorDispose","removeListener","addListener","ev","debug","initDict","dispatchEvent","proto","prototype","defineEventAttribute"],"sources":["RTCFrameCryptor.ts"],"sourcesContent":["import { Event, EventTarget, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nconst { WebRTCModule } = NativeModules;\n\nconst log = new Logger('pc');\n\ntype FRAME_CRYPTOR_EVENTS =  'onframecryptorstatechanged';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    frameCryptor: RTCFrameCryptor;\n    state: RTCFrameCryptorState;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {FRAME_CRYPTOR_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport class RTCFrameCryptorStateEvent<\nTEventType extends FRAME_CRYPTOR_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    frameCryptor: RTCFrameCryptor;\n    /** @eventProperty */\n    state: RTCFrameCryptorState;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.frameCryptor = eventInitDict.frameCryptor;\n        this.state = eventInitDict.state;\n    }\n}\n\ntype RTCFrameCryptorEventMap = {\n    onframecryptorstatechanged: RTCFrameCryptorStateEvent<'onframecryptorstatechanged'>;\n}\n\nexport enum RTCFrameCryptorState {\n    FrameCryptorStateNew,\n    FrameCryptorStateOk,\n    FrameCryptorStateEncryptionFailed,\n    FrameCryptorStateDecryptionFailed,\n    FrameCryptorStateMissingKey,\n    FrameCryptorStateKeyRatcheted,\n    FrameCryptorStateInternalError,\n}\n\nexport default class RTCFrameCryptor extends EventTarget<RTCFrameCryptorEventMap> {\n    private _frameCryptorId: string;\n    private _participantId: string;\n\n    constructor(frameCryptorId: string, participantId: string) {\n        super();\n        this._frameCryptorId = frameCryptorId;\n        this._participantId = participantId;\n        this._registerEvents();\n    }\n\n    get id() {\n        return this._frameCryptorId;\n    }\n\n    get participantId() {\n        return this._participantId;\n    }\n\n    _cryptorStateFromString(str: string): RTCFrameCryptorState {\n        switch (str) {\n            case 'new':\n                return RTCFrameCryptorState.FrameCryptorStateNew;\n            case 'ok':\n                return RTCFrameCryptorState.FrameCryptorStateOk;\n            case 'decryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateDecryptionFailed;\n            case 'encryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateEncryptionFailed;\n            case 'internalError':\n                return RTCFrameCryptorState.FrameCryptorStateInternalError;\n            case 'keyRatcheted':\n                return RTCFrameCryptorState.FrameCryptorStateKeyRatcheted;\n            case 'missingKey':\n                return RTCFrameCryptorState.FrameCryptorStateMissingKey;\n            default:\n                throw 'Unknown FrameCryptorState: $str';\n        }\n    }\n\n    async setKeyIndex(keyIndex: number): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            keyIndex,\n        };\n\n        return WebRTCModule.frameCryptorSetKeyIndex(params)\n            .then(data => data['result']);\n    }\n\n    async getKeyIndex(): Promise<number> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetKeyIndex(params)\n            .then(data => data['keyIndex']);\n    }\n\n    async setEnabled(enabled: boolean): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            enabled,\n        };\n\n        return WebRTCModule.frameCryptorSetEnabled(params)\n            .then(data => data['result']);\n    }\n\n    async getEnabled(): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetEnabled(params)\n            .then(data => data['enabled']);\n    }\n\n    async dispose(): Promise<void> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        await WebRTCModule.frameCryptorDispose(params);\n        removeListener(this);\n    }\n\n\n    _registerEvents(): void {\n        addListener(this, 'frameCryptionStateChanged', (ev: any) => {\n            if (ev.participantId !== this._participantId || ev.frameCryptorId !== this._frameCryptorId) {\n                return;\n            }\n\n            log.debug(`${this.id} frameCryptionStateChanged ${ev.state}`);\n\n            const initDict = {\n                frameCryptor: this,\n                state: ev.state,\n            };\n\n            this.dispatchEvent(new RTCFrameCryptorStateEvent('onframecryptorstatechanged', initDict));\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCFrameCryptor.prototype;\n\ndefineEventAttribute(proto, 'onframecryptorstatechanged');"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js
index b09fa22..7ba3927 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 /**
  * @eventClass
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js.map
index 24c2eb7..fc495d3 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCIceCandidateEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCIceCandidateEvent","Event","constructor","type","eventInitDict","_eventInitDict$candid","candidate","exports","default"],"sources":["RTCIceCandidateEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport type RTCIceCandidate from './RTCIceCandidate';\n\ntype RTC_ICECANDIDATE_EVENTS = 'icecandidate' | 'icecandidateerror'\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    candidate: RTCIceCandidate | null\n}\n\n/**\n * @eventClass\n * This event is fired whenever the icecandidate related RTC_EVENTS changed.\n * @type {RTCIceCandidateEvent} for icecandidate related.\n * @param {RTC_ICECANDIDATE_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection#events MDN} for details.\n */\nexport default class RTCIceCandidateEvent<TEventType extends RTC_ICECANDIDATE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    candidate: RTCIceCandidate | null;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.candidate = eventInitDict?.candidate ?? null;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAUhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,oBAAoB,SAAqDC,YAAK,CAAa;EAC5G;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IAAA,IAAAC,qBAAA;IACvE,KAAK,CAACF,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACe,SAAS,IAAAD,qBAAA,GAAGD,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEE,SAAS,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,IAAI;EACrD;AACJ;AAACE,OAAA,CAAAC,OAAA,GAAAR,oBAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCIceCandidateEvent","Event","constructor","type","eventInitDict","_eventInitDict$candid","candidate","exports","default"],"sources":["RTCIceCandidateEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport type RTCIceCandidate from './RTCIceCandidate';\n\ntype RTC_ICECANDIDATE_EVENTS = 'icecandidate' | 'icecandidateerror'\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    candidate: RTCIceCandidate | null\n}\n\n/**\n * @eventClass\n * This event is fired whenever the icecandidate related RTC_EVENTS changed.\n * @type {RTCIceCandidateEvent} for icecandidate related.\n * @param {RTC_ICECANDIDATE_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection#events MDN} for details.\n */\nexport default class RTCIceCandidateEvent<TEventType extends RTC_ICECANDIDATE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    candidate: RTCIceCandidate | null;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.candidate = eventInitDict?.candidate ?? null;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAUhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,oBAAoB,SAAqDC,YAAK,CAAa;EAC5G;;EAEAC,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IAAA,IAAAC,qBAAA;IACvE,KAAK,CAACF,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA;IAC3B,IAAI,CAACe,SAAS,IAAAD,qBAAA,GAAGD,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEE,SAAS,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,IAAI;EACrD;AACJ;AAACE,OAAA,CAAAC,OAAA,GAAAR,oBAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js
index 621367c..8142eee 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 var _reactNative = require("react-native");
 var _EventEmitter = require("./EventEmitter");
 var _Logger = _interopRequireDefault(require("./Logger"));
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js.map
index 368ebaa..1781db9 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCPeerConnection.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_reactNative","_EventEmitter","_Logger","_interopRequireDefault","_MediaStream","_MediaStreamTrack","_MediaStreamTrackEvent","_RTCDataChannel","_RTCDataChannelEvent","_RTCIceCandidate","_RTCIceCandidateEvent","_RTCRtpReceiveParameters","_RTCRtpReceiver","_RTCRtpSendParameters","_RTCRtpSender","_RTCRtpTransceiver","_RTCSessionDescription","_RTCTrackEvent","RTCUtil","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","enumerable","configurable","writable","log","Logger","WebRTCModule","NativeModules","nextPeerConnectionId","RTCPeerConnection","EventTarget","constructor","configuration","_pcId","_configuration$iceSer","servers","iceServers","server","urls","url","Array","isArray","map","toLowerCase","filter","s","peerConnectionInit","Error","_transceivers","_remoteStreams","Map","_pendingTrackEvents","_registerEvents","debug","createOffer","options","sdpInfo","newTransceivers","transceiversInfo","peerConnectionCreateOffer","normalizeOfferOptions","forEach","t","transceiverOrder","transceiver","newSender","RTCRtpSender","sender","track","remoteTrack","receiver","MediaStreamTrack","newReceiver","RTCRtpReceiver","newTransceiver","RTCRtpTransceiver","_insertTransceiverSorted","_updateTransceivers","createAnswer","peerConnectionCreateAnswer","setConfiguration","peerConnectionSetConfiguration","setLocalDescription","sessionDescription","_desc","_sessionDescription$s","type","sdp","isSdpTypeValid","peerConnectionSetLocalDescription","localDescription","RTCSessionDescription","setRemoteDescription","_sessionDescription$s2","_desc$type","Promise","reject","peerConnectionSetRemoteDescription","remoteDescription","pendingTrackEvents","ev","getTransceivers","id","_mid","mid","_currentDirection","currentDirection","_direction","direction","streams","streamInfo","streamId","stream","MediaStream","streamReactTag","tracks","_tracks","includes","push","eventData","dispatchEvent","RTCTrackEvent","MediaStreamTrackEvent","_setMutedInternal","addIceCandidate","candidate","sdpMLineIndex","undefined","sdpMid","TypeError","newSdp","peerConnectionAddICECandidate","deepClone","addTrack","connectionState","_trackExists","_len","arguments","length","_key","streamIds","result","peerConnectionAddTrack","existingSender","getSenders","_track","existingTransceiver","addTransceiver","source","init","src","trackId","peerConnectionAddTransceiver","removeTrack","_peerConnectionId","find","peerConnectionRemoveTrack","getStats","selector","data","peerConnectionGetStats","JSON","parse","senders","receivers","getReceivers","r","matches","sr","e","stopped","close","peerConnectionClose","_ref","_setStopped","restartIce","peerConnectionRestartIce","addListener","pcId","Event","iceConnectionState","removeListener","peerConnectionDispose","signalingState","receiverId","values","trackIdx","indexOf","splice","RTCIceCandidate","RTCIceCandidateEvent","iceGatheringState","channel","RTCDataChannel","dataChannel","RTCDataChannelEvent","muted","createDataChannel","label","dataChannelDict","channelInfo","String","_sender$track","transceiverUpdates","removeStopped","update","transceiverId","_stopped","Boolean","isStopped","_sender","_rtpParameters","RTCRtpSendParameters","senderRtpParameters","_receiver","RTCRtpReceiveParameters","receiverRtpParameters","order","sort","a","b","exports","proto","defineEventAttribute"],"sources":["RTCPeerConnection.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport MediaStream from './MediaStream';\nimport MediaStreamTrack from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport RTCDataChannel from './RTCDataChannel';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\nimport RTCIceCandidate from './RTCIceCandidate';\nimport RTCIceCandidateEvent from './RTCIceCandidateEvent';\nimport RTCRtpReceiveParameters from './RTCRtpReceiveParameters';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpSendParameters from './RTCRtpSendParameters';\nimport RTCRtpSender from './RTCRtpSender';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\nimport RTCSessionDescription, { RTCSessionDescriptionInit } from './RTCSessionDescription';\nimport RTCTrackEvent from './RTCTrackEvent';\nimport * as RTCUtil from './RTCUtil';\nimport { RTCOfferOptions } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\ntype RTCSignalingState =\n    | 'stable'\n    | 'have-local-offer'\n    | 'have-remote-offer'\n    | 'have-local-pranswer'\n    | 'have-remote-pranswer'\n    | 'closed';\n\ntype RTCIceGatheringState = 'new' | 'gathering' | 'complete';\n\ntype RTCPeerConnectionState = 'new' | 'connecting' | 'connected' | 'disconnected' | 'failed' | 'closed';\n\ntype RTCIceConnectionState = 'new' | 'checking' | 'connected' | 'completed' | 'failed' | 'disconnected' | 'closed';\n\ntype RTCDataChannelInit = {\n    ordered?: boolean,\n    maxPacketLifeTime?: number,\n    maxRetransmits?: number,\n    protocol?: string,\n    negotiated?: boolean,\n    id?: number\n};\n\ntype RTCIceServer = {\n    credential?: string,\n    url?: string, // Deprecated.\n    urls?: string | string[],\n    username?: string\n};\n\ntype RTCConfiguration = {\n    bundlePolicy?: 'balanced' | 'max-compat' | 'max-bundle',\n    iceCandidatePoolSize?: number,\n    iceServers?: RTCIceServer[],\n    iceTransportPolicy?: 'all' | 'relay',\n    rtcpMuxPolicy?: 'negotiate' | 'require'\n};\n\ntype RTCPeerConnectionEventMap = {\n    connectionstatechange: Event<'connectionstatechange'>\n    icecandidate: RTCIceCandidateEvent<'icecandidate'>\n    icecandidateerror: RTCIceCandidateEvent<'icecandidateerror'>\n    iceconnectionstatechange: Event<'iceconnectionstatechange'>\n    icegatheringstatechange: Event<'icegatheringstatechange'>\n    negotiationneeded: Event<'negotiationneeded'>\n    signalingstatechange: Event<'signalingstatechange'>\n    datachannel: RTCDataChannelEvent<'datachannel'>\n    track: RTCTrackEvent<'track'>\n    error: Event<'error'>\n}\n\nlet nextPeerConnectionId = 0;\n\nexport default class RTCPeerConnection extends EventTarget<RTCPeerConnectionEventMap> {\n    localDescription: RTCSessionDescription | null = null;\n    remoteDescription: RTCSessionDescription | null = null;\n    signalingState: RTCSignalingState = 'stable';\n    iceGatheringState: RTCIceGatheringState = 'new';\n    connectionState: RTCPeerConnectionState = 'new';\n    iceConnectionState: RTCIceConnectionState = 'new';\n\n    _pcId: number;\n    _transceivers: { order: number, transceiver: RTCRtpTransceiver }[];\n    _remoteStreams: Map<string, MediaStream>;\n    _pendingTrackEvents: any[];\n\n    constructor(configuration?: RTCConfiguration) {\n        super();\n\n        this._pcId = nextPeerConnectionId++;\n\n        // Sanitize ICE servers.\n        if (configuration) {\n            const servers = configuration?.iceServers ?? [];\n\n            for (const server of servers) {\n                let urls = server.url || server.urls;\n\n                delete server.url;\n                delete server.urls;\n\n                if (!urls) {\n                    continue;\n                }\n\n                if (!Array.isArray(urls)) {\n                    urls = [ urls ];\n                }\n\n                // Native WebRTC does case sensitive parsing.\n                server.urls = urls.map(url => url.toLowerCase());\n            }\n\n            // Filter out bogus servers.\n            configuration.iceServers = servers.filter(s => s.urls);\n        }\n\n        if (!WebRTCModule.peerConnectionInit(configuration, this._pcId)) {\n            throw new Error('Failed to initialize PeerConnection, check the native logs!');\n        }\n\n        this._transceivers = [];\n        this._remoteStreams = new Map();\n        this._pendingTrackEvents = [];\n\n        this._registerEvents();\n\n        log.debug(`${this._pcId} ctor`);\n    }\n\n    async createOffer(options?:RTCOfferOptions) {\n        log.debug(`${this._pcId} createOffer`);\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateOffer(this._pcId, RTCUtil.normalizeOfferOptions(options));\n\n        log.debug(`${this._pcId} createOffer OK`);\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    async createAnswer() {\n        log.debug(`${this._pcId} createAnswer`);\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateAnswer(this._pcId, {});\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    setConfiguration(configuration): void {\n        WebRTCModule.peerConnectionSetConfiguration(configuration, this._pcId);\n    }\n\n    async setLocalDescription(sessionDescription?: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setLocalDescription`);\n\n        let desc;\n\n        if (sessionDescription) {\n            desc = {\n                type: sessionDescription.type,\n                sdp: sessionDescription.sdp ?? ''\n            };\n\n            if (!RTCUtil.isSdpTypeValid(desc.type)) {\n                throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n            }\n        } else {\n            desc = null;\n        }\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetLocalDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.localDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.localDescription = null;\n        }\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc?.type === 'answer');\n\n        log.debug(`${this._pcId} setLocalDescription OK`);\n    }\n\n    async setRemoteDescription(sessionDescription: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setRemoteDescription`);\n\n        if (!sessionDescription) {\n            return Promise.reject(new Error('No session description provided'));\n        }\n\n        const desc = {\n            type: sessionDescription.type,\n            sdp: sessionDescription.sdp ?? ''\n        };\n\n        if (!RTCUtil.isSdpTypeValid(desc.type ?? '')) {\n            throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n        }\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetRemoteDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.remoteDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.remoteDescription = null;\n        }\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc.type === 'answer');\n\n        // Fire track events. They must fire before sRD resolves.\n        const pendingTrackEvents = this._pendingTrackEvents;\n\n        this._pendingTrackEvents = [];\n\n        for (const ev of pendingTrackEvents) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.receiver.id ===  ev.receiver.id);\n\n            // We need to fire this event for an existing track sometimes, like\n            // when the transceiver direction (on the sending side) switches from\n            // sendrecv to recvonly and then back.\n\n            // @ts-ignore\n            const track: MediaStreamTrack = transceiver.receiver.track;\n\n            transceiver._mid = ev.transceiver.mid;\n            transceiver._currentDirection = ev.transceiver.currentDirection;\n            transceiver._direction = ev.transceiver.direction;\n\n            // Get the stream object from the event. Create if necessary.\n            const streams: MediaStream[] = ev.streams.map(streamInfo => {\n                // Here we are making sure that we don't create stream objects that already exist\n                // So that event listeners do get the same object if it has been created before.\n                if (!this._remoteStreams.has(streamInfo.streamId)) {\n                    const stream = new MediaStream({\n                        streamId: streamInfo.streamId,\n                        streamReactTag: streamInfo.streamReactTag,\n                        tracks: []\n                    });\n\n                    this._remoteStreams.set(streamInfo.streamId, stream);\n                }\n\n                const stream = this._remoteStreams.get(streamInfo.streamId);\n\n                if (!stream?._tracks.includes(track)) {\n                    stream?._tracks.push(track);\n                }\n\n                return stream;\n            });\n\n            const eventData = {\n                streams,\n                transceiver,\n                track,\n                receiver: transceiver.receiver\n            };\n\n\n            this.dispatchEvent(new RTCTrackEvent('track', eventData));\n\n            streams.forEach(stream => {\n                stream.dispatchEvent(new MediaStreamTrackEvent('addtrack', { track }));\n            });\n\n            // Dispatch an unmute event for the track.\n            track._setMutedInternal(false);\n        }\n\n        log.debug(`${this._pcId} setRemoteDescription OK`);\n    }\n\n    async addIceCandidate(candidate): Promise<void> {\n        log.debug(`${this._pcId} addIceCandidate`);\n\n        if (!candidate || !candidate.candidate) {\n            // XXX end-of candidates is not implemented: https://bugs.chromium.org/p/webrtc/issues/detail?id=9218\n            return;\n        }\n\n        if ((candidate.sdpMLineIndex === null ||\n             candidate.sdpMLineIndex === undefined) &&\n            (candidate.sdpMid === null ||\n             candidate.sdpMid === undefined)\n        ) {\n            throw new TypeError('`sdpMLineIndex` and `sdpMid` must not be both null or undefined');\n        }\n\n        const newSdp = await WebRTCModule.peerConnectionAddICECandidate(\n            this._pcId,\n            RTCUtil.deepClone(candidate)\n        );\n\n        this.remoteDescription = new RTCSessionDescription(newSdp);\n    }\n\n    /**\n     * @brief Adds a new track to the {@link RTCPeerConnection},\n     * and indicates that it is contained in the specified {@link MediaStream}s.\n     * This method has to be synchronous as the W3C API expects a track to be returned\n     * @param {MediaStreamTrack} track The track to be added\n     * @param {...MediaStream} streams One or more {@link MediaStream}s the track needs to be added to\n     * https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack\n     */\n    addTrack(track: MediaStreamTrack, ...streams: MediaStream[]): RTCRtpSender {\n        log.debug(`${this._pcId} addTrack`);\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        if (this._trackExists(track)) {\n            throw new Error('Track already exists in a sender');\n        }\n\n        const streamIds = streams.map(s => s.id);\n        const result = WebRTCModule.peerConnectionAddTrack(this._pcId, track.id, { streamIds });\n\n        if (result === null) {\n            throw new Error('Could not add sender');\n        }\n\n        const { transceiverOrder, transceiver, sender } = result;\n\n        // According to the W3C docs, the sender could have been reused, and\n        // so we check if that is the case, and update accordingly.\n        const [ existingSender ] = this\n            .getSenders()\n            .filter(s => s.id === sender.id);\n\n        if (existingSender) {\n            // Update sender\n            existingSender._track = track;\n\n            // Update the corresponding transceiver as well\n            const [ existingTransceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === existingSender.id);\n\n            existingTransceiver._direction = transceiver.direction;\n            existingTransceiver._currentDirection = transceiver.currentDirection;\n\n            return existingSender;\n        }\n\n        // This is a new transceiver, should create a transceiver for it and add it\n        const newSender = new RTCRtpSender({ ...transceiver.sender, track });\n        const remoteTrack = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n        const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n        const newTransceiver = new RTCRtpTransceiver({\n            ...transceiver,\n            sender: newSender,\n            receiver: newReceiver,\n        });\n\n        this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n\n        return newSender;\n    }\n\n    addTransceiver(source: 'audio' | 'video' | MediaStreamTrack, init): RTCRtpTransceiver {\n        log.debug(`${this._pcId} addTransceiver`);\n\n        let src = {};\n\n        if (source === 'audio') {\n            src = { type: 'audio' };\n        } else if (source === 'video') {\n            src = { type: 'video' };\n        } else {\n            src = { trackId: source.id };\n        }\n\n        // Extract the stream ids\n        if (init && init.streams) {\n            init.streamIds = init.streams.map(stream => stream.id);\n        }\n\n        const result = WebRTCModule.peerConnectionAddTransceiver(this._pcId, { ...src, init: { ...init } });\n\n        if (result === null) {\n            throw new Error('Transceiver could not be added');\n        }\n\n        const t = result.transceiver;\n        let track: MediaStreamTrack | null = null;\n\n        if (typeof source === 'string') {\n            if (t.sender.track) {\n                track = new MediaStreamTrack(t.sender.track);\n            }\n        } else {\n            // 'source' is a MediaStreamTrack\n            track = source;\n        }\n\n        const sender = new RTCRtpSender({ ...t.sender, track });\n        const remoteTrack = t.receiver.track ? new MediaStreamTrack(t.receiver.track) : null;\n        const receiver = new RTCRtpReceiver({ ...t.receiver, track: remoteTrack });\n        const transceiver = new RTCRtpTransceiver({\n            ...result.transceiver,\n            sender,\n            receiver\n        });\n\n        this._insertTransceiverSorted(result.transceiverOrder, transceiver);\n\n        return transceiver;\n    }\n\n    removeTrack(sender: RTCRtpSender) {\n        log.debug(`${this._pcId} removeTrack`);\n\n        if (this._pcId !== sender._peerConnectionId) {\n            throw new Error('Sender does not belong to this peer connection');\n        }\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        const existingSender = this\n            .getSenders()\n            .find(s => s === sender);\n\n        if (!existingSender) {\n            throw new Error('Sender does not exist');\n        }\n\n        if (existingSender.track === null) {\n            return;\n        }\n\n        // Blocking!\n        WebRTCModule.peerConnectionRemoveTrack(this._pcId, sender.id);\n\n        existingSender._track = null;\n\n        const [ existingTransceiver ] = this\n            .getTransceivers()\n            .filter(t => t.sender.id === existingSender.id);\n\n        existingTransceiver._direction = existingTransceiver.direction === 'sendrecv' ? 'recvonly' : 'inactive';\n    }\n\n    async getStats(selector?: MediaStreamTrack) {\n        log.debug(`${this._pcId} getStats`);\n\n        if (!selector) {\n            const data = await WebRTCModule.peerConnectionGetStats(this._pcId);\n\n            /**\n             * On both Android and iOS it is faster to construct a single\n             * JSON string representing the Map of StatsReports and have it\n             * pass through the React Native bridge rather than the Map of\n             * StatsReports. While the implementations do try to be faster in\n             * general, the stress is on being faster to pass through the React\n             * Native bridge which is a bottleneck that tends to be visible in\n             * the UI when there is congestion involving UI-related passing.\n             */\n            return new Map(JSON.parse(data));\n        } else {\n            const senders = this.getSenders().filter(s => s.track === selector);\n            const receivers = this.getReceivers().filter(r => r.track === selector);\n            const matches = senders.length + receivers.length;\n\n            if (matches === 0) {\n                throw new Error('Invalid selector: could not find matching sender / receiver');\n            } else if (matches > 1) {\n                throw new Error('Invalid selector: multiple matching senders / receivers');\n            } else {\n                const sr = senders[0] || receivers[0];\n\n                return sr.getStats();\n            }\n        }\n    }\n\n    getTransceivers(): RTCRtpTransceiver[] {\n        return this._transceivers.map(e => e.transceiver);\n    }\n\n    getSenders(): RTCRtpSender[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.sender);\n    }\n\n    getReceivers(): RTCRtpReceiver[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.receiver);\n    }\n\n    close(): void {\n        log.debug(`${this._pcId} close`);\n\n        if (this.connectionState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.peerConnectionClose(this._pcId);\n\n        // Mark transceivers as stopped.\n        this._transceivers.forEach(({ transceiver })=> {\n            transceiver._setStopped();\n        });\n    }\n\n    restartIce(): void {\n        WebRTCModule.peerConnectionRestartIce(this._pcId);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'peerConnectionOnRenegotiationNeeded', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.dispatchEvent(new Event('negotiationneeded'));\n        });\n\n        addListener(this, 'peerConnectionIceConnectionChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceConnectionState = ev.iceConnectionState;\n\n            this.dispatchEvent(new Event('iceconnectionstatechange'));\n        });\n\n        addListener(this, 'peerConnectionStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.connectionState = ev.connectionState;\n\n            this.dispatchEvent(new Event('connectionstatechange'));\n\n            if (ev.connectionState === 'closed') {\n                // This PeerConnection is done, clean up.\n                removeListener(this);\n\n                WebRTCModule.peerConnectionDispose(this._pcId);\n            }\n        });\n\n        addListener(this, 'peerConnectionSignalingStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.signalingState = ev.signalingState;\n\n            this.dispatchEvent(new Event('signalingstatechange'));\n        });\n\n        // Consider moving away from this event: https://github.com/WebKit/WebKit/pull/3953\n        addListener(this, 'peerConnectionOnTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} ontrack`);\n\n            // NOTE: We need to make sure the track event fires right before sRD completes,\n            // so we queue them up here and dispatch the events when sRD fires, but before completing it.\n            // In the future we should probably implement out own logic and drop this event altogether.\n            this._pendingTrackEvents.push(ev);\n        });\n\n        addListener(this, 'peerConnectionOnRemoveTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} onremovetrack ${ev.receiverId}`);\n\n            const receiver = this.getReceivers().find(r => r.id === ev.receiverId);\n            const track = receiver?.track;\n\n            if (receiver && track) {\n                // As per the spec:\n                // - Remove the track from any media streams that were previously passed to the `track` event.\n                // https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-removetrack,\n                // - Mark the track as muted:\n                // https://w3c.github.io/webrtc-pc/#process-remote-track-removal\n                for (const stream of this._remoteStreams.values()) {\n                    if (stream._tracks.includes(track)) {\n                        const trackIdx = stream._tracks.indexOf(track);\n\n                        log.debug(`${this._pcId} removetrack ${track.id}`);\n\n                        stream._tracks.splice(trackIdx, 1);\n\n                        stream.dispatchEvent(new MediaStreamTrackEvent('removetrack', { track }));\n\n                        // Dispatch a mute event for the track.\n                        track._setMutedInternal(true);\n                    }\n                }\n            }\n        });\n\n        addListener(this, 'peerConnectionGotICECandidate', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const sdpInfo = ev.sdp;\n\n            // Can happen when doing a rollback.\n            if (sdpInfo.type && sdpInfo.sdp) {\n                this.localDescription = new RTCSessionDescription(sdpInfo);\n            } else {\n                this.localDescription = null;\n            }\n\n            const candidate = new RTCIceCandidate(ev.candidate);\n\n            this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate }));\n        });\n\n        addListener(this, 'peerConnectionIceGatheringChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceGatheringState = ev.iceGatheringState;\n\n            if (this.iceGatheringState === 'complete') {\n                const sdpInfo = ev.sdp;\n\n                // Can happen when doing a rollback.\n                if (sdpInfo.type && sdpInfo.sdp) {\n                    this.localDescription = new RTCSessionDescription(sdpInfo);\n                } else {\n                    this.localDescription = null;\n                }\n\n                this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate: null }));\n            }\n\n            this.dispatchEvent(new Event('icegatheringstatechange'));\n        });\n\n        addListener(this, 'peerConnectionDidOpenDataChannel', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const channel = new RTCDataChannel(ev.dataChannel);\n\n            this.dispatchEvent(new RTCDataChannelEvent('datachannel', { channel }));\n\n            // Send 'open' event. Native doesn't update the state since it's already\n            // set at this point.\n            channel.dispatchEvent(new RTCDataChannelEvent('open', { channel }));\n        });\n\n        addListener(this, 'mediaStreamTrackMuteChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const [\n                track\n            ] = this.getReceivers().map(r => r.track).filter(t => t?.id === ev.trackId);\n\n            if (track) {\n                track._setMutedInternal(ev.muted);\n            }\n        });\n    }\n\n    /**\n     * Creates a new RTCDataChannel object with the given label. The\n     * RTCDataChannelInit dictionary can be used to configure properties of the\n     * underlying channel such as data reliability.\n     *\n     * @param {string} label - the value with which the label attribute of the new\n     * instance is to be initialized\n     * @param {RTCDataChannelInit} dataChannelDict - an optional dictionary of\n     * values with which to initialize corresponding attributes of the new\n     * instance such as id\n     */\n    createDataChannel(label: string, dataChannelDict?: RTCDataChannelInit): RTCDataChannel {\n        if (arguments.length === 0) {\n            throw new TypeError('1 argument required, but 0 present');\n        }\n\n        if (dataChannelDict && 'id' in dataChannelDict) {\n            const id = dataChannelDict.id;\n\n            if (typeof id !== 'number') {\n                throw new TypeError('DataChannel id must be a number: ' + id);\n            }\n        }\n\n        const channelInfo = WebRTCModule.createDataChannel(this._pcId, String(label), dataChannelDict);\n\n        if (channelInfo === null) {\n            throw new TypeError('Failed to create new DataChannel');\n        }\n\n        return new RTCDataChannel(channelInfo);\n    }\n\n    /**\n     * Check whether a media stream track exists already in a sender.\n     * See https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack for more information\n     */\n    _trackExists(track: MediaStreamTrack): boolean {\n        const [ sender ] = this\n            .getSenders()\n            .filter(\n                sender => sender.track?.id === track.id\n            );\n\n        return sender? true : false;\n    }\n\n    /**\n     * Updates transceivers after offer/answer updates if necessary.\n     */\n    _updateTransceivers(transceiverUpdates, removeStopped = false) {\n        for (const update of transceiverUpdates) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === update.transceiverId);\n\n            if (!transceiver) {\n                continue;\n            }\n\n            if (update.currentDirection) {\n                transceiver._currentDirection = update.currentDirection;\n            }\n\n            transceiver._mid = update.mid;\n            transceiver._stopped = Boolean(update.isStopped);\n            transceiver._sender._rtpParameters = new RTCRtpSendParameters(update.senderRtpParameters);\n            transceiver._receiver._rtpParameters = new RTCRtpReceiveParameters(update.receiverRtpParameters);\n        }\n\n        if (removeStopped) {\n            const stopped = this.getTransceivers().filter(t => t.stopped);\n            const newTransceivers = this._transceivers.filter(t => !stopped.includes(t.transceiver));\n\n            this._transceivers = newTransceivers;\n        }\n    }\n\n    /**\n     * Inserts transceiver into the transceiver array in the order they are created (timestamp).\n     * @param order an index that refers to when it it was created relatively.\n     * @param transceiver the transceiver object to be inserted.\n     */\n    _insertTransceiverSorted(order: number, transceiver: RTCRtpTransceiver) {\n        this._transceivers.push({ order, transceiver });\n        this._transceivers.sort((a, b) => a.order - b.order);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCPeerConnection.prototype;\n\ndefineEventAttribute(proto, 'connectionstatechange');\ndefineEventAttribute(proto, 'icecandidate');\ndefineEventAttribute(proto, 'icecandidateerror');\ndefineEventAttribute(proto, 'iceconnectionstatechange');\ndefineEventAttribute(proto, 'icegatheringstatechange');\ndefineEventAttribute(proto, 'negotiationneeded');\ndefineEventAttribute(proto, 'signalingstatechange');\ndefineEventAttribute(proto, 'datachannel');\ndefineEventAttribute(proto, 'track');\ndefineEventAttribute(proto, 'error');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_reactNative","_EventEmitter","_Logger","_interopRequireDefault","_MediaStream","_MediaStreamTrack","_MediaStreamTrackEvent","_RTCDataChannel","_RTCDataChannelEvent","_RTCIceCandidate","_RTCIceCandidateEvent","_RTCRtpReceiveParameters","_RTCRtpReceiver","_RTCRtpSendParameters","_RTCRtpSender","_RTCRtpTransceiver","_RTCSessionDescription","_RTCTrackEvent","RTCUtil","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","enumerable","configurable","writable","log","Logger","WebRTCModule","NativeModules","nextPeerConnectionId","RTCPeerConnection","EventTarget","constructor","configuration","_pcId","_configuration$iceSer","servers","iceServers","server","urls","url","Array","isArray","map","toLowerCase","filter","s","peerConnectionInit","Error","_transceivers","_remoteStreams","Map","_pendingTrackEvents","_registerEvents","debug","createOffer","options","sdpInfo","newTransceivers","transceiversInfo","peerConnectionCreateOffer","normalizeOfferOptions","forEach","t","transceiverOrder","transceiver","newSender","RTCRtpSender","sender","track","remoteTrack","receiver","MediaStreamTrack","newReceiver","RTCRtpReceiver","newTransceiver","RTCRtpTransceiver","_insertTransceiverSorted","_updateTransceivers","createAnswer","peerConnectionCreateAnswer","setConfiguration","peerConnectionSetConfiguration","setLocalDescription","sessionDescription","_desc","_sessionDescription$s","type","sdp","isSdpTypeValid","peerConnectionSetLocalDescription","localDescription","RTCSessionDescription","setRemoteDescription","_sessionDescription$s2","_desc$type","Promise","reject","peerConnectionSetRemoteDescription","remoteDescription","pendingTrackEvents","ev","getTransceivers","id","_mid","mid","_currentDirection","currentDirection","_direction","direction","streams","streamInfo","streamId","stream","MediaStream","streamReactTag","tracks","_tracks","includes","push","eventData","dispatchEvent","RTCTrackEvent","MediaStreamTrackEvent","_setMutedInternal","addIceCandidate","candidate","sdpMLineIndex","undefined","sdpMid","TypeError","newSdp","peerConnectionAddICECandidate","deepClone","addTrack","connectionState","_trackExists","_len","arguments","length","_key","streamIds","result","peerConnectionAddTrack","existingSender","getSenders","_track","existingTransceiver","addTransceiver","source","init","src","trackId","peerConnectionAddTransceiver","removeTrack","_peerConnectionId","find","peerConnectionRemoveTrack","getStats","selector","data","peerConnectionGetStats","JSON","parse","senders","receivers","getReceivers","r","matches","sr","e","stopped","close","peerConnectionClose","_ref","_setStopped","restartIce","peerConnectionRestartIce","addListener","pcId","Event","iceConnectionState","removeListener","peerConnectionDispose","signalingState","receiverId","values","trackIdx","indexOf","splice","RTCIceCandidate","RTCIceCandidateEvent","iceGatheringState","channel","RTCDataChannel","dataChannel","RTCDataChannelEvent","muted","createDataChannel","label","dataChannelDict","channelInfo","String","_sender$track","transceiverUpdates","removeStopped","update","transceiverId","_stopped","Boolean","isStopped","_sender","_rtpParameters","RTCRtpSendParameters","senderRtpParameters","_receiver","RTCRtpReceiveParameters","receiverRtpParameters","order","sort","a","b","exports","proto","defineEventAttribute"],"sources":["RTCPeerConnection.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport MediaStream from './MediaStream';\nimport MediaStreamTrack from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport RTCDataChannel from './RTCDataChannel';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\nimport RTCIceCandidate from './RTCIceCandidate';\nimport RTCIceCandidateEvent from './RTCIceCandidateEvent';\nimport RTCRtpReceiveParameters from './RTCRtpReceiveParameters';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpSendParameters from './RTCRtpSendParameters';\nimport RTCRtpSender from './RTCRtpSender';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\nimport RTCSessionDescription, { RTCSessionDescriptionInit } from './RTCSessionDescription';\nimport RTCTrackEvent from './RTCTrackEvent';\nimport * as RTCUtil from './RTCUtil';\nimport { RTCOfferOptions } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\ntype RTCSignalingState =\n    | 'stable'\n    | 'have-local-offer'\n    | 'have-remote-offer'\n    | 'have-local-pranswer'\n    | 'have-remote-pranswer'\n    | 'closed';\n\ntype RTCIceGatheringState = 'new' | 'gathering' | 'complete';\n\ntype RTCPeerConnectionState = 'new' | 'connecting' | 'connected' | 'disconnected' | 'failed' | 'closed';\n\ntype RTCIceConnectionState = 'new' | 'checking' | 'connected' | 'completed' | 'failed' | 'disconnected' | 'closed';\n\ntype RTCDataChannelInit = {\n    ordered?: boolean,\n    maxPacketLifeTime?: number,\n    maxRetransmits?: number,\n    protocol?: string,\n    negotiated?: boolean,\n    id?: number\n};\n\ntype RTCIceServer = {\n    credential?: string,\n    url?: string, // Deprecated.\n    urls?: string | string[],\n    username?: string\n};\n\ntype RTCConfiguration = {\n    bundlePolicy?: 'balanced' | 'max-compat' | 'max-bundle',\n    iceCandidatePoolSize?: number,\n    iceServers?: RTCIceServer[],\n    iceTransportPolicy?: 'all' | 'relay',\n    rtcpMuxPolicy?: 'negotiate' | 'require'\n};\n\ntype RTCPeerConnectionEventMap = {\n    connectionstatechange: Event<'connectionstatechange'>\n    icecandidate: RTCIceCandidateEvent<'icecandidate'>\n    icecandidateerror: RTCIceCandidateEvent<'icecandidateerror'>\n    iceconnectionstatechange: Event<'iceconnectionstatechange'>\n    icegatheringstatechange: Event<'icegatheringstatechange'>\n    negotiationneeded: Event<'negotiationneeded'>\n    signalingstatechange: Event<'signalingstatechange'>\n    datachannel: RTCDataChannelEvent<'datachannel'>\n    track: RTCTrackEvent<'track'>\n    error: Event<'error'>\n}\n\nlet nextPeerConnectionId = 0;\n\nexport default class RTCPeerConnection extends EventTarget<RTCPeerConnectionEventMap> {\n    localDescription: RTCSessionDescription | null = null;\n    remoteDescription: RTCSessionDescription | null = null;\n    signalingState: RTCSignalingState = 'stable';\n    iceGatheringState: RTCIceGatheringState = 'new';\n    connectionState: RTCPeerConnectionState = 'new';\n    iceConnectionState: RTCIceConnectionState = 'new';\n\n    _pcId: number;\n    _transceivers: { order: number, transceiver: RTCRtpTransceiver }[];\n    _remoteStreams: Map<string, MediaStream>;\n    _pendingTrackEvents: any[];\n\n    constructor(configuration?: RTCConfiguration) {\n        super();\n\n        this._pcId = nextPeerConnectionId++;\n\n        // Sanitize ICE servers.\n        if (configuration) {\n            const servers = configuration?.iceServers ?? [];\n\n            for (const server of servers) {\n                let urls = server.url || server.urls;\n\n                delete server.url;\n                delete server.urls;\n\n                if (!urls) {\n                    continue;\n                }\n\n                if (!Array.isArray(urls)) {\n                    urls = [ urls ];\n                }\n\n                // Native WebRTC does case sensitive parsing.\n                server.urls = urls.map(url => url.toLowerCase());\n            }\n\n            // Filter out bogus servers.\n            configuration.iceServers = servers.filter(s => s.urls);\n        }\n\n        if (!WebRTCModule.peerConnectionInit(configuration, this._pcId)) {\n            throw new Error('Failed to initialize PeerConnection, check the native logs!');\n        }\n\n        this._transceivers = [];\n        this._remoteStreams = new Map();\n        this._pendingTrackEvents = [];\n\n        this._registerEvents();\n\n        log.debug(`${this._pcId} ctor`);\n    }\n\n    async createOffer(options?:RTCOfferOptions) {\n        log.debug(`${this._pcId} createOffer`);\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateOffer(this._pcId, RTCUtil.normalizeOfferOptions(options));\n\n        log.debug(`${this._pcId} createOffer OK`);\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    async createAnswer() {\n        log.debug(`${this._pcId} createAnswer`);\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateAnswer(this._pcId, {});\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    setConfiguration(configuration): void {\n        WebRTCModule.peerConnectionSetConfiguration(configuration, this._pcId);\n    }\n\n    async setLocalDescription(sessionDescription?: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setLocalDescription`);\n\n        let desc;\n\n        if (sessionDescription) {\n            desc = {\n                type: sessionDescription.type,\n                sdp: sessionDescription.sdp ?? ''\n            };\n\n            if (!RTCUtil.isSdpTypeValid(desc.type)) {\n                throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n            }\n        } else {\n            desc = null;\n        }\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetLocalDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.localDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.localDescription = null;\n        }\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc?.type === 'answer');\n\n        log.debug(`${this._pcId} setLocalDescription OK`);\n    }\n\n    async setRemoteDescription(sessionDescription: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setRemoteDescription`);\n\n        if (!sessionDescription) {\n            return Promise.reject(new Error('No session description provided'));\n        }\n\n        const desc = {\n            type: sessionDescription.type,\n            sdp: sessionDescription.sdp ?? ''\n        };\n\n        if (!RTCUtil.isSdpTypeValid(desc.type ?? '')) {\n            throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n        }\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetRemoteDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.remoteDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.remoteDescription = null;\n        }\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc.type === 'answer');\n\n        // Fire track events. They must fire before sRD resolves.\n        const pendingTrackEvents = this._pendingTrackEvents;\n\n        this._pendingTrackEvents = [];\n\n        for (const ev of pendingTrackEvents) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.receiver.id ===  ev.receiver.id);\n\n            // We need to fire this event for an existing track sometimes, like\n            // when the transceiver direction (on the sending side) switches from\n            // sendrecv to recvonly and then back.\n\n            // @ts-ignore\n            const track: MediaStreamTrack = transceiver.receiver.track;\n\n            transceiver._mid = ev.transceiver.mid;\n            transceiver._currentDirection = ev.transceiver.currentDirection;\n            transceiver._direction = ev.transceiver.direction;\n\n            // Get the stream object from the event. Create if necessary.\n            const streams: MediaStream[] = ev.streams.map(streamInfo => {\n                // Here we are making sure that we don't create stream objects that already exist\n                // So that event listeners do get the same object if it has been created before.\n                if (!this._remoteStreams.has(streamInfo.streamId)) {\n                    const stream = new MediaStream({\n                        streamId: streamInfo.streamId,\n                        streamReactTag: streamInfo.streamReactTag,\n                        tracks: []\n                    });\n\n                    this._remoteStreams.set(streamInfo.streamId, stream);\n                }\n\n                const stream = this._remoteStreams.get(streamInfo.streamId);\n\n                if (!stream?._tracks.includes(track)) {\n                    stream?._tracks.push(track);\n                }\n\n                return stream;\n            });\n\n            const eventData = {\n                streams,\n                transceiver,\n                track,\n                receiver: transceiver.receiver\n            };\n\n\n            this.dispatchEvent(new RTCTrackEvent('track', eventData));\n\n            streams.forEach(stream => {\n                stream.dispatchEvent(new MediaStreamTrackEvent('addtrack', { track }));\n            });\n\n            // Dispatch an unmute event for the track.\n            track._setMutedInternal(false);\n        }\n\n        log.debug(`${this._pcId} setRemoteDescription OK`);\n    }\n\n    async addIceCandidate(candidate): Promise<void> {\n        log.debug(`${this._pcId} addIceCandidate`);\n\n        if (!candidate || !candidate.candidate) {\n            // XXX end-of candidates is not implemented: https://bugs.chromium.org/p/webrtc/issues/detail?id=9218\n            return;\n        }\n\n        if ((candidate.sdpMLineIndex === null ||\n             candidate.sdpMLineIndex === undefined) &&\n            (candidate.sdpMid === null ||\n             candidate.sdpMid === undefined)\n        ) {\n            throw new TypeError('`sdpMLineIndex` and `sdpMid` must not be both null or undefined');\n        }\n\n        const newSdp = await WebRTCModule.peerConnectionAddICECandidate(\n            this._pcId,\n            RTCUtil.deepClone(candidate)\n        );\n\n        this.remoteDescription = new RTCSessionDescription(newSdp);\n    }\n\n    /**\n     * @brief Adds a new track to the {@link RTCPeerConnection},\n     * and indicates that it is contained in the specified {@link MediaStream}s.\n     * This method has to be synchronous as the W3C API expects a track to be returned\n     * @param {MediaStreamTrack} track The track to be added\n     * @param {...MediaStream} streams One or more {@link MediaStream}s the track needs to be added to\n     * https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack\n     */\n    addTrack(track: MediaStreamTrack, ...streams: MediaStream[]): RTCRtpSender {\n        log.debug(`${this._pcId} addTrack`);\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        if (this._trackExists(track)) {\n            throw new Error('Track already exists in a sender');\n        }\n\n        const streamIds = streams.map(s => s.id);\n        const result = WebRTCModule.peerConnectionAddTrack(this._pcId, track.id, { streamIds });\n\n        if (result === null) {\n            throw new Error('Could not add sender');\n        }\n\n        const { transceiverOrder, transceiver, sender } = result;\n\n        // According to the W3C docs, the sender could have been reused, and\n        // so we check if that is the case, and update accordingly.\n        const [ existingSender ] = this\n            .getSenders()\n            .filter(s => s.id === sender.id);\n\n        if (existingSender) {\n            // Update sender\n            existingSender._track = track;\n\n            // Update the corresponding transceiver as well\n            const [ existingTransceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === existingSender.id);\n\n            existingTransceiver._direction = transceiver.direction;\n            existingTransceiver._currentDirection = transceiver.currentDirection;\n\n            return existingSender;\n        }\n\n        // This is a new transceiver, should create a transceiver for it and add it\n        const newSender = new RTCRtpSender({ ...transceiver.sender, track });\n        const remoteTrack = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n        const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n        const newTransceiver = new RTCRtpTransceiver({\n            ...transceiver,\n            sender: newSender,\n            receiver: newReceiver,\n        });\n\n        this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n\n        return newSender;\n    }\n\n    addTransceiver(source: 'audio' | 'video' | MediaStreamTrack, init): RTCRtpTransceiver {\n        log.debug(`${this._pcId} addTransceiver`);\n\n        let src = {};\n\n        if (source === 'audio') {\n            src = { type: 'audio' };\n        } else if (source === 'video') {\n            src = { type: 'video' };\n        } else {\n            src = { trackId: source.id };\n        }\n\n        // Extract the stream ids\n        if (init && init.streams) {\n            init.streamIds = init.streams.map(stream => stream.id);\n        }\n\n        const result = WebRTCModule.peerConnectionAddTransceiver(this._pcId, { ...src, init: { ...init } });\n\n        if (result === null) {\n            throw new Error('Transceiver could not be added');\n        }\n\n        const t = result.transceiver;\n        let track: MediaStreamTrack | null = null;\n\n        if (typeof source === 'string') {\n            if (t.sender.track) {\n                track = new MediaStreamTrack(t.sender.track);\n            }\n        } else {\n            // 'source' is a MediaStreamTrack\n            track = source;\n        }\n\n        const sender = new RTCRtpSender({ ...t.sender, track });\n        const remoteTrack = t.receiver.track ? new MediaStreamTrack(t.receiver.track) : null;\n        const receiver = new RTCRtpReceiver({ ...t.receiver, track: remoteTrack });\n        const transceiver = new RTCRtpTransceiver({\n            ...result.transceiver,\n            sender,\n            receiver\n        });\n\n        this._insertTransceiverSorted(result.transceiverOrder, transceiver);\n\n        return transceiver;\n    }\n\n    removeTrack(sender: RTCRtpSender) {\n        log.debug(`${this._pcId} removeTrack`);\n\n        if (this._pcId !== sender._peerConnectionId) {\n            throw new Error('Sender does not belong to this peer connection');\n        }\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        const existingSender = this\n            .getSenders()\n            .find(s => s === sender);\n\n        if (!existingSender) {\n            throw new Error('Sender does not exist');\n        }\n\n        if (existingSender.track === null) {\n            return;\n        }\n\n        // Blocking!\n        WebRTCModule.peerConnectionRemoveTrack(this._pcId, sender.id);\n\n        existingSender._track = null;\n\n        const [ existingTransceiver ] = this\n            .getTransceivers()\n            .filter(t => t.sender.id === existingSender.id);\n\n        existingTransceiver._direction = existingTransceiver.direction === 'sendrecv' ? 'recvonly' : 'inactive';\n    }\n\n    async getStats(selector?: MediaStreamTrack) {\n        log.debug(`${this._pcId} getStats`);\n\n        if (!selector) {\n            const data = await WebRTCModule.peerConnectionGetStats(this._pcId);\n\n            /**\n             * On both Android and iOS it is faster to construct a single\n             * JSON string representing the Map of StatsReports and have it\n             * pass through the React Native bridge rather than the Map of\n             * StatsReports. While the implementations do try to be faster in\n             * general, the stress is on being faster to pass through the React\n             * Native bridge which is a bottleneck that tends to be visible in\n             * the UI when there is congestion involving UI-related passing.\n             */\n            return new Map(JSON.parse(data));\n        } else {\n            const senders = this.getSenders().filter(s => s.track === selector);\n            const receivers = this.getReceivers().filter(r => r.track === selector);\n            const matches = senders.length + receivers.length;\n\n            if (matches === 0) {\n                throw new Error('Invalid selector: could not find matching sender / receiver');\n            } else if (matches > 1) {\n                throw new Error('Invalid selector: multiple matching senders / receivers');\n            } else {\n                const sr = senders[0] || receivers[0];\n\n                return sr.getStats();\n            }\n        }\n    }\n\n    getTransceivers(): RTCRtpTransceiver[] {\n        return this._transceivers.map(e => e.transceiver);\n    }\n\n    getSenders(): RTCRtpSender[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.sender);\n    }\n\n    getReceivers(): RTCRtpReceiver[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.receiver);\n    }\n\n    close(): void {\n        log.debug(`${this._pcId} close`);\n\n        if (this.connectionState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.peerConnectionClose(this._pcId);\n\n        // Mark transceivers as stopped.\n        this._transceivers.forEach(({ transceiver })=> {\n            transceiver._setStopped();\n        });\n    }\n\n    restartIce(): void {\n        WebRTCModule.peerConnectionRestartIce(this._pcId);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'peerConnectionOnRenegotiationNeeded', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.dispatchEvent(new Event('negotiationneeded'));\n        });\n\n        addListener(this, 'peerConnectionIceConnectionChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceConnectionState = ev.iceConnectionState;\n\n            this.dispatchEvent(new Event('iceconnectionstatechange'));\n        });\n\n        addListener(this, 'peerConnectionStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.connectionState = ev.connectionState;\n\n            this.dispatchEvent(new Event('connectionstatechange'));\n\n            if (ev.connectionState === 'closed') {\n                // This PeerConnection is done, clean up.\n                removeListener(this);\n\n                WebRTCModule.peerConnectionDispose(this._pcId);\n            }\n        });\n\n        addListener(this, 'peerConnectionSignalingStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.signalingState = ev.signalingState;\n\n            this.dispatchEvent(new Event('signalingstatechange'));\n        });\n\n        // Consider moving away from this event: https://github.com/WebKit/WebKit/pull/3953\n        addListener(this, 'peerConnectionOnTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} ontrack`);\n\n            // NOTE: We need to make sure the track event fires right before sRD completes,\n            // so we queue them up here and dispatch the events when sRD fires, but before completing it.\n            // In the future we should probably implement out own logic and drop this event altogether.\n            this._pendingTrackEvents.push(ev);\n        });\n\n        addListener(this, 'peerConnectionOnRemoveTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} onremovetrack ${ev.receiverId}`);\n\n            const receiver = this.getReceivers().find(r => r.id === ev.receiverId);\n            const track = receiver?.track;\n\n            if (receiver && track) {\n                // As per the spec:\n                // - Remove the track from any media streams that were previously passed to the `track` event.\n                // https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-removetrack,\n                // - Mark the track as muted:\n                // https://w3c.github.io/webrtc-pc/#process-remote-track-removal\n                for (const stream of this._remoteStreams.values()) {\n                    if (stream._tracks.includes(track)) {\n                        const trackIdx = stream._tracks.indexOf(track);\n\n                        log.debug(`${this._pcId} removetrack ${track.id}`);\n\n                        stream._tracks.splice(trackIdx, 1);\n\n                        stream.dispatchEvent(new MediaStreamTrackEvent('removetrack', { track }));\n\n                        // Dispatch a mute event for the track.\n                        track._setMutedInternal(true);\n                    }\n                }\n            }\n        });\n\n        addListener(this, 'peerConnectionGotICECandidate', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const sdpInfo = ev.sdp;\n\n            // Can happen when doing a rollback.\n            if (sdpInfo.type && sdpInfo.sdp) {\n                this.localDescription = new RTCSessionDescription(sdpInfo);\n            } else {\n                this.localDescription = null;\n            }\n\n            const candidate = new RTCIceCandidate(ev.candidate);\n\n            this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate }));\n        });\n\n        addListener(this, 'peerConnectionIceGatheringChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceGatheringState = ev.iceGatheringState;\n\n            if (this.iceGatheringState === 'complete') {\n                const sdpInfo = ev.sdp;\n\n                // Can happen when doing a rollback.\n                if (sdpInfo.type && sdpInfo.sdp) {\n                    this.localDescription = new RTCSessionDescription(sdpInfo);\n                } else {\n                    this.localDescription = null;\n                }\n\n                this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate: null }));\n            }\n\n            this.dispatchEvent(new Event('icegatheringstatechange'));\n        });\n\n        addListener(this, 'peerConnectionDidOpenDataChannel', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const channel = new RTCDataChannel(ev.dataChannel);\n\n            this.dispatchEvent(new RTCDataChannelEvent('datachannel', { channel }));\n\n            // Send 'open' event. Native doesn't update the state since it's already\n            // set at this point.\n            channel.dispatchEvent(new RTCDataChannelEvent('open', { channel }));\n        });\n\n        addListener(this, 'mediaStreamTrackMuteChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const [\n                track\n            ] = this.getReceivers().map(r => r.track).filter(t => t?.id === ev.trackId);\n\n            if (track) {\n                track._setMutedInternal(ev.muted);\n            }\n        });\n    }\n\n    /**\n     * Creates a new RTCDataChannel object with the given label. The\n     * RTCDataChannelInit dictionary can be used to configure properties of the\n     * underlying channel such as data reliability.\n     *\n     * @param {string} label - the value with which the label attribute of the new\n     * instance is to be initialized\n     * @param {RTCDataChannelInit} dataChannelDict - an optional dictionary of\n     * values with which to initialize corresponding attributes of the new\n     * instance such as id\n     */\n    createDataChannel(label: string, dataChannelDict?: RTCDataChannelInit): RTCDataChannel {\n        if (arguments.length === 0) {\n            throw new TypeError('1 argument required, but 0 present');\n        }\n\n        if (dataChannelDict && 'id' in dataChannelDict) {\n            const id = dataChannelDict.id;\n\n            if (typeof id !== 'number') {\n                throw new TypeError('DataChannel id must be a number: ' + id);\n            }\n        }\n\n        const channelInfo = WebRTCModule.createDataChannel(this._pcId, String(label), dataChannelDict);\n\n        if (channelInfo === null) {\n            throw new TypeError('Failed to create new DataChannel');\n        }\n\n        return new RTCDataChannel(channelInfo);\n    }\n\n    /**\n     * Check whether a media stream track exists already in a sender.\n     * See https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack for more information\n     */\n    _trackExists(track: MediaStreamTrack): boolean {\n        const [ sender ] = this\n            .getSenders()\n            .filter(\n                sender => sender.track?.id === track.id\n            );\n\n        return sender? true : false;\n    }\n\n    /**\n     * Updates transceivers after offer/answer updates if necessary.\n     */\n    _updateTransceivers(transceiverUpdates, removeStopped = false) {\n        for (const update of transceiverUpdates) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === update.transceiverId);\n\n            if (!transceiver) {\n                continue;\n            }\n\n            if (update.currentDirection) {\n                transceiver._currentDirection = update.currentDirection;\n            }\n\n            transceiver._mid = update.mid;\n            transceiver._stopped = Boolean(update.isStopped);\n            transceiver._sender._rtpParameters = new RTCRtpSendParameters(update.senderRtpParameters);\n            transceiver._receiver._rtpParameters = new RTCRtpReceiveParameters(update.receiverRtpParameters);\n        }\n\n        if (removeStopped) {\n            const stopped = this.getTransceivers().filter(t => t.stopped);\n            const newTransceivers = this._transceivers.filter(t => !stopped.includes(t.transceiver));\n\n            this._transceivers = newTransceivers;\n        }\n    }\n\n    /**\n     * Inserts transceiver into the transceiver array in the order they are created (timestamp).\n     * @param order an index that refers to when it it was created relatively.\n     * @param transceiver the transceiver object to be inserted.\n     */\n    _insertTransceiverSorted(order: number, transceiver: RTCRtpTransceiver) {\n        this._transceivers.push({ order, transceiver });\n        this._transceivers.sort((a, b) => a.order - b.order);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCPeerConnection.prototype;\n\ndefineEventAttribute(proto, 'connectionstatechange');\ndefineEventAttribute(proto, 'icecandidate');\ndefineEventAttribute(proto, 'icecandidateerror');\ndefineEventAttribute(proto, 'iceconnectionstatechange');\ndefineEventAttribute(proto, 'icegatheringstatechange');\ndefineEventAttribute(proto, 'negotiationneeded');\ndefineEventAttribute(proto, 'signalingstatechange');\ndefineEventAttribute(proto, 'datachannel');\ndefineEventAttribute(proto, 'track');\ndefineEventAttribute(proto, 'error');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js
index 7c4b49e..228d917 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js
@@ -4,7 +4,7 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.default = void 0;
-var _index = require("event-target-shim/index");
+var _index = require("event-target-shim");
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 /**
  * @eventClass
diff --git a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js.map
index 8e00452..4620440 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/commonjs/RTCTrackEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCTrackEvent","Event","constructor","type","eventInitDict","streams","transceiver","receiver","track","exports","default"],"sources":["RTCTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport MediaStream from './MediaStream';\nimport type MediaStreamTrack from './MediaStreamTrack';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\n\ntype TRACK_EVENTS = 'track'\n\ninterface IRTCTrackEventInitDict extends Event.EventInit {\n    streams: MediaStream[]\n    transceiver: RTCRtpTransceiver\n}\n\n/**\n * @eventClass\n * This event is fired whenever the Track is changed in PeerConnection.\n * @param {TRACK_EVENTS} type - The type of event.\n * @param {IRTCTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/track_event MDN} for details.\n */\nexport default class RTCTrackEvent<TEventType extends TRACK_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    readonly streams: MediaStream[] = [];\n\n    /** @eventProperty */\n    readonly transceiver: RTCRtpTransceiver;\n\n    /** @eventProperty */\n    readonly receiver: RTCRtpReceiver | null;\n\n    /** @eventProperty */\n    readonly track: MediaStreamTrack | null;\n\n    constructor(type: TEventType, eventInitDict: IRTCTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.streams = eventInitDict.streams;\n        this.transceiver = eventInitDict.transceiver;\n        this.receiver = eventInitDict.transceiver.receiver;\n        this.track = eventInitDict.transceiver.receiver ? eventInitDict.transceiver.receiver.track : null;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAchD;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,aAAa,SAA0CC,YAAK,CAAa;EAC1F;;EAGA;;EAGA;;EAGA;;EAGAC,WAAWA,CAACC,IAAgB,EAAEC,aAAqC,EAAE;IACjE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA,kBAZG,EAAE;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAahC,IAAI,CAACc,OAAO,GAAGD,aAAa,CAACC,OAAO;IACpC,IAAI,CAACC,WAAW,GAAGF,aAAa,CAACE,WAAW;IAC5C,IAAI,CAACC,QAAQ,GAAGH,aAAa,CAACE,WAAW,CAACC,QAAQ;IAClD,IAAI,CAACC,KAAK,GAAGJ,aAAa,CAACE,WAAW,CAACC,QAAQ,GAAGH,aAAa,CAACE,WAAW,CAACC,QAAQ,CAACC,KAAK,GAAG,IAAI;EACrG;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAV,aAAA"}
\ No newline at end of file
+{"version":3,"names":["_index","require","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","RTCTrackEvent","Event","constructor","type","eventInitDict","streams","transceiver","receiver","track","exports","default"],"sources":["RTCTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport MediaStream from './MediaStream';\nimport type MediaStreamTrack from './MediaStreamTrack';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\n\ntype TRACK_EVENTS = 'track'\n\ninterface IRTCTrackEventInitDict extends Event.EventInit {\n    streams: MediaStream[]\n    transceiver: RTCRtpTransceiver\n}\n\n/**\n * @eventClass\n * This event is fired whenever the Track is changed in PeerConnection.\n * @param {TRACK_EVENTS} type - The type of event.\n * @param {IRTCTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/track_event MDN} for details.\n */\nexport default class RTCTrackEvent<TEventType extends TRACK_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    readonly streams: MediaStream[] = [];\n\n    /** @eventProperty */\n    readonly transceiver: RTCRtpTransceiver;\n\n    /** @eventProperty */\n    readonly receiver: RTCRtpReceiver | null;\n\n    /** @eventProperty */\n    readonly track: MediaStreamTrack | null;\n\n    constructor(type: TEventType, eventInitDict: IRTCTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.streams = eventInitDict.streams;\n        this.transceiver = eventInitDict.transceiver;\n        this.receiver = eventInitDict.transceiver.receiver;\n        this.track = eventInitDict.transceiver.receiver ? eventInitDict.transceiver.receiver.track : null;\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAAgD,SAAAC,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,QAAAD,GAAA,IAAAD,GAAA,IAAAG,MAAA,CAAAC,cAAA,CAAAJ,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAG,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAchD;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMQ,aAAa,SAA0CC,YAAK,CAAa;EAC1F;;EAGA;;EAGA;;EAGA;;EAGAC,WAAWA,CAACC,IAAgB,EAAEC,aAAqC,EAAE;IACjE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACb,eAAA,kBAZG,EAAE;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAahC,IAAI,CAACc,OAAO,GAAGD,aAAa,CAACC,OAAO;IACpC,IAAI,CAACC,WAAW,GAAGF,aAAa,CAACE,WAAW;IAC5C,IAAI,CAACC,QAAQ,GAAGH,aAAa,CAACE,WAAW,CAACC,QAAQ;IAClD,IAAI,CAACC,KAAK,GAAGJ,aAAa,CAACE,WAAW,CAACC,QAAQ,GAAGH,aAAa,CAACE,WAAW,CAACC,QAAQ,CAACC,KAAK,GAAG,IAAI;EACrG;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAV,aAAA"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js b/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js
index 0f2202b..360f465 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js
@@ -1,4 +1,4 @@
-import { EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 import getDisplayMedia from './getDisplayMedia';
 import getUserMedia from './getUserMedia';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js.map
index 0cb4af1..501c549 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaDevices.js.map
@@ -1 +1 @@
-{"version":3,"names":["EventTarget","defineEventAttribute","NativeModules","getDisplayMedia","getUserMedia","WebRTCModule","MediaDevices","enumerateDevices","Promise","resolve","constraints","proto","prototype"],"sources":["MediaDevices.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport getDisplayMedia from './getDisplayMedia';\nimport getUserMedia, { Constraints } from './getUserMedia';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaDevicesEventMap = {\n    devicechange: Event<'devicechange'>\n}\n\nclass MediaDevices extends EventTarget<MediaDevicesEventMap> {\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code enumerateDevices}\n     * implementation.\n     */\n    enumerateDevices() {\n        return new Promise(resolve => WebRTCModule.enumerateDevices(resolve));\n    }\n\n    /**\n     * W3C \"Screen Capture\" compatible {@code getDisplayMedia} implementation.\n     * See: https://w3c.github.io/mediacapture-screen-share/\n     *\n     * @returns {Promise}\n     */\n    getDisplayMedia() {\n        return getDisplayMedia();\n    }\n\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code getUserMedia}\n     * implementation.\n     * See: https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices\n     *\n     * @param {*} constraints\n     * @returns {Promise}\n     */\n    getUserMedia(constraints: Constraints) {\n        return getUserMedia(constraints);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaDevices.prototype;\n\ndefineEventAttribute(proto, 'devicechange');\n\n\nexport default new MediaDevices();\n"],"mappings":"AAAA,SAASA,WAAW,EAASC,oBAAoB,QAAQ,yBAAyB;AAClF,SAASC,aAAa,QAAQ,cAAc;AAE5C,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,OAAOC,YAAY,MAAuB,gBAAgB;AAE1D,MAAM;EAAEC;AAAa,CAAC,GAAGH,aAAa;AAMtC,MAAMI,YAAY,SAASN,WAAW,CAAuB;EACzD;AACJ;AACA;AACA;EACIO,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAIJ,YAAY,CAACE,gBAAgB,CAACE,OAAO,CAAC,CAAC;EACzE;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIN,eAAeA,CAAA,EAAG;IACd,OAAOA,eAAe,CAAC,CAAC;EAC5B;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAACM,WAAwB,EAAE;IACnC,OAAON,YAAY,CAACM,WAAW,CAAC;EACpC;AACJ;;AAEA;AACA;AACA;AACA,MAAMC,KAAK,GAAGL,YAAY,CAACM,SAAS;AAEpCX,oBAAoB,CAACU,KAAK,EAAE,cAAc,CAAC;AAG3C,eAAe,IAAIL,YAAY,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"names":["EventTarget","defineEventAttribute","NativeModules","getDisplayMedia","getUserMedia","WebRTCModule","MediaDevices","enumerateDevices","Promise","resolve","constraints","proto","prototype"],"sources":["MediaDevices.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport getDisplayMedia from './getDisplayMedia';\nimport getUserMedia, { Constraints } from './getUserMedia';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaDevicesEventMap = {\n    devicechange: Event<'devicechange'>\n}\n\nclass MediaDevices extends EventTarget<MediaDevicesEventMap> {\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code enumerateDevices}\n     * implementation.\n     */\n    enumerateDevices() {\n        return new Promise(resolve => WebRTCModule.enumerateDevices(resolve));\n    }\n\n    /**\n     * W3C \"Screen Capture\" compatible {@code getDisplayMedia} implementation.\n     * See: https://w3c.github.io/mediacapture-screen-share/\n     *\n     * @returns {Promise}\n     */\n    getDisplayMedia() {\n        return getDisplayMedia();\n    }\n\n    /**\n     * W3C \"Media Capture and Streams\" compatible {@code getUserMedia}\n     * implementation.\n     * See: https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices\n     *\n     * @param {*} constraints\n     * @returns {Promise}\n     */\n    getUserMedia(constraints: Constraints) {\n        return getUserMedia(constraints);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaDevices.prototype;\n\ndefineEventAttribute(proto, 'devicechange');\n\n\nexport default new MediaDevices();\n"],"mappings":"AAAA,SAASA,WAAW,EAASC,oBAAoB,QAAQ,yBAAyB;AAClF,SAASC,aAAa,QAAQ,cAAc;AAE5C,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,OAAOC,YAAY,MAAuB,gBAAgB;AAE1D,MAAM;EAAEC;AAAa,CAAC,GAAGH,aAAa;AAMtC,MAAMI,YAAY,SAASN,WAAW,CAAuB;EACzD;AACJ;AACA;AACA;EACIO,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAIJ,YAAY,CAACE,gBAAgB,CAACE,OAAO,CAAC,CAAC;EACzE;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIN,eAAeA,CAAA,EAAG;IACd,OAAOA,eAAe,CAAC,CAAC;EAC5B;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAACM,WAAwB,EAAE;IACnC,OAAON,YAAY,CAACM,WAAW,CAAC;EACpC;AACJ;;AAEA;AACA;AACA;AACA,MAAMC,KAAK,GAAGL,YAAY,CAACM,SAAS;AAEpCX,oBAAoB,CAACU,KAAK,EAAE,cAAc,CAAC;AAG3C,eAAe,IAAIL,YAAY,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js
index ef850dd..ed59578 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 import MediaStreamTrack from './MediaStreamTrack';
 import { uniqueID } from './RTCUtil';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js.map
index c9296ca..2f61520 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStream.js.map
@@ -1 +1 @@
-{"version":3,"names":["EventTarget","defineEventAttribute","NativeModules","MediaStreamTrack","uniqueID","WebRTCModule","MediaStream","constructor","arg","_defineProperty","_id","_reactTag","mediaStreamCreate","id","track","getTracks","addTrack","Array","isArray","streamId","streamReactTag","tracks","trackInfo","_tracks","push","TypeError","active","index","indexOf","mediaStreamAddTrack","remote","_peerConnectionId","removeTrack","splice","mediaStreamRemoveTrack","slice","getTrackById","trackId","find","getAudioTracks","filter","kind","getVideoTracks","clone","Error","toURL","release","releaseTracks","arguments","length","undefined","mediaStreamRelease","proto","prototype"],"sources":["MediaStream.ts"],"sourcesContent":["import { EventTarget, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport MediaStreamTrack, { MediaStreamTrackInfo } from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport { uniqueID } from './RTCUtil';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaStreamEventMap = {\n    addtrack: MediaStreamTrackEvent<'addtrack'>\n    removetrack: MediaStreamTrackEvent<'removetrack'>\n}\n\nexport default class MediaStream extends EventTarget<MediaStreamEventMap> {\n    _tracks: MediaStreamTrack[] = [];\n    _id: string;\n\n    /**\n     * The identifier of this MediaStream unique within the associated\n     * WebRTCModule instance. As the id of a remote MediaStream instance is unique\n     * only within the associated RTCPeerConnection, it is not sufficiently unique\n     * to identify this MediaStream across multiple RTCPeerConnections and to\n     * unambiguously differentiate it from a local MediaStream instance not added\n     * to an RTCPeerConnection.\n     */\n    _reactTag: string;\n\n    /**\n     * A MediaStream can be constructed in several ways, depending on the parameters\n     * that are passed here.\n     *\n     * - undefined: just a new stream, with no tracks.\n     * - MediaStream instance: a new stream, with a copy of the tracks of the passed stream.\n     * - Array of MediaStreamTrack: a new stream with a copy of the tracks in the array.\n     * - object: a new stream instance, represented by the passed info object, this is always\n     *   done internally, when the stream is first created in native and the JS wrapper is\n     *   built afterwards.\n     */\n    constructor(arg?:\n        MediaStream |\n        MediaStreamTrack[] |\n        { streamId: string, streamReactTag: string, tracks: MediaStreamTrackInfo[] }\n    ) {\n        super();\n\n        // Assign a UUID to start with. It will get overridden for remote streams.\n        this._id = uniqueID();\n\n        // Local MediaStreams are created by WebRTCModule to have their id and\n        // reactTag equal because WebRTCModule follows the respective standard's\n        // recommendation for id generation i.e. uses UUID which is unique enough\n        // for the purposes of reactTag.\n        this._reactTag = this._id;\n\n        if (typeof arg === 'undefined') {\n            WebRTCModule.mediaStreamCreate(this.id);\n        } else if (arg instanceof MediaStream) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg.getTracks()) {\n                this.addTrack(track);\n            }\n        } else if (Array.isArray(arg)) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg) {\n                this.addTrack(track);\n            }\n        } else if (typeof arg === 'object' && arg.streamId && arg.streamReactTag && arg.tracks) {\n            this._id = arg.streamId;\n            this._reactTag = arg.streamReactTag;\n\n            for (const trackInfo of arg.tracks) {\n                // We are not using addTrack here because the track is already part of the\n                // stream, so there is no need to add it on the native side.\n                this._tracks.push(new MediaStreamTrack(trackInfo));\n            }\n        } else {\n            throw new TypeError(`invalid type: ${typeof arg}`);\n        }\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get active(): boolean {\n        // TODO: can we reliably report this value?\n\n        return true;\n    }\n\n    addTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index !== -1) {\n            return;\n        }\n\n        this._tracks.push(track);\n        WebRTCModule.mediaStreamAddTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    removeTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index === -1) {\n            return;\n        }\n\n        this._tracks.splice(index, 1);\n        WebRTCModule.mediaStreamRemoveTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    getTracks(): MediaStreamTrack[] {\n        return this._tracks.slice();\n    }\n\n    getTrackById(trackId): MediaStreamTrack | undefined {\n        return this._tracks.find(track => track.id === trackId);\n    }\n\n    getAudioTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'audio');\n    }\n\n    getVideoTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'video');\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    toURL(): string {\n        return this._reactTag;\n    }\n\n    release(releaseTracks = true): void {\n        const tracks = [ ...this._tracks ];\n\n        for (const track of tracks) {\n            this.removeTrack(track);\n\n            if (releaseTracks) {\n                track.release();\n            }\n        }\n\n        WebRTCModule.mediaStreamRelease(this._reactTag);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStream.prototype;\n\ndefineEventAttribute(proto, 'addtrack');\ndefineEventAttribute(proto, 'removetrack');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["EventTarget","defineEventAttribute","NativeModules","MediaStreamTrack","uniqueID","WebRTCModule","MediaStream","constructor","arg","_defineProperty","_id","_reactTag","mediaStreamCreate","id","track","getTracks","addTrack","Array","isArray","streamId","streamReactTag","tracks","trackInfo","_tracks","push","TypeError","active","index","indexOf","mediaStreamAddTrack","remote","_peerConnectionId","removeTrack","splice","mediaStreamRemoveTrack","slice","getTrackById","trackId","find","getAudioTracks","filter","kind","getVideoTracks","clone","Error","toURL","release","releaseTracks","arguments","length","undefined","mediaStreamRelease","proto","prototype"],"sources":["MediaStream.ts"],"sourcesContent":["import { EventTarget, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport MediaStreamTrack, { MediaStreamTrackInfo } from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport { uniqueID } from './RTCUtil';\n\nconst { WebRTCModule } = NativeModules;\n\ntype MediaStreamEventMap = {\n    addtrack: MediaStreamTrackEvent<'addtrack'>\n    removetrack: MediaStreamTrackEvent<'removetrack'>\n}\n\nexport default class MediaStream extends EventTarget<MediaStreamEventMap> {\n    _tracks: MediaStreamTrack[] = [];\n    _id: string;\n\n    /**\n     * The identifier of this MediaStream unique within the associated\n     * WebRTCModule instance. As the id of a remote MediaStream instance is unique\n     * only within the associated RTCPeerConnection, it is not sufficiently unique\n     * to identify this MediaStream across multiple RTCPeerConnections and to\n     * unambiguously differentiate it from a local MediaStream instance not added\n     * to an RTCPeerConnection.\n     */\n    _reactTag: string;\n\n    /**\n     * A MediaStream can be constructed in several ways, depending on the parameters\n     * that are passed here.\n     *\n     * - undefined: just a new stream, with no tracks.\n     * - MediaStream instance: a new stream, with a copy of the tracks of the passed stream.\n     * - Array of MediaStreamTrack: a new stream with a copy of the tracks in the array.\n     * - object: a new stream instance, represented by the passed info object, this is always\n     *   done internally, when the stream is first created in native and the JS wrapper is\n     *   built afterwards.\n     */\n    constructor(arg?:\n        MediaStream |\n        MediaStreamTrack[] |\n        { streamId: string, streamReactTag: string, tracks: MediaStreamTrackInfo[] }\n    ) {\n        super();\n\n        // Assign a UUID to start with. It will get overridden for remote streams.\n        this._id = uniqueID();\n\n        // Local MediaStreams are created by WebRTCModule to have their id and\n        // reactTag equal because WebRTCModule follows the respective standard's\n        // recommendation for id generation i.e. uses UUID which is unique enough\n        // for the purposes of reactTag.\n        this._reactTag = this._id;\n\n        if (typeof arg === 'undefined') {\n            WebRTCModule.mediaStreamCreate(this.id);\n        } else if (arg instanceof MediaStream) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg.getTracks()) {\n                this.addTrack(track);\n            }\n        } else if (Array.isArray(arg)) {\n            WebRTCModule.mediaStreamCreate(this.id);\n\n            for (const track of arg) {\n                this.addTrack(track);\n            }\n        } else if (typeof arg === 'object' && arg.streamId && arg.streamReactTag && arg.tracks) {\n            this._id = arg.streamId;\n            this._reactTag = arg.streamReactTag;\n\n            for (const trackInfo of arg.tracks) {\n                // We are not using addTrack here because the track is already part of the\n                // stream, so there is no need to add it on the native side.\n                this._tracks.push(new MediaStreamTrack(trackInfo));\n            }\n        } else {\n            throw new TypeError(`invalid type: ${typeof arg}`);\n        }\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get active(): boolean {\n        // TODO: can we reliably report this value?\n\n        return true;\n    }\n\n    addTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index !== -1) {\n            return;\n        }\n\n        this._tracks.push(track);\n        WebRTCModule.mediaStreamAddTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    removeTrack(track: MediaStreamTrack): void {\n        const index = this._tracks.indexOf(track);\n\n        if (index === -1) {\n            return;\n        }\n\n        this._tracks.splice(index, 1);\n        WebRTCModule.mediaStreamRemoveTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n\n    getTracks(): MediaStreamTrack[] {\n        return this._tracks.slice();\n    }\n\n    getTrackById(trackId): MediaStreamTrack | undefined {\n        return this._tracks.find(track => track.id === trackId);\n    }\n\n    getAudioTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'audio');\n    }\n\n    getVideoTracks(): MediaStreamTrack[] {\n        return this._tracks.filter(track => track.kind === 'video');\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    toURL(): string {\n        return this._reactTag;\n    }\n\n    release(releaseTracks = true): void {\n        const tracks = [ ...this._tracks ];\n\n        for (const track of tracks) {\n            this.removeTrack(track);\n\n            if (releaseTracks) {\n                track.release();\n            }\n        }\n\n        WebRTCModule.mediaStreamRelease(this._reactTag);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStream.prototype;\n\ndefineEventAttribute(proto, 'addtrack');\ndefineEventAttribute(proto, 'removetrack');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js
index ba2b715..d48e031 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 import { addListener, removeListener } from './EventEmitter';
 import Logger from './Logger';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js.map
index c8aebd8..fc30761 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrack.js.map
@@ -1 +1 @@
-{"version":3,"names":["EventTarget","Event","defineEventAttribute","NativeModules","addListener","removeListener","Logger","deepClone","normalizeConstraints","log","WebRTCModule","MediaStreamTrack","constructor","info","_defineProperty","_constraints","constraints","_enabled","enabled","_settings","settings","_muted","_peerConnectionId","peerConnectionId","_readyState","readyState","id","kind","remote","_registerEvents","Boolean","mediaStreamTrackSetEnabled","muted","stop","_switchCamera","Error","deviceId","facingMode","applyConstraints","_setVideoEffects","names","mediaStreamTrackSetVideoEffects","_setVideoEffect","name","_setMutedInternal","dispatchEvent","_setVolume","volume","mediaStreamTrackSetVolume","normalized","video","mediaStreamTrackApplyConstraints","clone","getCapabilities","getConstraints","getSettings","ev","trackId","debug","release","mediaStreamTrackRelease","proto","prototype"],"sources":["MediaStreamTrack.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { MediaTrackConstraints } from './Constraints';\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport { deepClone, normalizeConstraints } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\n\ntype MediaStreamTrackState = 'live' | 'ended';\n\nexport type MediaStreamTrackInfo = {\n    id: string;\n    kind: string;\n    remote: boolean;\n    constraints: object;\n    enabled: boolean;\n    settings: object;\n    peerConnectionId: number;\n    readyState: MediaStreamTrackState;\n}\n\nexport type MediaTrackSettings = {\n    width?: number;\n    height?: number;\n    frameRate?: number;\n    facingMode?: string;\n    deviceId?: string;\n    groupId?: string;\n}\n\ntype MediaStreamTrackEventMap = {\n    ended: Event<'ended'>;\n    mute: Event<'mute'>;\n    unmute: Event<'unmute'>;\n}\n\nexport default class MediaStreamTrack extends EventTarget<MediaStreamTrackEventMap> {\n    _constraints: MediaTrackConstraints;\n    _enabled: boolean;\n    _settings: MediaTrackSettings;\n    _muted: boolean;\n    _peerConnectionId: number;\n    _readyState: MediaStreamTrackState;\n\n    readonly id: string;\n    readonly kind: string;\n    readonly label: string = '';\n    readonly remote: boolean;\n\n    constructor(info: MediaStreamTrackInfo) {\n        super();\n\n        this._constraints = info.constraints || {};\n        this._enabled = info.enabled;\n        this._settings = info.settings || {};\n        this._muted = false;\n        this._peerConnectionId = info.peerConnectionId;\n        this._readyState = info.readyState;\n\n        this.id = info.id;\n        this.kind = info.kind;\n        this.remote = info.remote;\n\n        if (!this.remote) {\n            this._registerEvents();\n        }\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        if (enabled === this._enabled) {\n            return;\n        }\n\n        this._enabled = Boolean(enabled);\n\n        if (this._readyState === 'ended') {\n            return;\n        }\n\n        WebRTCModule.mediaStreamTrackSetEnabled(this.remote ? this._peerConnectionId : -1, this.id, this._enabled);\n    }\n\n    get muted(): boolean {\n        return this._muted;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    stop(): void {\n        this.enabled = false;\n        this._readyState = 'ended';\n    }\n\n    /**\n     * Private / custom API for switching the cameras on the fly, without the\n     * need for adding / removing tracks or doing any SDP renegotiation.\n     *\n     * This is how the reference application (AppRTCMobile) implements camera\n     * switching.\n     *\n     * @deprecated Use applyConstraints instead.\n     */\n    _switchCamera(): void {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        const constraints = deepClone(this._settings);\n\n        delete constraints.deviceId;\n        constraints.facingMode = this._settings.facingMode === 'user' ? 'environment' : 'user';\n\n        this.applyConstraints(constraints);\n    }\n\n    _setVideoEffects(names: string[]) {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVideoEffects(this.id, names);\n    }\n\n    _setVideoEffect(name: string) {\n        this._setVideoEffects([ name ]);\n    }\n\n    /**\n     * Internal function which is used to set the muted state on remote tracks and\n     * emit the mute / unmute event.\n     *\n     * @param muted Whether the track should be marked as muted / unmuted.\n     */\n    _setMutedInternal(muted: boolean) {\n        if (!this.remote) {\n            throw new Error('Track is not remote!');\n        }\n\n        this._muted = muted;\n        this.dispatchEvent(new Event(muted ? 'mute' : 'unmute'));\n    }\n\n    /**\n     * Custom API for setting the volume on an individual audio track.\n     *\n     * @param volume a gain value in the range of 0-10. defaults to 1.0\n     */\n    _setVolume(volume: number) {\n        if (this.kind !== 'audio') {\n            throw new Error('Only implemented for audio tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVolume(this.remote ? this._peerConnectionId : -1, this.id, volume);\n    }\n\n    /**\n     * Applies a new set of constraints to the track.\n     *\n     * @param constraints An object listing the constraints\n     * to apply to the track's constrainable properties; any existing\n     * constraints are replaced with the new values specified, and any\n     * constrainable properties not included are restored to their default\n     * constraints. If this parameter is omitted, all currently set custom\n     * constraints are cleared.\n     */\n    async applyConstraints(constraints?: MediaTrackConstraints): Promise<void> {\n        if (this.kind !== 'video') {\n            log.info(`Only implemented for video tracks, ignoring applyConstraints for ${this.id}`);\n\n            return;\n        }\n\n        const normalized = normalizeConstraints({ video: constraints ?? true });\n\n        this._settings = await WebRTCModule.mediaStreamTrackApplyConstraints(this.id, normalized.video);\n        this._constraints = constraints ?? {};\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getCapabilities(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getConstraints() {\n        return deepClone(this._constraints);\n    }\n\n    getSettings(): MediaTrackSettings {\n        return deepClone(this._settings);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'mediaStreamTrackEnded', (ev: any) => {\n            if (ev.trackId !== this.id || this._readyState === 'ended') {\n                return;\n            }\n\n            log.debug(`${this.id} mediaStreamTrackEnded`);\n            this._readyState = 'ended';\n\n            this.dispatchEvent(new Event('ended'));\n        });\n    }\n\n    release(): void {\n        if (this.remote) {\n            return;\n        }\n\n        removeListener(this);\n        WebRTCModule.mediaStreamTrackRelease(this.id);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStreamTrack.prototype;\n\ndefineEventAttribute(proto, 'ended');\ndefineEventAttribute(proto, 'mute');\ndefineEventAttribute(proto, 'unmute');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["EventTarget","Event","defineEventAttribute","NativeModules","addListener","removeListener","Logger","deepClone","normalizeConstraints","log","WebRTCModule","MediaStreamTrack","constructor","info","_defineProperty","_constraints","constraints","_enabled","enabled","_settings","settings","_muted","_peerConnectionId","peerConnectionId","_readyState","readyState","id","kind","remote","_registerEvents","Boolean","mediaStreamTrackSetEnabled","muted","stop","_switchCamera","Error","deviceId","facingMode","applyConstraints","_setVideoEffects","names","mediaStreamTrackSetVideoEffects","_setVideoEffect","name","_setMutedInternal","dispatchEvent","_setVolume","volume","mediaStreamTrackSetVolume","normalized","video","mediaStreamTrackApplyConstraints","clone","getCapabilities","getConstraints","getSettings","ev","trackId","debug","release","mediaStreamTrackRelease","proto","prototype"],"sources":["MediaStreamTrack.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { MediaTrackConstraints } from './Constraints';\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport { deepClone, normalizeConstraints } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\n\ntype MediaStreamTrackState = 'live' | 'ended';\n\nexport type MediaStreamTrackInfo = {\n    id: string;\n    kind: string;\n    remote: boolean;\n    constraints: object;\n    enabled: boolean;\n    settings: object;\n    peerConnectionId: number;\n    readyState: MediaStreamTrackState;\n}\n\nexport type MediaTrackSettings = {\n    width?: number;\n    height?: number;\n    frameRate?: number;\n    facingMode?: string;\n    deviceId?: string;\n    groupId?: string;\n}\n\ntype MediaStreamTrackEventMap = {\n    ended: Event<'ended'>;\n    mute: Event<'mute'>;\n    unmute: Event<'unmute'>;\n}\n\nexport default class MediaStreamTrack extends EventTarget<MediaStreamTrackEventMap> {\n    _constraints: MediaTrackConstraints;\n    _enabled: boolean;\n    _settings: MediaTrackSettings;\n    _muted: boolean;\n    _peerConnectionId: number;\n    _readyState: MediaStreamTrackState;\n\n    readonly id: string;\n    readonly kind: string;\n    readonly label: string = '';\n    readonly remote: boolean;\n\n    constructor(info: MediaStreamTrackInfo) {\n        super();\n\n        this._constraints = info.constraints || {};\n        this._enabled = info.enabled;\n        this._settings = info.settings || {};\n        this._muted = false;\n        this._peerConnectionId = info.peerConnectionId;\n        this._readyState = info.readyState;\n\n        this.id = info.id;\n        this.kind = info.kind;\n        this.remote = info.remote;\n\n        if (!this.remote) {\n            this._registerEvents();\n        }\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        if (enabled === this._enabled) {\n            return;\n        }\n\n        this._enabled = Boolean(enabled);\n\n        if (this._readyState === 'ended') {\n            return;\n        }\n\n        WebRTCModule.mediaStreamTrackSetEnabled(this.remote ? this._peerConnectionId : -1, this.id, this._enabled);\n    }\n\n    get muted(): boolean {\n        return this._muted;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    stop(): void {\n        this.enabled = false;\n        this._readyState = 'ended';\n    }\n\n    /**\n     * Private / custom API for switching the cameras on the fly, without the\n     * need for adding / removing tracks or doing any SDP renegotiation.\n     *\n     * This is how the reference application (AppRTCMobile) implements camera\n     * switching.\n     *\n     * @deprecated Use applyConstraints instead.\n     */\n    _switchCamera(): void {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        const constraints = deepClone(this._settings);\n\n        delete constraints.deviceId;\n        constraints.facingMode = this._settings.facingMode === 'user' ? 'environment' : 'user';\n\n        this.applyConstraints(constraints);\n    }\n\n    _setVideoEffects(names: string[]) {\n        if (this.remote) {\n            throw new Error('Not implemented for remote tracks');\n        }\n\n        if (this.kind !== 'video') {\n            throw new Error('Only implemented for video tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVideoEffects(this.id, names);\n    }\n\n    _setVideoEffect(name: string) {\n        this._setVideoEffects([ name ]);\n    }\n\n    /**\n     * Internal function which is used to set the muted state on remote tracks and\n     * emit the mute / unmute event.\n     *\n     * @param muted Whether the track should be marked as muted / unmuted.\n     */\n    _setMutedInternal(muted: boolean) {\n        if (!this.remote) {\n            throw new Error('Track is not remote!');\n        }\n\n        this._muted = muted;\n        this.dispatchEvent(new Event(muted ? 'mute' : 'unmute'));\n    }\n\n    /**\n     * Custom API for setting the volume on an individual audio track.\n     *\n     * @param volume a gain value in the range of 0-10. defaults to 1.0\n     */\n    _setVolume(volume: number) {\n        if (this.kind !== 'audio') {\n            throw new Error('Only implemented for audio tracks');\n        }\n\n        WebRTCModule.mediaStreamTrackSetVolume(this.remote ? this._peerConnectionId : -1, this.id, volume);\n    }\n\n    /**\n     * Applies a new set of constraints to the track.\n     *\n     * @param constraints An object listing the constraints\n     * to apply to the track's constrainable properties; any existing\n     * constraints are replaced with the new values specified, and any\n     * constrainable properties not included are restored to their default\n     * constraints. If this parameter is omitted, all currently set custom\n     * constraints are cleared.\n     */\n    async applyConstraints(constraints?: MediaTrackConstraints): Promise<void> {\n        if (this.kind !== 'video') {\n            log.info(`Only implemented for video tracks, ignoring applyConstraints for ${this.id}`);\n\n            return;\n        }\n\n        const normalized = normalizeConstraints({ video: constraints ?? true });\n\n        this._settings = await WebRTCModule.mediaStreamTrackApplyConstraints(this.id, normalized.video);\n        this._constraints = constraints ?? {};\n    }\n\n    clone(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getCapabilities(): never {\n        throw new Error('Not implemented.');\n    }\n\n    getConstraints() {\n        return deepClone(this._constraints);\n    }\n\n    getSettings(): MediaTrackSettings {\n        return deepClone(this._settings);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'mediaStreamTrackEnded', (ev: any) => {\n            if (ev.trackId !== this.id || this._readyState === 'ended') {\n                return;\n            }\n\n            log.debug(`${this.id} mediaStreamTrackEnded`);\n            this._readyState = 'ended';\n\n            this.dispatchEvent(new Event('ended'));\n        });\n    }\n\n    release(): void {\n        if (this.remote) {\n            return;\n        }\n\n        removeListener(this);\n        WebRTCModule.mediaStreamTrackRelease(this.id);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = MediaStreamTrack.prototype;\n\ndefineEventAttribute(proto, 'ended');\ndefineEventAttribute(proto, 'mute');\ndefineEventAttribute(proto, 'unmute');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js
index c18e565..6b5a99b 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 /**
  * @eventClass
  * This event is fired whenever the MediaStreamTrack has changed in any way.
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js.map
index 8fc0f9b..35fe131 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MediaStreamTrackEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","MediaStreamTrackEvent","constructor","type","eventInitDict","_defineProperty","track"],"sources":["MediaStreamTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport type MediaStreamTrack from './MediaStreamTrack';\n\ntype MEDIA_STREAM_EVENTS = 'addtrack'| 'removetrack'\n\ninterface IMediaStreamTrackEventInitDict extends Event.EventInit {\n  track: MediaStreamTrack;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the MediaStreamTrack has changed in any way.\n * @param {MEDIA_STREAM_EVENTS} type - The type of event.\n * @param {IMediaStreamTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaStream#events MDN} for details.\n */\nexport default class MediaStreamTrackEvent<TEventType extends MEDIA_STREAM_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    track: MediaStreamTrack;\n    constructor(type: TEventType, eventInitDict: IMediaStreamTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.track = eventInitDict.track;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAU/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,qBAAqB,SAAiDD,KAAK,CAAa;EACzG;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAA6C,EAAE;IACzE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAC3B,IAAI,CAACC,KAAK,GAAGF,aAAa,CAACE,KAAK;EACpC;AACJ"}
\ No newline at end of file
+{"version":3,"names":["Event","MediaStreamTrackEvent","constructor","type","eventInitDict","_defineProperty","track"],"sources":["MediaStreamTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport type MediaStreamTrack from './MediaStreamTrack';\n\ntype MEDIA_STREAM_EVENTS = 'addtrack'| 'removetrack'\n\ninterface IMediaStreamTrackEventInitDict extends Event.EventInit {\n  track: MediaStreamTrack;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the MediaStreamTrack has changed in any way.\n * @param {MEDIA_STREAM_EVENTS} type - The type of event.\n * @param {IMediaStreamTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaStream#events MDN} for details.\n */\nexport default class MediaStreamTrackEvent<TEventType extends MEDIA_STREAM_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    track: MediaStreamTrack;\n    constructor(type: TEventType, eventInitDict: IMediaStreamTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.track = eventInitDict.track;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAU/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,qBAAqB,SAAiDD,KAAK,CAAa;EACzG;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAA6C,EAAE;IACzE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAC3B,IAAI,CAACC,KAAK,GAAGF,aAAa,CAACE,KAAK;EACpC;AACJ"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js b/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js
index 5edf756..4a54f88 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 /**
  * @eventClass
  * This event is fired whenever the RTCDataChannel send message.
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js.map
index 64e4043..0b07fd9 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/MessageEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","MessageEvent","constructor","type","eventInitDict","_defineProperty","data"],"sources":["MessageEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nexport type MessageEventData = string | ArrayBuffer | Blob;\n\ntype MESSAGE_EVENTS = 'message' | 'messageerror';\n\ninterface IMessageEventInitDict extends Event.EventInit {\n    data: MessageEventData;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel send message.\n * @param {MESSAGE_EVENTS} type - The type of event.\n * @param {IMessageEventInitDict} eventInitDict - The event init properties.\n * @see\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel/message_event#event_type MDN} for details.\n */\nexport default class MessageEvent<TEventType extends MESSAGE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    data: MessageEventData;\n    constructor(type: TEventType, eventInitDict: IMessageEventInitDict) {\n        super(type, eventInitDict);\n        this.data = eventInitDict.data;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAU/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,YAAY,SAA4CD,KAAK,CAAa;EAC3F;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAAoC,EAAE;IAChE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAC3B,IAAI,CAACC,IAAI,GAAGF,aAAa,CAACE,IAAI;EAClC;AACJ"}
\ No newline at end of file
+{"version":3,"names":["Event","MessageEvent","constructor","type","eventInitDict","_defineProperty","data"],"sources":["MessageEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nexport type MessageEventData = string | ArrayBuffer | Blob;\n\ntype MESSAGE_EVENTS = 'message' | 'messageerror';\n\ninterface IMessageEventInitDict extends Event.EventInit {\n    data: MessageEventData;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel send message.\n * @param {MESSAGE_EVENTS} type - The type of event.\n * @param {IMessageEventInitDict} eventInitDict - The event init properties.\n * @see\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel/message_event#event_type MDN} for details.\n */\nexport default class MessageEvent<TEventType extends MESSAGE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    data: MessageEventData;\n    constructor(type: TEventType, eventInitDict: IMessageEventInitDict) {\n        super(type, eventInitDict);\n        this.data = eventInitDict.data;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAU/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,YAAY,SAA4CD,KAAK,CAAa;EAC3F;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAAoC,EAAE;IAChE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAC3B,IAAI,CAACC,IAAI,GAAGF,aAAa,CAACE,IAAI;EAClC;AACJ"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js
index f166602..5449c2b 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js
@@ -1,6 +1,6 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
 import * as base64 from 'base64-js';
-import { EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 import { addListener, removeListener } from './EventEmitter';
 import MessageEvent from './MessageEvent';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js.map
index b3e7f49..cd3c5e1 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannel.js.map
@@ -1 +1 @@
-{"version":3,"names":["base64","EventTarget","defineEventAttribute","NativeModules","addListener","removeListener","MessageEvent","RTCDataChannelEvent","WebRTCModule","RTCDataChannel","constructor","info","_defineProperty","_peerConnectionId","peerConnectionId","_reactTag","reactTag","_bufferedAmount","_label","label","_id","id","_ordered","Boolean","ordered","_maxPacketLifeTime","maxPacketLifeTime","_maxRetransmits","maxRetransmits","_protocol","protocol","_negotiated","negotiated","_readyState","readyState","_registerEvents","bufferedAmount","send","data","dataChannelSend","ArrayBuffer","isView","Uint8Array","buffer","byteOffset","byteLength","TypeError","base64data","fromByteArray","close","dataChannelClose","ev","state","dispatchEvent","channel","dataChannelDispose","type","toByteArray","bufferedAmountLowThreshold","proto","prototype"],"sources":["RTCDataChannel.ts"],"sourcesContent":["import * as base64 from 'base64-js';\nimport { EventTarget, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport MessageEvent from './MessageEvent';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\n\nconst { WebRTCModule } = NativeModules;\n\ntype RTCDataChannelState = 'connecting' | 'open' | 'closing' | 'closed';\n\ntype DataChannelEventMap = {\n    bufferedamountlow: RTCDataChannelEvent<'bufferedamountlow'>;\n    close: RTCDataChannelEvent<'close'>;\n    closing: RTCDataChannelEvent<'closing'>;\n    error: RTCDataChannelEvent<'error'>;\n    message: MessageEvent<'message'>;\n    open: RTCDataChannelEvent<'open'>;\n};\n\nexport default class RTCDataChannel extends EventTarget<DataChannelEventMap> {\n    _peerConnectionId: number;\n    _reactTag: string;\n\n    _bufferedAmount: number;\n    _id: number;\n    _label: string;\n    _maxPacketLifeTime?: number;\n    _maxRetransmits?: number;\n    _negotiated: boolean;\n    _ordered: boolean;\n    _protocol: string;\n    _readyState: RTCDataChannelState;\n\n    binaryType = 'arraybuffer'; // we only support 'arraybuffer'\n    bufferedAmountLowThreshold = 0;\n\n    constructor(info) {\n        super();\n\n        this._peerConnectionId = info.peerConnectionId;\n        this._reactTag = info.reactTag;\n\n        this._bufferedAmount = 0;\n        this._label = info.label;\n        this._id = info.id === -1 ? null : info.id; // null until negotiated.\n        this._ordered = Boolean(info.ordered);\n        this._maxPacketLifeTime = info.maxPacketLifeTime;\n        this._maxRetransmits = info.maxRetransmits;\n        this._protocol = info.protocol || '';\n        this._negotiated = Boolean(info.negotiated);\n        this._readyState = info.readyState;\n\n        this._registerEvents();\n    }\n\n    get bufferedAmount(): number {\n        return this._bufferedAmount;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get id(): number {\n        return this._id;\n    }\n\n    get ordered(): boolean {\n        return this._ordered;\n    }\n\n    get maxPacketLifeTime(): number | undefined {\n        return this._maxPacketLifeTime;\n    }\n\n    get maxRetransmits(): number | undefined {\n        return this._maxRetransmits;\n    }\n\n    get protocol(): string {\n        return this._protocol;\n    }\n\n    get negotiated(): boolean {\n        return this._negotiated;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    send(data: string): void;\n    send(data: ArrayBuffer): void;\n    send(data: ArrayBufferView): void;\n    send(data: string | ArrayBuffer | ArrayBufferView): void {\n        if (typeof data === 'string') {\n            WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, data, 'text');\n\n            return;\n        }\n\n        // Safely convert the buffer object to an Uint8Array for base64-encoding\n        if (ArrayBuffer.isView(data)) {\n            data = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n        } else if (data instanceof ArrayBuffer) {\n            data = new Uint8Array(data);\n        } else {\n            throw new TypeError('Data must be either string, ArrayBuffer, or ArrayBufferView');\n        }\n\n        const base64data = base64.fromByteArray(data as Uint8Array);\n\n        WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, base64data, 'binary');\n    }\n\n    close(): void {\n        if (this._readyState === 'closing' || this._readyState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.dataChannelClose(this._peerConnectionId, this._reactTag);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'dataChannelStateChanged', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._readyState = ev.state;\n\n            if (this._id === null && ev.id !== -1) {\n                this._id = ev.id;\n            }\n\n            if (this._readyState === 'open') {\n                this.dispatchEvent(new RTCDataChannelEvent('open', { channel: this }));\n            } else if (this._readyState === 'closing') {\n                this.dispatchEvent(new RTCDataChannelEvent('closing', { channel: this }));\n            } else if (this._readyState === 'closed') {\n                this.dispatchEvent(new RTCDataChannelEvent('close', { channel: this }));\n\n                // This DataChannel is done, clean up event handlers.\n                removeListener(this);\n\n                WebRTCModule.dataChannelDispose(this._peerConnectionId, this._reactTag);\n            }\n        });\n\n        addListener(this, 'dataChannelReceiveMessage', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            let data = ev.data;\n\n            if (ev.type === 'binary') {\n                data = base64.toByteArray(ev.data).buffer;\n            }\n\n            this.dispatchEvent(new MessageEvent('message', { data }));\n        });\n\n        addListener(this, 'dataChannelDidChangeBufferedAmount', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._bufferedAmount = ev.bufferedAmount;\n\n            if (this._bufferedAmount < this.bufferedAmountLowThreshold) {\n                this.dispatchEvent(new RTCDataChannelEvent('bufferedamountlow', { channel: this }));\n            }\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCDataChannel.prototype;\n\ndefineEventAttribute(proto, 'bufferedamountlow');\ndefineEventAttribute(proto, 'close');\ndefineEventAttribute(proto, 'closing');\ndefineEventAttribute(proto, 'error');\ndefineEventAttribute(proto, 'message');\ndefineEventAttribute(proto, 'open');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["base64","EventTarget","defineEventAttribute","NativeModules","addListener","removeListener","MessageEvent","RTCDataChannelEvent","WebRTCModule","RTCDataChannel","constructor","info","_defineProperty","_peerConnectionId","peerConnectionId","_reactTag","reactTag","_bufferedAmount","_label","label","_id","id","_ordered","Boolean","ordered","_maxPacketLifeTime","maxPacketLifeTime","_maxRetransmits","maxRetransmits","_protocol","protocol","_negotiated","negotiated","_readyState","readyState","_registerEvents","bufferedAmount","send","data","dataChannelSend","ArrayBuffer","isView","Uint8Array","buffer","byteOffset","byteLength","TypeError","base64data","fromByteArray","close","dataChannelClose","ev","state","dispatchEvent","channel","dataChannelDispose","type","toByteArray","bufferedAmountLowThreshold","proto","prototype"],"sources":["RTCDataChannel.ts"],"sourcesContent":["import * as base64 from 'base64-js';\nimport { EventTarget, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport MessageEvent from './MessageEvent';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\n\nconst { WebRTCModule } = NativeModules;\n\ntype RTCDataChannelState = 'connecting' | 'open' | 'closing' | 'closed';\n\ntype DataChannelEventMap = {\n    bufferedamountlow: RTCDataChannelEvent<'bufferedamountlow'>;\n    close: RTCDataChannelEvent<'close'>;\n    closing: RTCDataChannelEvent<'closing'>;\n    error: RTCDataChannelEvent<'error'>;\n    message: MessageEvent<'message'>;\n    open: RTCDataChannelEvent<'open'>;\n};\n\nexport default class RTCDataChannel extends EventTarget<DataChannelEventMap> {\n    _peerConnectionId: number;\n    _reactTag: string;\n\n    _bufferedAmount: number;\n    _id: number;\n    _label: string;\n    _maxPacketLifeTime?: number;\n    _maxRetransmits?: number;\n    _negotiated: boolean;\n    _ordered: boolean;\n    _protocol: string;\n    _readyState: RTCDataChannelState;\n\n    binaryType = 'arraybuffer'; // we only support 'arraybuffer'\n    bufferedAmountLowThreshold = 0;\n\n    constructor(info) {\n        super();\n\n        this._peerConnectionId = info.peerConnectionId;\n        this._reactTag = info.reactTag;\n\n        this._bufferedAmount = 0;\n        this._label = info.label;\n        this._id = info.id === -1 ? null : info.id; // null until negotiated.\n        this._ordered = Boolean(info.ordered);\n        this._maxPacketLifeTime = info.maxPacketLifeTime;\n        this._maxRetransmits = info.maxRetransmits;\n        this._protocol = info.protocol || '';\n        this._negotiated = Boolean(info.negotiated);\n        this._readyState = info.readyState;\n\n        this._registerEvents();\n    }\n\n    get bufferedAmount(): number {\n        return this._bufferedAmount;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get id(): number {\n        return this._id;\n    }\n\n    get ordered(): boolean {\n        return this._ordered;\n    }\n\n    get maxPacketLifeTime(): number | undefined {\n        return this._maxPacketLifeTime;\n    }\n\n    get maxRetransmits(): number | undefined {\n        return this._maxRetransmits;\n    }\n\n    get protocol(): string {\n        return this._protocol;\n    }\n\n    get negotiated(): boolean {\n        return this._negotiated;\n    }\n\n    get readyState(): string {\n        return this._readyState;\n    }\n\n    send(data: string): void;\n    send(data: ArrayBuffer): void;\n    send(data: ArrayBufferView): void;\n    send(data: string | ArrayBuffer | ArrayBufferView): void {\n        if (typeof data === 'string') {\n            WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, data, 'text');\n\n            return;\n        }\n\n        // Safely convert the buffer object to an Uint8Array for base64-encoding\n        if (ArrayBuffer.isView(data)) {\n            data = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n        } else if (data instanceof ArrayBuffer) {\n            data = new Uint8Array(data);\n        } else {\n            throw new TypeError('Data must be either string, ArrayBuffer, or ArrayBufferView');\n        }\n\n        const base64data = base64.fromByteArray(data as Uint8Array);\n\n        WebRTCModule.dataChannelSend(this._peerConnectionId, this._reactTag, base64data, 'binary');\n    }\n\n    close(): void {\n        if (this._readyState === 'closing' || this._readyState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.dataChannelClose(this._peerConnectionId, this._reactTag);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'dataChannelStateChanged', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._readyState = ev.state;\n\n            if (this._id === null && ev.id !== -1) {\n                this._id = ev.id;\n            }\n\n            if (this._readyState === 'open') {\n                this.dispatchEvent(new RTCDataChannelEvent('open', { channel: this }));\n            } else if (this._readyState === 'closing') {\n                this.dispatchEvent(new RTCDataChannelEvent('closing', { channel: this }));\n            } else if (this._readyState === 'closed') {\n                this.dispatchEvent(new RTCDataChannelEvent('close', { channel: this }));\n\n                // This DataChannel is done, clean up event handlers.\n                removeListener(this);\n\n                WebRTCModule.dataChannelDispose(this._peerConnectionId, this._reactTag);\n            }\n        });\n\n        addListener(this, 'dataChannelReceiveMessage', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            let data = ev.data;\n\n            if (ev.type === 'binary') {\n                data = base64.toByteArray(ev.data).buffer;\n            }\n\n            this.dispatchEvent(new MessageEvent('message', { data }));\n        });\n\n        addListener(this, 'dataChannelDidChangeBufferedAmount', (ev: any) => {\n            if (ev.reactTag !== this._reactTag) {\n                return;\n            }\n\n            this._bufferedAmount = ev.bufferedAmount;\n\n            if (this._bufferedAmount < this.bufferedAmountLowThreshold) {\n                this.dispatchEvent(new RTCDataChannelEvent('bufferedamountlow', { channel: this }));\n            }\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCDataChannel.prototype;\n\ndefineEventAttribute(proto, 'bufferedamountlow');\ndefineEventAttribute(proto, 'close');\ndefineEventAttribute(proto, 'closing');\ndefineEventAttribute(proto, 'error');\ndefineEventAttribute(proto, 'message');\ndefineEventAttribute(proto, 'open');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js
index ed9090f..0f42d05 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 /**
  * @eventClass
  * This event is fired whenever the RTCDataChannel has changed in any way.
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js.map
index e6980bd..3c60c30 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCDataChannelEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","RTCDataChannelEvent","constructor","type","eventInitDict","_defineProperty","channel"],"sources":["RTCDataChannelEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport type RTCDataChannel from './RTCDataChannel';\n\ntype DATA_CHANNEL_EVENTS =  'open'| 'message'| 'bufferedamountlow'| 'closing'| 'close'| 'error' | 'datachannel';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    channel: RTCDataChannel;\n}\n\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {DATA_CHANNEL_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport default class RTCDataChannelEvent<\nTEventType extends DATA_CHANNEL_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    channel: RTCDataChannel;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.channel = eventInitDict.channel;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAW/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,mBAAmB,SAE9BD,KAAK,CAAa;EACxB;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IACvE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAC3B,IAAI,CAACC,OAAO,GAAGF,aAAa,CAACE,OAAO;EACxC;AACJ"}
\ No newline at end of file
+{"version":3,"names":["Event","RTCDataChannelEvent","constructor","type","eventInitDict","_defineProperty","channel"],"sources":["RTCDataChannelEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport type RTCDataChannel from './RTCDataChannel';\n\ntype DATA_CHANNEL_EVENTS =  'open'| 'message'| 'bufferedamountlow'| 'closing'| 'close'| 'error' | 'datachannel';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    channel: RTCDataChannel;\n}\n\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {DATA_CHANNEL_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport default class RTCDataChannelEvent<\nTEventType extends DATA_CHANNEL_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    channel: RTCDataChannel;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.channel = eventInitDict.channel;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAW/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,mBAAmB,SAE9BD,KAAK,CAAa;EACxB;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IACvE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAC3B,IAAI,CAACC,OAAO,GAAGF,aAAa,CAACE,OAAO;EACxC;AACJ"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js
index e8fd7f7..84d8692 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 /**
  * @brief This class Represents internal error happening on the native side as
  * part of asynchronous invocations to synchronous web APIs.
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js.map
index 336542a..f2aab10 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCErrorEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","RTCErrorEvent","constructor","type","func","message","_defineProperty"],"sources":["RTCErrorEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\ntype RTCPeerConnectionErrorFunc =\n    | 'addTransceiver'\n    | 'getTransceivers'\n    | 'addTrack'\n    | 'removeTrack';\n\n/**\n * @brief This class Represents internal error happening on the native side as\n * part of asynchronous invocations to synchronous web APIs.\n */\nexport default class RTCErrorEvent<TEventType extends RTCPeerConnectionErrorFunc> extends Event<TEventType> {\n    readonly func: RTCPeerConnectionErrorFunc;\n    readonly message: string;\n    constructor(type: TEventType, func: RTCPeerConnectionErrorFunc, message: string) {\n        super(type);\n        this.func = func;\n        this.message = message;\n    }\n}"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAQ/C;AACA;AACA;AACA;AACA,eAAe,MAAMC,aAAa,SAAwDD,KAAK,CAAa;EAGxGE,WAAWA,CAACC,IAAgB,EAAEC,IAAgC,EAAEC,OAAe,EAAE;IAC7E,KAAK,CAACF,IAAI,CAAC;IAACG,eAAA;IAAAA,eAAA;IACZ,IAAI,CAACF,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;AACJ"}
\ No newline at end of file
+{"version":3,"names":["Event","RTCErrorEvent","constructor","type","func","message","_defineProperty"],"sources":["RTCErrorEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\ntype RTCPeerConnectionErrorFunc =\n    | 'addTransceiver'\n    | 'getTransceivers'\n    | 'addTrack'\n    | 'removeTrack';\n\n/**\n * @brief This class Represents internal error happening on the native side as\n * part of asynchronous invocations to synchronous web APIs.\n */\nexport default class RTCErrorEvent<TEventType extends RTCPeerConnectionErrorFunc> extends Event<TEventType> {\n    readonly func: RTCPeerConnectionErrorFunc;\n    readonly message: string;\n    constructor(type: TEventType, func: RTCPeerConnectionErrorFunc, message: string) {\n        super(type);\n        this.func = func;\n        this.message = message;\n    }\n}"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAQ/C;AACA;AACA;AACA;AACA,eAAe,MAAMC,aAAa,SAAwDD,KAAK,CAAa;EAGxGE,WAAWA,CAACC,IAAgB,EAAEC,IAAgC,EAAEC,OAAe,EAAE;IAC7E,KAAK,CAACF,IAAI,CAAC;IAACG,eAAA;IAAAA,eAAA;IACZ,IAAI,CAACF,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;AACJ"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js
index ae95c18..247b746 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event, EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { Event, EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 import { addListener, removeListener } from './EventEmitter';
 import Logger from './Logger';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js.map
index 8acdcd4..6221b84 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCFrameCryptor.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","EventTarget","defineEventAttribute","NativeModules","addListener","removeListener","Logger","WebRTCModule","log","RTCFrameCryptorStateEvent","constructor","type","eventInitDict","_defineProperty","frameCryptor","state","RTCFrameCryptorState","RTCFrameCryptor","frameCryptorId","participantId","_frameCryptorId","_participantId","_registerEvents","id","_cryptorStateFromString","str","FrameCryptorStateNew","FrameCryptorStateOk","FrameCryptorStateDecryptionFailed","FrameCryptorStateEncryptionFailed","FrameCryptorStateInternalError","FrameCryptorStateKeyRatcheted","FrameCryptorStateMissingKey","setKeyIndex","keyIndex","params","frameCryptorSetKeyIndex","then","data","getKeyIndex","frameCryptorGetKeyIndex","setEnabled","enabled","frameCryptorSetEnabled","getEnabled","frameCryptorGetEnabled","dispose","frameCryptorDispose","ev","debug","initDict","dispatchEvent","proto","prototype"],"sources":["RTCFrameCryptor.ts"],"sourcesContent":["import { Event, EventTarget, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nconst { WebRTCModule } = NativeModules;\n\nconst log = new Logger('pc');\n\ntype FRAME_CRYPTOR_EVENTS =  'onframecryptorstatechanged';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    frameCryptor: RTCFrameCryptor;\n    state: RTCFrameCryptorState;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {FRAME_CRYPTOR_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport class RTCFrameCryptorStateEvent<\nTEventType extends FRAME_CRYPTOR_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    frameCryptor: RTCFrameCryptor;\n    /** @eventProperty */\n    state: RTCFrameCryptorState;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.frameCryptor = eventInitDict.frameCryptor;\n        this.state = eventInitDict.state;\n    }\n}\n\ntype RTCFrameCryptorEventMap = {\n    onframecryptorstatechanged: RTCFrameCryptorStateEvent<'onframecryptorstatechanged'>;\n}\n\nexport enum RTCFrameCryptorState {\n    FrameCryptorStateNew,\n    FrameCryptorStateOk,\n    FrameCryptorStateEncryptionFailed,\n    FrameCryptorStateDecryptionFailed,\n    FrameCryptorStateMissingKey,\n    FrameCryptorStateKeyRatcheted,\n    FrameCryptorStateInternalError,\n}\n\nexport default class RTCFrameCryptor extends EventTarget<RTCFrameCryptorEventMap> {\n    private _frameCryptorId: string;\n    private _participantId: string;\n\n    constructor(frameCryptorId: string, participantId: string) {\n        super();\n        this._frameCryptorId = frameCryptorId;\n        this._participantId = participantId;\n        this._registerEvents();\n    }\n\n    get id() {\n        return this._frameCryptorId;\n    }\n\n    get participantId() {\n        return this._participantId;\n    }\n\n    _cryptorStateFromString(str: string): RTCFrameCryptorState {\n        switch (str) {\n            case 'new':\n                return RTCFrameCryptorState.FrameCryptorStateNew;\n            case 'ok':\n                return RTCFrameCryptorState.FrameCryptorStateOk;\n            case 'decryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateDecryptionFailed;\n            case 'encryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateEncryptionFailed;\n            case 'internalError':\n                return RTCFrameCryptorState.FrameCryptorStateInternalError;\n            case 'keyRatcheted':\n                return RTCFrameCryptorState.FrameCryptorStateKeyRatcheted;\n            case 'missingKey':\n                return RTCFrameCryptorState.FrameCryptorStateMissingKey;\n            default:\n                throw 'Unknown FrameCryptorState: $str';\n        }\n    }\n\n    async setKeyIndex(keyIndex: number): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            keyIndex,\n        };\n\n        return WebRTCModule.frameCryptorSetKeyIndex(params)\n            .then(data => data['result']);\n    }\n\n    async getKeyIndex(): Promise<number> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetKeyIndex(params)\n            .then(data => data['keyIndex']);\n    }\n\n    async setEnabled(enabled: boolean): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            enabled,\n        };\n\n        return WebRTCModule.frameCryptorSetEnabled(params)\n            .then(data => data['result']);\n    }\n\n    async getEnabled(): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetEnabled(params)\n            .then(data => data['enabled']);\n    }\n\n    async dispose(): Promise<void> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        await WebRTCModule.frameCryptorDispose(params);\n        removeListener(this);\n    }\n\n\n    _registerEvents(): void {\n        addListener(this, 'frameCryptionStateChanged', (ev: any) => {\n            if (ev.participantId !== this._participantId || ev.frameCryptorId !== this._frameCryptorId) {\n                return;\n            }\n\n            log.debug(`${this.id} frameCryptionStateChanged ${ev.state}`);\n\n            const initDict = {\n                frameCryptor: this,\n                state: ev.state,\n            };\n\n            this.dispatchEvent(new RTCFrameCryptorStateEvent('onframecryptorstatechanged', initDict));\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCFrameCryptor.prototype;\n\ndefineEventAttribute(proto, 'onframecryptorstatechanged');"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["Event","EventTarget","defineEventAttribute","NativeModules","addListener","removeListener","Logger","WebRTCModule","log","RTCFrameCryptorStateEvent","constructor","type","eventInitDict","_defineProperty","frameCryptor","state","RTCFrameCryptorState","RTCFrameCryptor","frameCryptorId","participantId","_frameCryptorId","_participantId","_registerEvents","id","_cryptorStateFromString","str","FrameCryptorStateNew","FrameCryptorStateOk","FrameCryptorStateDecryptionFailed","FrameCryptorStateEncryptionFailed","FrameCryptorStateInternalError","FrameCryptorStateKeyRatcheted","FrameCryptorStateMissingKey","setKeyIndex","keyIndex","params","frameCryptorSetKeyIndex","then","data","getKeyIndex","frameCryptorGetKeyIndex","setEnabled","enabled","frameCryptorSetEnabled","getEnabled","frameCryptorGetEnabled","dispose","frameCryptorDispose","ev","debug","initDict","dispatchEvent","proto","prototype"],"sources":["RTCFrameCryptor.ts"],"sourcesContent":["import { Event, EventTarget, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nconst { WebRTCModule } = NativeModules;\n\nconst log = new Logger('pc');\n\ntype FRAME_CRYPTOR_EVENTS =  'onframecryptorstatechanged';\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    frameCryptor: RTCFrameCryptor;\n    state: RTCFrameCryptorState;\n}\n\n/**\n * @eventClass\n * This event is fired whenever the RTCDataChannel has changed in any way.\n * @param {FRAME_CRYPTOR_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel#events MDN} for details.\n */\nexport class RTCFrameCryptorStateEvent<\nTEventType extends FRAME_CRYPTOR_EVENTS\n> extends Event<TEventType> {\n    /** @eventProperty */\n    frameCryptor: RTCFrameCryptor;\n    /** @eventProperty */\n    state: RTCFrameCryptorState;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.frameCryptor = eventInitDict.frameCryptor;\n        this.state = eventInitDict.state;\n    }\n}\n\ntype RTCFrameCryptorEventMap = {\n    onframecryptorstatechanged: RTCFrameCryptorStateEvent<'onframecryptorstatechanged'>;\n}\n\nexport enum RTCFrameCryptorState {\n    FrameCryptorStateNew,\n    FrameCryptorStateOk,\n    FrameCryptorStateEncryptionFailed,\n    FrameCryptorStateDecryptionFailed,\n    FrameCryptorStateMissingKey,\n    FrameCryptorStateKeyRatcheted,\n    FrameCryptorStateInternalError,\n}\n\nexport default class RTCFrameCryptor extends EventTarget<RTCFrameCryptorEventMap> {\n    private _frameCryptorId: string;\n    private _participantId: string;\n\n    constructor(frameCryptorId: string, participantId: string) {\n        super();\n        this._frameCryptorId = frameCryptorId;\n        this._participantId = participantId;\n        this._registerEvents();\n    }\n\n    get id() {\n        return this._frameCryptorId;\n    }\n\n    get participantId() {\n        return this._participantId;\n    }\n\n    _cryptorStateFromString(str: string): RTCFrameCryptorState {\n        switch (str) {\n            case 'new':\n                return RTCFrameCryptorState.FrameCryptorStateNew;\n            case 'ok':\n                return RTCFrameCryptorState.FrameCryptorStateOk;\n            case 'decryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateDecryptionFailed;\n            case 'encryptionFailed':\n                return RTCFrameCryptorState.FrameCryptorStateEncryptionFailed;\n            case 'internalError':\n                return RTCFrameCryptorState.FrameCryptorStateInternalError;\n            case 'keyRatcheted':\n                return RTCFrameCryptorState.FrameCryptorStateKeyRatcheted;\n            case 'missingKey':\n                return RTCFrameCryptorState.FrameCryptorStateMissingKey;\n            default:\n                throw 'Unknown FrameCryptorState: $str';\n        }\n    }\n\n    async setKeyIndex(keyIndex: number): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            keyIndex,\n        };\n\n        return WebRTCModule.frameCryptorSetKeyIndex(params)\n            .then(data => data['result']);\n    }\n\n    async getKeyIndex(): Promise<number> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetKeyIndex(params)\n            .then(data => data['keyIndex']);\n    }\n\n    async setEnabled(enabled: boolean): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n            enabled,\n        };\n\n        return WebRTCModule.frameCryptorSetEnabled(params)\n            .then(data => data['result']);\n    }\n\n    async getEnabled(): Promise<boolean> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        return WebRTCModule.frameCryptorGetEnabled(params)\n            .then(data => data['enabled']);\n    }\n\n    async dispose(): Promise<void> {\n        const params = {\n            frameCryptorId: this._frameCryptorId,\n        };\n\n        await WebRTCModule.frameCryptorDispose(params);\n        removeListener(this);\n    }\n\n\n    _registerEvents(): void {\n        addListener(this, 'frameCryptionStateChanged', (ev: any) => {\n            if (ev.participantId !== this._participantId || ev.frameCryptorId !== this._frameCryptorId) {\n                return;\n            }\n\n            log.debug(`${this.id} frameCryptionStateChanged ${ev.state}`);\n\n            const initDict = {\n                frameCryptor: this,\n                state: ev.state,\n            };\n\n            this.dispatchEvent(new RTCFrameCryptorStateEvent('onframecryptorstatechanged', initDict));\n        });\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCFrameCryptor.prototype;\n\ndefineEventAttribute(proto, 'onframecryptorstatechanged');"],"mappings":";AAAA,SAASA,KAAK,EAAEC,WAAW,EAAEC,oBAAoB,QAAQ,yBAAyB;AAClF,SAASC,aAAa,QAAQ,cAAc;AAE5C,SAASC,WAAW,EAAEC,cAAc,QAAQ,gBAAgB;AAC5D,OAAOC,MAAM,MAAM,UAAU;AAC7B,MAAM;EAAEC;AAAa,CAAC,GAAGJ,aAAa;AAEtC,MAAMK,GAAG,GAAG,IAAIF,MAAM,CAAC,IAAI,CAAC;AAS5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMG,yBAAyB,SAE5BT,KAAK,CAAa;EACxB;;EAEA;;EAEAU,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IACvE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA;IAAAA,eAAA;IAC3B,IAAI,CAACC,YAAY,GAAGF,aAAa,CAACE,YAAY;IAC9C,IAAI,CAACC,KAAK,GAAGH,aAAa,CAACG,KAAK;EACpC;AACJ;AAMA,WAAYC,oBAAoB;AAQ/B,WARWA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;EAApBA,oBAAoB,CAApBA,oBAAoB;AAAA,GAApBA,oBAAoB,KAApBA,oBAAoB;AAUhC,eAAe,MAAMC,eAAe,SAAShB,WAAW,CAA0B;EAI9ES,WAAWA,CAACQ,cAAsB,EAAEC,aAAqB,EAAE;IACvD,KAAK,CAAC,CAAC;IAACN,eAAA;IAAAA,eAAA;IACR,IAAI,CAACO,eAAe,GAAGF,cAAc;IACrC,IAAI,CAACG,cAAc,GAAGF,aAAa;IACnC,IAAI,CAACG,eAAe,CAAC,CAAC;EAC1B;EAEA,IAAIC,EAAEA,CAAA,EAAG;IACL,OAAO,IAAI,CAACH,eAAe;EAC/B;EAEA,IAAID,aAAaA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACE,cAAc;EAC9B;EAEAG,uBAAuBA,CAACC,GAAW,EAAwB;IACvD,QAAQA,GAAG;MACP,KAAK,KAAK;QACN,OAAOT,oBAAoB,CAACU,oBAAoB;MACpD,KAAK,IAAI;QACL,OAAOV,oBAAoB,CAACW,mBAAmB;MACnD,KAAK,kBAAkB;QACnB,OAAOX,oBAAoB,CAACY,iCAAiC;MACjE,KAAK,kBAAkB;QACnB,OAAOZ,oBAAoB,CAACa,iCAAiC;MACjE,KAAK,eAAe;QAChB,OAAOb,oBAAoB,CAACc,8BAA8B;MAC9D,KAAK,cAAc;QACf,OAAOd,oBAAoB,CAACe,6BAA6B;MAC7D,KAAK,YAAY;QACb,OAAOf,oBAAoB,CAACgB,2BAA2B;MAC3D;QACI,MAAM,iCAAiC;IAC/C;EACJ;EAEA,MAAMC,WAAWA,CAACC,QAAgB,EAAoB;IAClD,MAAMC,MAAM,GAAG;MACXjB,cAAc,EAAE,IAAI,CAACE,eAAe;MACpCc;IACJ,CAAC;IAED,OAAO3B,YAAY,CAAC6B,uBAAuB,CAACD,MAAM,CAAC,CAC9CE,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAC,QAAQ,CAAC,CAAC;EACrC;EAEA,MAAMC,WAAWA,CAAA,EAAoB;IACjC,MAAMJ,MAAM,GAAG;MACXjB,cAAc,EAAE,IAAI,CAACE;IACzB,CAAC;IAED,OAAOb,YAAY,CAACiC,uBAAuB,CAACL,MAAM,CAAC,CAC9CE,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAC,UAAU,CAAC,CAAC;EACvC;EAEA,MAAMG,UAAUA,CAACC,OAAgB,EAAoB;IACjD,MAAMP,MAAM,GAAG;MACXjB,cAAc,EAAE,IAAI,CAACE,eAAe;MACpCsB;IACJ,CAAC;IAED,OAAOnC,YAAY,CAACoC,sBAAsB,CAACR,MAAM,CAAC,CAC7CE,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAC,QAAQ,CAAC,CAAC;EACrC;EAEA,MAAMM,UAAUA,CAAA,EAAqB;IACjC,MAAMT,MAAM,GAAG;MACXjB,cAAc,EAAE,IAAI,CAACE;IACzB,CAAC;IAED,OAAOb,YAAY,CAACsC,sBAAsB,CAACV,MAAM,CAAC,CAC7CE,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAC,SAAS,CAAC,CAAC;EACtC;EAEA,MAAMQ,OAAOA,CAAA,EAAkB;IAC3B,MAAMX,MAAM,GAAG;MACXjB,cAAc,EAAE,IAAI,CAACE;IACzB,CAAC;IAED,MAAMb,YAAY,CAACwC,mBAAmB,CAACZ,MAAM,CAAC;IAC9C9B,cAAc,CAAC,IAAI,CAAC;EACxB;EAGAiB,eAAeA,CAAA,EAAS;IACpBlB,WAAW,CAAC,IAAI,EAAE,2BAA2B,EAAG4C,EAAO,IAAK;MACxD,IAAIA,EAAE,CAAC7B,aAAa,KAAK,IAAI,CAACE,cAAc,IAAI2B,EAAE,CAAC9B,cAAc,KAAK,IAAI,CAACE,eAAe,EAAE;QACxF;MACJ;MAEAZ,GAAG,CAACyC,KAAK,CAAE,GAAE,IAAI,CAAC1B,EAAG,8BAA6ByB,EAAE,CAACjC,KAAM,EAAC,CAAC;MAE7D,MAAMmC,QAAQ,GAAG;QACbpC,YAAY,EAAE,IAAI;QAClBC,KAAK,EAAEiC,EAAE,CAACjC;MACd,CAAC;MAED,IAAI,CAACoC,aAAa,CAAC,IAAI1C,yBAAyB,CAAC,4BAA4B,EAAEyC,QAAQ,CAAC,CAAC;IAC7F,CAAC,CAAC;EACN;AACJ;;AAEA;AACA;AACA;AACA,MAAME,KAAK,GAAGnC,eAAe,CAACoC,SAAS;AAEvCnD,oBAAoB,CAACkD,KAAK,EAAE,4BAA4B,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js
index 7c61d79..a57560a 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 /**
  * @eventClass
  * This event is fired whenever the icecandidate related RTC_EVENTS changed.
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js.map
index cc779a8..d20b5fb 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCIceCandidateEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","RTCIceCandidateEvent","constructor","type","eventInitDict","_eventInitDict$candid","_defineProperty","candidate"],"sources":["RTCIceCandidateEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport type RTCIceCandidate from './RTCIceCandidate';\n\ntype RTC_ICECANDIDATE_EVENTS = 'icecandidate' | 'icecandidateerror'\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    candidate: RTCIceCandidate | null\n}\n\n/**\n * @eventClass\n * This event is fired whenever the icecandidate related RTC_EVENTS changed.\n * @type {RTCIceCandidateEvent} for icecandidate related.\n * @param {RTC_ICECANDIDATE_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection#events MDN} for details.\n */\nexport default class RTCIceCandidateEvent<TEventType extends RTC_ICECANDIDATE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    candidate: RTCIceCandidate | null;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.candidate = eventInitDict?.candidate ?? null;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAU/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,oBAAoB,SAAqDD,KAAK,CAAa;EAC5G;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IAAA,IAAAC,qBAAA;IACvE,KAAK,CAACF,IAAI,EAAEC,aAAa,CAAC;IAACE,eAAA;IAC3B,IAAI,CAACC,SAAS,IAAAF,qBAAA,GAAGD,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEG,SAAS,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,IAAI;EACrD;AACJ"}
\ No newline at end of file
+{"version":3,"names":["Event","RTCIceCandidateEvent","constructor","type","eventInitDict","_eventInitDict$candid","_defineProperty","candidate"],"sources":["RTCIceCandidateEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport type RTCIceCandidate from './RTCIceCandidate';\n\ntype RTC_ICECANDIDATE_EVENTS = 'icecandidate' | 'icecandidateerror'\n\ninterface IRTCDataChannelEventInitDict extends Event.EventInit {\n    candidate: RTCIceCandidate | null\n}\n\n/**\n * @eventClass\n * This event is fired whenever the icecandidate related RTC_EVENTS changed.\n * @type {RTCIceCandidateEvent} for icecandidate related.\n * @param {RTC_ICECANDIDATE_EVENTS} type - The type of event.\n * @param {IRTCDataChannelEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection#events MDN} for details.\n */\nexport default class RTCIceCandidateEvent<TEventType extends RTC_ICECANDIDATE_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    candidate: RTCIceCandidate | null;\n    constructor(type: TEventType, eventInitDict: IRTCDataChannelEventInitDict) {\n        super(type, eventInitDict);\n        this.candidate = eventInitDict?.candidate ?? null;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAU/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,oBAAoB,SAAqDD,KAAK,CAAa;EAC5G;;EAEAE,WAAWA,CAACC,IAAgB,EAAEC,aAA2C,EAAE;IAAA,IAAAC,qBAAA;IACvE,KAAK,CAACF,IAAI,EAAEC,aAAa,CAAC;IAACE,eAAA;IAC3B,IAAI,CAACC,SAAS,IAAAF,qBAAA,GAAGD,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEG,SAAS,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,IAAI;EACrD;AACJ"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js
index 5d6d1c8..db030a6 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 import { addListener, removeListener } from './EventEmitter';
 import Logger from './Logger';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js.map
index 2c0055f..cb72a16 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCPeerConnection.js.map
@@ -1 +1 @@
-{"version":3,"names":["EventTarget","Event","defineEventAttribute","NativeModules","addListener","removeListener","Logger","MediaStream","MediaStreamTrack","MediaStreamTrackEvent","RTCDataChannel","RTCDataChannelEvent","RTCIceCandidate","RTCIceCandidateEvent","RTCRtpReceiveParameters","RTCRtpReceiver","RTCRtpSendParameters","RTCRtpSender","RTCRtpTransceiver","RTCSessionDescription","RTCTrackEvent","RTCUtil","log","WebRTCModule","nextPeerConnectionId","RTCPeerConnection","constructor","configuration","_defineProperty","_pcId","_configuration$iceSer","servers","iceServers","server","urls","url","Array","isArray","map","toLowerCase","filter","s","peerConnectionInit","Error","_transceivers","_remoteStreams","Map","_pendingTrackEvents","_registerEvents","debug","createOffer","options","sdpInfo","newTransceivers","transceiversInfo","peerConnectionCreateOffer","normalizeOfferOptions","forEach","t","transceiverOrder","transceiver","newSender","sender","track","remoteTrack","receiver","newReceiver","newTransceiver","_insertTransceiverSorted","_updateTransceivers","createAnswer","peerConnectionCreateAnswer","setConfiguration","peerConnectionSetConfiguration","setLocalDescription","sessionDescription","_desc","desc","_sessionDescription$s","type","sdp","isSdpTypeValid","peerConnectionSetLocalDescription","localDescription","setRemoteDescription","_sessionDescription$s2","_desc$type","Promise","reject","peerConnectionSetRemoteDescription","remoteDescription","pendingTrackEvents","ev","getTransceivers","id","_mid","mid","_currentDirection","currentDirection","_direction","direction","streams","streamInfo","has","streamId","stream","streamReactTag","tracks","set","get","_tracks","includes","push","eventData","dispatchEvent","_setMutedInternal","addIceCandidate","candidate","sdpMLineIndex","undefined","sdpMid","TypeError","newSdp","peerConnectionAddICECandidate","deepClone","addTrack","connectionState","_trackExists","_len","arguments","length","_key","streamIds","result","peerConnectionAddTrack","existingSender","getSenders","_track","existingTransceiver","addTransceiver","source","init","src","trackId","peerConnectionAddTransceiver","removeTrack","_peerConnectionId","find","peerConnectionRemoveTrack","getStats","selector","data","peerConnectionGetStats","JSON","parse","senders","receivers","getReceivers","r","matches","sr","e","stopped","close","peerConnectionClose","_ref","_setStopped","restartIce","peerConnectionRestartIce","pcId","iceConnectionState","peerConnectionDispose","signalingState","receiverId","values","trackIdx","indexOf","splice","iceGatheringState","channel","dataChannel","muted","createDataChannel","label","dataChannelDict","channelInfo","String","_sender$track","transceiverUpdates","removeStopped","update","transceiverId","_stopped","Boolean","isStopped","_sender","_rtpParameters","senderRtpParameters","_receiver","receiverRtpParameters","order","sort","a","b","proto","prototype"],"sources":["RTCPeerConnection.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport MediaStream from './MediaStream';\nimport MediaStreamTrack from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport RTCDataChannel from './RTCDataChannel';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\nimport RTCIceCandidate from './RTCIceCandidate';\nimport RTCIceCandidateEvent from './RTCIceCandidateEvent';\nimport RTCRtpReceiveParameters from './RTCRtpReceiveParameters';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpSendParameters from './RTCRtpSendParameters';\nimport RTCRtpSender from './RTCRtpSender';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\nimport RTCSessionDescription, { RTCSessionDescriptionInit } from './RTCSessionDescription';\nimport RTCTrackEvent from './RTCTrackEvent';\nimport * as RTCUtil from './RTCUtil';\nimport { RTCOfferOptions } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\ntype RTCSignalingState =\n    | 'stable'\n    | 'have-local-offer'\n    | 'have-remote-offer'\n    | 'have-local-pranswer'\n    | 'have-remote-pranswer'\n    | 'closed';\n\ntype RTCIceGatheringState = 'new' | 'gathering' | 'complete';\n\ntype RTCPeerConnectionState = 'new' | 'connecting' | 'connected' | 'disconnected' | 'failed' | 'closed';\n\ntype RTCIceConnectionState = 'new' | 'checking' | 'connected' | 'completed' | 'failed' | 'disconnected' | 'closed';\n\ntype RTCDataChannelInit = {\n    ordered?: boolean,\n    maxPacketLifeTime?: number,\n    maxRetransmits?: number,\n    protocol?: string,\n    negotiated?: boolean,\n    id?: number\n};\n\ntype RTCIceServer = {\n    credential?: string,\n    url?: string, // Deprecated.\n    urls?: string | string[],\n    username?: string\n};\n\ntype RTCConfiguration = {\n    bundlePolicy?: 'balanced' | 'max-compat' | 'max-bundle',\n    iceCandidatePoolSize?: number,\n    iceServers?: RTCIceServer[],\n    iceTransportPolicy?: 'all' | 'relay',\n    rtcpMuxPolicy?: 'negotiate' | 'require'\n};\n\ntype RTCPeerConnectionEventMap = {\n    connectionstatechange: Event<'connectionstatechange'>\n    icecandidate: RTCIceCandidateEvent<'icecandidate'>\n    icecandidateerror: RTCIceCandidateEvent<'icecandidateerror'>\n    iceconnectionstatechange: Event<'iceconnectionstatechange'>\n    icegatheringstatechange: Event<'icegatheringstatechange'>\n    negotiationneeded: Event<'negotiationneeded'>\n    signalingstatechange: Event<'signalingstatechange'>\n    datachannel: RTCDataChannelEvent<'datachannel'>\n    track: RTCTrackEvent<'track'>\n    error: Event<'error'>\n}\n\nlet nextPeerConnectionId = 0;\n\nexport default class RTCPeerConnection extends EventTarget<RTCPeerConnectionEventMap> {\n    localDescription: RTCSessionDescription | null = null;\n    remoteDescription: RTCSessionDescription | null = null;\n    signalingState: RTCSignalingState = 'stable';\n    iceGatheringState: RTCIceGatheringState = 'new';\n    connectionState: RTCPeerConnectionState = 'new';\n    iceConnectionState: RTCIceConnectionState = 'new';\n\n    _pcId: number;\n    _transceivers: { order: number, transceiver: RTCRtpTransceiver }[];\n    _remoteStreams: Map<string, MediaStream>;\n    _pendingTrackEvents: any[];\n\n    constructor(configuration?: RTCConfiguration) {\n        super();\n\n        this._pcId = nextPeerConnectionId++;\n\n        // Sanitize ICE servers.\n        if (configuration) {\n            const servers = configuration?.iceServers ?? [];\n\n            for (const server of servers) {\n                let urls = server.url || server.urls;\n\n                delete server.url;\n                delete server.urls;\n\n                if (!urls) {\n                    continue;\n                }\n\n                if (!Array.isArray(urls)) {\n                    urls = [ urls ];\n                }\n\n                // Native WebRTC does case sensitive parsing.\n                server.urls = urls.map(url => url.toLowerCase());\n            }\n\n            // Filter out bogus servers.\n            configuration.iceServers = servers.filter(s => s.urls);\n        }\n\n        if (!WebRTCModule.peerConnectionInit(configuration, this._pcId)) {\n            throw new Error('Failed to initialize PeerConnection, check the native logs!');\n        }\n\n        this._transceivers = [];\n        this._remoteStreams = new Map();\n        this._pendingTrackEvents = [];\n\n        this._registerEvents();\n\n        log.debug(`${this._pcId} ctor`);\n    }\n\n    async createOffer(options?:RTCOfferOptions) {\n        log.debug(`${this._pcId} createOffer`);\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateOffer(this._pcId, RTCUtil.normalizeOfferOptions(options));\n\n        log.debug(`${this._pcId} createOffer OK`);\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    async createAnswer() {\n        log.debug(`${this._pcId} createAnswer`);\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateAnswer(this._pcId, {});\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    setConfiguration(configuration): void {\n        WebRTCModule.peerConnectionSetConfiguration(configuration, this._pcId);\n    }\n\n    async setLocalDescription(sessionDescription?: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setLocalDescription`);\n\n        let desc;\n\n        if (sessionDescription) {\n            desc = {\n                type: sessionDescription.type,\n                sdp: sessionDescription.sdp ?? ''\n            };\n\n            if (!RTCUtil.isSdpTypeValid(desc.type)) {\n                throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n            }\n        } else {\n            desc = null;\n        }\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetLocalDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.localDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.localDescription = null;\n        }\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc?.type === 'answer');\n\n        log.debug(`${this._pcId} setLocalDescription OK`);\n    }\n\n    async setRemoteDescription(sessionDescription: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setRemoteDescription`);\n\n        if (!sessionDescription) {\n            return Promise.reject(new Error('No session description provided'));\n        }\n\n        const desc = {\n            type: sessionDescription.type,\n            sdp: sessionDescription.sdp ?? ''\n        };\n\n        if (!RTCUtil.isSdpTypeValid(desc.type ?? '')) {\n            throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n        }\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetRemoteDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.remoteDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.remoteDescription = null;\n        }\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc.type === 'answer');\n\n        // Fire track events. They must fire before sRD resolves.\n        const pendingTrackEvents = this._pendingTrackEvents;\n\n        this._pendingTrackEvents = [];\n\n        for (const ev of pendingTrackEvents) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.receiver.id ===  ev.receiver.id);\n\n            // We need to fire this event for an existing track sometimes, like\n            // when the transceiver direction (on the sending side) switches from\n            // sendrecv to recvonly and then back.\n\n            // @ts-ignore\n            const track: MediaStreamTrack = transceiver.receiver.track;\n\n            transceiver._mid = ev.transceiver.mid;\n            transceiver._currentDirection = ev.transceiver.currentDirection;\n            transceiver._direction = ev.transceiver.direction;\n\n            // Get the stream object from the event. Create if necessary.\n            const streams: MediaStream[] = ev.streams.map(streamInfo => {\n                // Here we are making sure that we don't create stream objects that already exist\n                // So that event listeners do get the same object if it has been created before.\n                if (!this._remoteStreams.has(streamInfo.streamId)) {\n                    const stream = new MediaStream({\n                        streamId: streamInfo.streamId,\n                        streamReactTag: streamInfo.streamReactTag,\n                        tracks: []\n                    });\n\n                    this._remoteStreams.set(streamInfo.streamId, stream);\n                }\n\n                const stream = this._remoteStreams.get(streamInfo.streamId);\n\n                if (!stream?._tracks.includes(track)) {\n                    stream?._tracks.push(track);\n                }\n\n                return stream;\n            });\n\n            const eventData = {\n                streams,\n                transceiver,\n                track,\n                receiver: transceiver.receiver\n            };\n\n\n            this.dispatchEvent(new RTCTrackEvent('track', eventData));\n\n            streams.forEach(stream => {\n                stream.dispatchEvent(new MediaStreamTrackEvent('addtrack', { track }));\n            });\n\n            // Dispatch an unmute event for the track.\n            track._setMutedInternal(false);\n        }\n\n        log.debug(`${this._pcId} setRemoteDescription OK`);\n    }\n\n    async addIceCandidate(candidate): Promise<void> {\n        log.debug(`${this._pcId} addIceCandidate`);\n\n        if (!candidate || !candidate.candidate) {\n            // XXX end-of candidates is not implemented: https://bugs.chromium.org/p/webrtc/issues/detail?id=9218\n            return;\n        }\n\n        if ((candidate.sdpMLineIndex === null ||\n             candidate.sdpMLineIndex === undefined) &&\n            (candidate.sdpMid === null ||\n             candidate.sdpMid === undefined)\n        ) {\n            throw new TypeError('`sdpMLineIndex` and `sdpMid` must not be both null or undefined');\n        }\n\n        const newSdp = await WebRTCModule.peerConnectionAddICECandidate(\n            this._pcId,\n            RTCUtil.deepClone(candidate)\n        );\n\n        this.remoteDescription = new RTCSessionDescription(newSdp);\n    }\n\n    /**\n     * @brief Adds a new track to the {@link RTCPeerConnection},\n     * and indicates that it is contained in the specified {@link MediaStream}s.\n     * This method has to be synchronous as the W3C API expects a track to be returned\n     * @param {MediaStreamTrack} track The track to be added\n     * @param {...MediaStream} streams One or more {@link MediaStream}s the track needs to be added to\n     * https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack\n     */\n    addTrack(track: MediaStreamTrack, ...streams: MediaStream[]): RTCRtpSender {\n        log.debug(`${this._pcId} addTrack`);\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        if (this._trackExists(track)) {\n            throw new Error('Track already exists in a sender');\n        }\n\n        const streamIds = streams.map(s => s.id);\n        const result = WebRTCModule.peerConnectionAddTrack(this._pcId, track.id, { streamIds });\n\n        if (result === null) {\n            throw new Error('Could not add sender');\n        }\n\n        const { transceiverOrder, transceiver, sender } = result;\n\n        // According to the W3C docs, the sender could have been reused, and\n        // so we check if that is the case, and update accordingly.\n        const [ existingSender ] = this\n            .getSenders()\n            .filter(s => s.id === sender.id);\n\n        if (existingSender) {\n            // Update sender\n            existingSender._track = track;\n\n            // Update the corresponding transceiver as well\n            const [ existingTransceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === existingSender.id);\n\n            existingTransceiver._direction = transceiver.direction;\n            existingTransceiver._currentDirection = transceiver.currentDirection;\n\n            return existingSender;\n        }\n\n        // This is a new transceiver, should create a transceiver for it and add it\n        const newSender = new RTCRtpSender({ ...transceiver.sender, track });\n        const remoteTrack = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n        const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n        const newTransceiver = new RTCRtpTransceiver({\n            ...transceiver,\n            sender: newSender,\n            receiver: newReceiver,\n        });\n\n        this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n\n        return newSender;\n    }\n\n    addTransceiver(source: 'audio' | 'video' | MediaStreamTrack, init): RTCRtpTransceiver {\n        log.debug(`${this._pcId} addTransceiver`);\n\n        let src = {};\n\n        if (source === 'audio') {\n            src = { type: 'audio' };\n        } else if (source === 'video') {\n            src = { type: 'video' };\n        } else {\n            src = { trackId: source.id };\n        }\n\n        // Extract the stream ids\n        if (init && init.streams) {\n            init.streamIds = init.streams.map(stream => stream.id);\n        }\n\n        const result = WebRTCModule.peerConnectionAddTransceiver(this._pcId, { ...src, init: { ...init } });\n\n        if (result === null) {\n            throw new Error('Transceiver could not be added');\n        }\n\n        const t = result.transceiver;\n        let track: MediaStreamTrack | null = null;\n\n        if (typeof source === 'string') {\n            if (t.sender.track) {\n                track = new MediaStreamTrack(t.sender.track);\n            }\n        } else {\n            // 'source' is a MediaStreamTrack\n            track = source;\n        }\n\n        const sender = new RTCRtpSender({ ...t.sender, track });\n        const remoteTrack = t.receiver.track ? new MediaStreamTrack(t.receiver.track) : null;\n        const receiver = new RTCRtpReceiver({ ...t.receiver, track: remoteTrack });\n        const transceiver = new RTCRtpTransceiver({\n            ...result.transceiver,\n            sender,\n            receiver\n        });\n\n        this._insertTransceiverSorted(result.transceiverOrder, transceiver);\n\n        return transceiver;\n    }\n\n    removeTrack(sender: RTCRtpSender) {\n        log.debug(`${this._pcId} removeTrack`);\n\n        if (this._pcId !== sender._peerConnectionId) {\n            throw new Error('Sender does not belong to this peer connection');\n        }\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        const existingSender = this\n            .getSenders()\n            .find(s => s === sender);\n\n        if (!existingSender) {\n            throw new Error('Sender does not exist');\n        }\n\n        if (existingSender.track === null) {\n            return;\n        }\n\n        // Blocking!\n        WebRTCModule.peerConnectionRemoveTrack(this._pcId, sender.id);\n\n        existingSender._track = null;\n\n        const [ existingTransceiver ] = this\n            .getTransceivers()\n            .filter(t => t.sender.id === existingSender.id);\n\n        existingTransceiver._direction = existingTransceiver.direction === 'sendrecv' ? 'recvonly' : 'inactive';\n    }\n\n    async getStats(selector?: MediaStreamTrack) {\n        log.debug(`${this._pcId} getStats`);\n\n        if (!selector) {\n            const data = await WebRTCModule.peerConnectionGetStats(this._pcId);\n\n            /**\n             * On both Android and iOS it is faster to construct a single\n             * JSON string representing the Map of StatsReports and have it\n             * pass through the React Native bridge rather than the Map of\n             * StatsReports. While the implementations do try to be faster in\n             * general, the stress is on being faster to pass through the React\n             * Native bridge which is a bottleneck that tends to be visible in\n             * the UI when there is congestion involving UI-related passing.\n             */\n            return new Map(JSON.parse(data));\n        } else {\n            const senders = this.getSenders().filter(s => s.track === selector);\n            const receivers = this.getReceivers().filter(r => r.track === selector);\n            const matches = senders.length + receivers.length;\n\n            if (matches === 0) {\n                throw new Error('Invalid selector: could not find matching sender / receiver');\n            } else if (matches > 1) {\n                throw new Error('Invalid selector: multiple matching senders / receivers');\n            } else {\n                const sr = senders[0] || receivers[0];\n\n                return sr.getStats();\n            }\n        }\n    }\n\n    getTransceivers(): RTCRtpTransceiver[] {\n        return this._transceivers.map(e => e.transceiver);\n    }\n\n    getSenders(): RTCRtpSender[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.sender);\n    }\n\n    getReceivers(): RTCRtpReceiver[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.receiver);\n    }\n\n    close(): void {\n        log.debug(`${this._pcId} close`);\n\n        if (this.connectionState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.peerConnectionClose(this._pcId);\n\n        // Mark transceivers as stopped.\n        this._transceivers.forEach(({ transceiver })=> {\n            transceiver._setStopped();\n        });\n    }\n\n    restartIce(): void {\n        WebRTCModule.peerConnectionRestartIce(this._pcId);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'peerConnectionOnRenegotiationNeeded', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.dispatchEvent(new Event('negotiationneeded'));\n        });\n\n        addListener(this, 'peerConnectionIceConnectionChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceConnectionState = ev.iceConnectionState;\n\n            this.dispatchEvent(new Event('iceconnectionstatechange'));\n        });\n\n        addListener(this, 'peerConnectionStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.connectionState = ev.connectionState;\n\n            this.dispatchEvent(new Event('connectionstatechange'));\n\n            if (ev.connectionState === 'closed') {\n                // This PeerConnection is done, clean up.\n                removeListener(this);\n\n                WebRTCModule.peerConnectionDispose(this._pcId);\n            }\n        });\n\n        addListener(this, 'peerConnectionSignalingStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.signalingState = ev.signalingState;\n\n            this.dispatchEvent(new Event('signalingstatechange'));\n        });\n\n        // Consider moving away from this event: https://github.com/WebKit/WebKit/pull/3953\n        addListener(this, 'peerConnectionOnTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} ontrack`);\n\n            // NOTE: We need to make sure the track event fires right before sRD completes,\n            // so we queue them up here and dispatch the events when sRD fires, but before completing it.\n            // In the future we should probably implement out own logic and drop this event altogether.\n            this._pendingTrackEvents.push(ev);\n        });\n\n        addListener(this, 'peerConnectionOnRemoveTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} onremovetrack ${ev.receiverId}`);\n\n            const receiver = this.getReceivers().find(r => r.id === ev.receiverId);\n            const track = receiver?.track;\n\n            if (receiver && track) {\n                // As per the spec:\n                // - Remove the track from any media streams that were previously passed to the `track` event.\n                // https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-removetrack,\n                // - Mark the track as muted:\n                // https://w3c.github.io/webrtc-pc/#process-remote-track-removal\n                for (const stream of this._remoteStreams.values()) {\n                    if (stream._tracks.includes(track)) {\n                        const trackIdx = stream._tracks.indexOf(track);\n\n                        log.debug(`${this._pcId} removetrack ${track.id}`);\n\n                        stream._tracks.splice(trackIdx, 1);\n\n                        stream.dispatchEvent(new MediaStreamTrackEvent('removetrack', { track }));\n\n                        // Dispatch a mute event for the track.\n                        track._setMutedInternal(true);\n                    }\n                }\n            }\n        });\n\n        addListener(this, 'peerConnectionGotICECandidate', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const sdpInfo = ev.sdp;\n\n            // Can happen when doing a rollback.\n            if (sdpInfo.type && sdpInfo.sdp) {\n                this.localDescription = new RTCSessionDescription(sdpInfo);\n            } else {\n                this.localDescription = null;\n            }\n\n            const candidate = new RTCIceCandidate(ev.candidate);\n\n            this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate }));\n        });\n\n        addListener(this, 'peerConnectionIceGatheringChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceGatheringState = ev.iceGatheringState;\n\n            if (this.iceGatheringState === 'complete') {\n                const sdpInfo = ev.sdp;\n\n                // Can happen when doing a rollback.\n                if (sdpInfo.type && sdpInfo.sdp) {\n                    this.localDescription = new RTCSessionDescription(sdpInfo);\n                } else {\n                    this.localDescription = null;\n                }\n\n                this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate: null }));\n            }\n\n            this.dispatchEvent(new Event('icegatheringstatechange'));\n        });\n\n        addListener(this, 'peerConnectionDidOpenDataChannel', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const channel = new RTCDataChannel(ev.dataChannel);\n\n            this.dispatchEvent(new RTCDataChannelEvent('datachannel', { channel }));\n\n            // Send 'open' event. Native doesn't update the state since it's already\n            // set at this point.\n            channel.dispatchEvent(new RTCDataChannelEvent('open', { channel }));\n        });\n\n        addListener(this, 'mediaStreamTrackMuteChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const [\n                track\n            ] = this.getReceivers().map(r => r.track).filter(t => t?.id === ev.trackId);\n\n            if (track) {\n                track._setMutedInternal(ev.muted);\n            }\n        });\n    }\n\n    /**\n     * Creates a new RTCDataChannel object with the given label. The\n     * RTCDataChannelInit dictionary can be used to configure properties of the\n     * underlying channel such as data reliability.\n     *\n     * @param {string} label - the value with which the label attribute of the new\n     * instance is to be initialized\n     * @param {RTCDataChannelInit} dataChannelDict - an optional dictionary of\n     * values with which to initialize corresponding attributes of the new\n     * instance such as id\n     */\n    createDataChannel(label: string, dataChannelDict?: RTCDataChannelInit): RTCDataChannel {\n        if (arguments.length === 0) {\n            throw new TypeError('1 argument required, but 0 present');\n        }\n\n        if (dataChannelDict && 'id' in dataChannelDict) {\n            const id = dataChannelDict.id;\n\n            if (typeof id !== 'number') {\n                throw new TypeError('DataChannel id must be a number: ' + id);\n            }\n        }\n\n        const channelInfo = WebRTCModule.createDataChannel(this._pcId, String(label), dataChannelDict);\n\n        if (channelInfo === null) {\n            throw new TypeError('Failed to create new DataChannel');\n        }\n\n        return new RTCDataChannel(channelInfo);\n    }\n\n    /**\n     * Check whether a media stream track exists already in a sender.\n     * See https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack for more information\n     */\n    _trackExists(track: MediaStreamTrack): boolean {\n        const [ sender ] = this\n            .getSenders()\n            .filter(\n                sender => sender.track?.id === track.id\n            );\n\n        return sender? true : false;\n    }\n\n    /**\n     * Updates transceivers after offer/answer updates if necessary.\n     */\n    _updateTransceivers(transceiverUpdates, removeStopped = false) {\n        for (const update of transceiverUpdates) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === update.transceiverId);\n\n            if (!transceiver) {\n                continue;\n            }\n\n            if (update.currentDirection) {\n                transceiver._currentDirection = update.currentDirection;\n            }\n\n            transceiver._mid = update.mid;\n            transceiver._stopped = Boolean(update.isStopped);\n            transceiver._sender._rtpParameters = new RTCRtpSendParameters(update.senderRtpParameters);\n            transceiver._receiver._rtpParameters = new RTCRtpReceiveParameters(update.receiverRtpParameters);\n        }\n\n        if (removeStopped) {\n            const stopped = this.getTransceivers().filter(t => t.stopped);\n            const newTransceivers = this._transceivers.filter(t => !stopped.includes(t.transceiver));\n\n            this._transceivers = newTransceivers;\n        }\n    }\n\n    /**\n     * Inserts transceiver into the transceiver array in the order they are created (timestamp).\n     * @param order an index that refers to when it it was created relatively.\n     * @param transceiver the transceiver object to be inserted.\n     */\n    _insertTransceiverSorted(order: number, transceiver: RTCRtpTransceiver) {\n        this._transceivers.push({ order, transceiver });\n        this._transceivers.sort((a, b) => a.order - b.order);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCPeerConnection.prototype;\n\ndefineEventAttribute(proto, 'connectionstatechange');\ndefineEventAttribute(proto, 'icecandidate');\ndefineEventAttribute(proto, 'icecandidateerror');\ndefineEventAttribute(proto, 'iceconnectionstatechange');\ndefineEventAttribute(proto, 'icegatheringstatechange');\ndefineEventAttribute(proto, 'negotiationneeded');\ndefineEventAttribute(proto, 'signalingstatechange');\ndefineEventAttribute(proto, 'datachannel');\ndefineEventAttribute(proto, 'track');\ndefineEventAttribute(proto, 'error');\n"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"names":["EventTarget","Event","defineEventAttribute","NativeModules","addListener","removeListener","Logger","MediaStream","MediaStreamTrack","MediaStreamTrackEvent","RTCDataChannel","RTCDataChannelEvent","RTCIceCandidate","RTCIceCandidateEvent","RTCRtpReceiveParameters","RTCRtpReceiver","RTCRtpSendParameters","RTCRtpSender","RTCRtpTransceiver","RTCSessionDescription","RTCTrackEvent","RTCUtil","log","WebRTCModule","nextPeerConnectionId","RTCPeerConnection","constructor","configuration","_defineProperty","_pcId","_configuration$iceSer","servers","iceServers","server","urls","url","Array","isArray","map","toLowerCase","filter","s","peerConnectionInit","Error","_transceivers","_remoteStreams","Map","_pendingTrackEvents","_registerEvents","debug","createOffer","options","sdpInfo","newTransceivers","transceiversInfo","peerConnectionCreateOffer","normalizeOfferOptions","forEach","t","transceiverOrder","transceiver","newSender","sender","track","remoteTrack","receiver","newReceiver","newTransceiver","_insertTransceiverSorted","_updateTransceivers","createAnswer","peerConnectionCreateAnswer","setConfiguration","peerConnectionSetConfiguration","setLocalDescription","sessionDescription","_desc","desc","_sessionDescription$s","type","sdp","isSdpTypeValid","peerConnectionSetLocalDescription","localDescription","setRemoteDescription","_sessionDescription$s2","_desc$type","Promise","reject","peerConnectionSetRemoteDescription","remoteDescription","pendingTrackEvents","ev","getTransceivers","id","_mid","mid","_currentDirection","currentDirection","_direction","direction","streams","streamInfo","has","streamId","stream","streamReactTag","tracks","set","get","_tracks","includes","push","eventData","dispatchEvent","_setMutedInternal","addIceCandidate","candidate","sdpMLineIndex","undefined","sdpMid","TypeError","newSdp","peerConnectionAddICECandidate","deepClone","addTrack","connectionState","_trackExists","_len","arguments","length","_key","streamIds","result","peerConnectionAddTrack","existingSender","getSenders","_track","existingTransceiver","addTransceiver","source","init","src","trackId","peerConnectionAddTransceiver","removeTrack","_peerConnectionId","find","peerConnectionRemoveTrack","getStats","selector","data","peerConnectionGetStats","JSON","parse","senders","receivers","getReceivers","r","matches","sr","e","stopped","close","peerConnectionClose","_ref","_setStopped","restartIce","peerConnectionRestartIce","pcId","iceConnectionState","peerConnectionDispose","signalingState","receiverId","values","trackIdx","indexOf","splice","iceGatheringState","channel","dataChannel","muted","createDataChannel","label","dataChannelDict","channelInfo","String","_sender$track","transceiverUpdates","removeStopped","update","transceiverId","_stopped","Boolean","isStopped","_sender","_rtpParameters","senderRtpParameters","_receiver","receiverRtpParameters","order","sort","a","b","proto","prototype"],"sources":["RTCPeerConnection.ts"],"sourcesContent":["import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';\nimport { NativeModules } from 'react-native';\n\nimport { addListener, removeListener } from './EventEmitter';\nimport Logger from './Logger';\nimport MediaStream from './MediaStream';\nimport MediaStreamTrack from './MediaStreamTrack';\nimport MediaStreamTrackEvent from './MediaStreamTrackEvent';\nimport RTCDataChannel from './RTCDataChannel';\nimport RTCDataChannelEvent from './RTCDataChannelEvent';\nimport RTCIceCandidate from './RTCIceCandidate';\nimport RTCIceCandidateEvent from './RTCIceCandidateEvent';\nimport RTCRtpReceiveParameters from './RTCRtpReceiveParameters';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpSendParameters from './RTCRtpSendParameters';\nimport RTCRtpSender from './RTCRtpSender';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\nimport RTCSessionDescription, { RTCSessionDescriptionInit } from './RTCSessionDescription';\nimport RTCTrackEvent from './RTCTrackEvent';\nimport * as RTCUtil from './RTCUtil';\nimport { RTCOfferOptions } from './RTCUtil';\n\nconst log = new Logger('pc');\nconst { WebRTCModule } = NativeModules;\n\ntype RTCSignalingState =\n    | 'stable'\n    | 'have-local-offer'\n    | 'have-remote-offer'\n    | 'have-local-pranswer'\n    | 'have-remote-pranswer'\n    | 'closed';\n\ntype RTCIceGatheringState = 'new' | 'gathering' | 'complete';\n\ntype RTCPeerConnectionState = 'new' | 'connecting' | 'connected' | 'disconnected' | 'failed' | 'closed';\n\ntype RTCIceConnectionState = 'new' | 'checking' | 'connected' | 'completed' | 'failed' | 'disconnected' | 'closed';\n\ntype RTCDataChannelInit = {\n    ordered?: boolean,\n    maxPacketLifeTime?: number,\n    maxRetransmits?: number,\n    protocol?: string,\n    negotiated?: boolean,\n    id?: number\n};\n\ntype RTCIceServer = {\n    credential?: string,\n    url?: string, // Deprecated.\n    urls?: string | string[],\n    username?: string\n};\n\ntype RTCConfiguration = {\n    bundlePolicy?: 'balanced' | 'max-compat' | 'max-bundle',\n    iceCandidatePoolSize?: number,\n    iceServers?: RTCIceServer[],\n    iceTransportPolicy?: 'all' | 'relay',\n    rtcpMuxPolicy?: 'negotiate' | 'require'\n};\n\ntype RTCPeerConnectionEventMap = {\n    connectionstatechange: Event<'connectionstatechange'>\n    icecandidate: RTCIceCandidateEvent<'icecandidate'>\n    icecandidateerror: RTCIceCandidateEvent<'icecandidateerror'>\n    iceconnectionstatechange: Event<'iceconnectionstatechange'>\n    icegatheringstatechange: Event<'icegatheringstatechange'>\n    negotiationneeded: Event<'negotiationneeded'>\n    signalingstatechange: Event<'signalingstatechange'>\n    datachannel: RTCDataChannelEvent<'datachannel'>\n    track: RTCTrackEvent<'track'>\n    error: Event<'error'>\n}\n\nlet nextPeerConnectionId = 0;\n\nexport default class RTCPeerConnection extends EventTarget<RTCPeerConnectionEventMap> {\n    localDescription: RTCSessionDescription | null = null;\n    remoteDescription: RTCSessionDescription | null = null;\n    signalingState: RTCSignalingState = 'stable';\n    iceGatheringState: RTCIceGatheringState = 'new';\n    connectionState: RTCPeerConnectionState = 'new';\n    iceConnectionState: RTCIceConnectionState = 'new';\n\n    _pcId: number;\n    _transceivers: { order: number, transceiver: RTCRtpTransceiver }[];\n    _remoteStreams: Map<string, MediaStream>;\n    _pendingTrackEvents: any[];\n\n    constructor(configuration?: RTCConfiguration) {\n        super();\n\n        this._pcId = nextPeerConnectionId++;\n\n        // Sanitize ICE servers.\n        if (configuration) {\n            const servers = configuration?.iceServers ?? [];\n\n            for (const server of servers) {\n                let urls = server.url || server.urls;\n\n                delete server.url;\n                delete server.urls;\n\n                if (!urls) {\n                    continue;\n                }\n\n                if (!Array.isArray(urls)) {\n                    urls = [ urls ];\n                }\n\n                // Native WebRTC does case sensitive parsing.\n                server.urls = urls.map(url => url.toLowerCase());\n            }\n\n            // Filter out bogus servers.\n            configuration.iceServers = servers.filter(s => s.urls);\n        }\n\n        if (!WebRTCModule.peerConnectionInit(configuration, this._pcId)) {\n            throw new Error('Failed to initialize PeerConnection, check the native logs!');\n        }\n\n        this._transceivers = [];\n        this._remoteStreams = new Map();\n        this._pendingTrackEvents = [];\n\n        this._registerEvents();\n\n        log.debug(`${this._pcId} ctor`);\n    }\n\n    async createOffer(options?:RTCOfferOptions) {\n        log.debug(`${this._pcId} createOffer`);\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateOffer(this._pcId, RTCUtil.normalizeOfferOptions(options));\n\n        log.debug(`${this._pcId} createOffer OK`);\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    async createAnswer() {\n        log.debug(`${this._pcId} createAnswer`);\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionCreateAnswer(this._pcId, {});\n\n        this._updateTransceivers(transceiversInfo);\n\n        return sdpInfo;\n    }\n\n    setConfiguration(configuration): void {\n        WebRTCModule.peerConnectionSetConfiguration(configuration, this._pcId);\n    }\n\n    async setLocalDescription(sessionDescription?: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setLocalDescription`);\n\n        let desc;\n\n        if (sessionDescription) {\n            desc = {\n                type: sessionDescription.type,\n                sdp: sessionDescription.sdp ?? ''\n            };\n\n            if (!RTCUtil.isSdpTypeValid(desc.type)) {\n                throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n            }\n        } else {\n            desc = null;\n        }\n\n        const {\n            sdpInfo,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetLocalDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.localDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.localDescription = null;\n        }\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc?.type === 'answer');\n\n        log.debug(`${this._pcId} setLocalDescription OK`);\n    }\n\n    async setRemoteDescription(sessionDescription: RTCSessionDescription | RTCSessionDescriptionInit): Promise<void> {\n        log.debug(`${this._pcId} setRemoteDescription`);\n\n        if (!sessionDescription) {\n            return Promise.reject(new Error('No session description provided'));\n        }\n\n        const desc = {\n            type: sessionDescription.type,\n            sdp: sessionDescription.sdp ?? ''\n        };\n\n        if (!RTCUtil.isSdpTypeValid(desc.type ?? '')) {\n            throw new Error(`Invalid session description: invalid type: ${desc.type}`);\n        }\n\n        const {\n            sdpInfo,\n            newTransceivers,\n            transceiversInfo\n        } = await WebRTCModule.peerConnectionSetRemoteDescription(this._pcId, desc);\n\n        if (sdpInfo.type && sdpInfo.sdp) {\n            this.remoteDescription = new RTCSessionDescription(sdpInfo);\n        } else {\n            this.remoteDescription = null;\n        }\n\n        newTransceivers?.forEach(t => {\n            const { transceiverOrder, transceiver } = t;\n            const newSender = new RTCRtpSender({ ...transceiver.sender, track: null });\n            const remoteTrack\n                = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n            const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n            const newTransceiver = new RTCRtpTransceiver({\n                ...transceiver,\n                sender: newSender,\n                receiver: newReceiver,\n            });\n\n            this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n        });\n\n        this._updateTransceivers(transceiversInfo, /* removeStopped */ desc.type === 'answer');\n\n        // Fire track events. They must fire before sRD resolves.\n        const pendingTrackEvents = this._pendingTrackEvents;\n\n        this._pendingTrackEvents = [];\n\n        for (const ev of pendingTrackEvents) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.receiver.id ===  ev.receiver.id);\n\n            // We need to fire this event for an existing track sometimes, like\n            // when the transceiver direction (on the sending side) switches from\n            // sendrecv to recvonly and then back.\n\n            // @ts-ignore\n            const track: MediaStreamTrack = transceiver.receiver.track;\n\n            transceiver._mid = ev.transceiver.mid;\n            transceiver._currentDirection = ev.transceiver.currentDirection;\n            transceiver._direction = ev.transceiver.direction;\n\n            // Get the stream object from the event. Create if necessary.\n            const streams: MediaStream[] = ev.streams.map(streamInfo => {\n                // Here we are making sure that we don't create stream objects that already exist\n                // So that event listeners do get the same object if it has been created before.\n                if (!this._remoteStreams.has(streamInfo.streamId)) {\n                    const stream = new MediaStream({\n                        streamId: streamInfo.streamId,\n                        streamReactTag: streamInfo.streamReactTag,\n                        tracks: []\n                    });\n\n                    this._remoteStreams.set(streamInfo.streamId, stream);\n                }\n\n                const stream = this._remoteStreams.get(streamInfo.streamId);\n\n                if (!stream?._tracks.includes(track)) {\n                    stream?._tracks.push(track);\n                }\n\n                return stream;\n            });\n\n            const eventData = {\n                streams,\n                transceiver,\n                track,\n                receiver: transceiver.receiver\n            };\n\n\n            this.dispatchEvent(new RTCTrackEvent('track', eventData));\n\n            streams.forEach(stream => {\n                stream.dispatchEvent(new MediaStreamTrackEvent('addtrack', { track }));\n            });\n\n            // Dispatch an unmute event for the track.\n            track._setMutedInternal(false);\n        }\n\n        log.debug(`${this._pcId} setRemoteDescription OK`);\n    }\n\n    async addIceCandidate(candidate): Promise<void> {\n        log.debug(`${this._pcId} addIceCandidate`);\n\n        if (!candidate || !candidate.candidate) {\n            // XXX end-of candidates is not implemented: https://bugs.chromium.org/p/webrtc/issues/detail?id=9218\n            return;\n        }\n\n        if ((candidate.sdpMLineIndex === null ||\n             candidate.sdpMLineIndex === undefined) &&\n            (candidate.sdpMid === null ||\n             candidate.sdpMid === undefined)\n        ) {\n            throw new TypeError('`sdpMLineIndex` and `sdpMid` must not be both null or undefined');\n        }\n\n        const newSdp = await WebRTCModule.peerConnectionAddICECandidate(\n            this._pcId,\n            RTCUtil.deepClone(candidate)\n        );\n\n        this.remoteDescription = new RTCSessionDescription(newSdp);\n    }\n\n    /**\n     * @brief Adds a new track to the {@link RTCPeerConnection},\n     * and indicates that it is contained in the specified {@link MediaStream}s.\n     * This method has to be synchronous as the W3C API expects a track to be returned\n     * @param {MediaStreamTrack} track The track to be added\n     * @param {...MediaStream} streams One or more {@link MediaStream}s the track needs to be added to\n     * https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack\n     */\n    addTrack(track: MediaStreamTrack, ...streams: MediaStream[]): RTCRtpSender {\n        log.debug(`${this._pcId} addTrack`);\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        if (this._trackExists(track)) {\n            throw new Error('Track already exists in a sender');\n        }\n\n        const streamIds = streams.map(s => s.id);\n        const result = WebRTCModule.peerConnectionAddTrack(this._pcId, track.id, { streamIds });\n\n        if (result === null) {\n            throw new Error('Could not add sender');\n        }\n\n        const { transceiverOrder, transceiver, sender } = result;\n\n        // According to the W3C docs, the sender could have been reused, and\n        // so we check if that is the case, and update accordingly.\n        const [ existingSender ] = this\n            .getSenders()\n            .filter(s => s.id === sender.id);\n\n        if (existingSender) {\n            // Update sender\n            existingSender._track = track;\n\n            // Update the corresponding transceiver as well\n            const [ existingTransceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === existingSender.id);\n\n            existingTransceiver._direction = transceiver.direction;\n            existingTransceiver._currentDirection = transceiver.currentDirection;\n\n            return existingSender;\n        }\n\n        // This is a new transceiver, should create a transceiver for it and add it\n        const newSender = new RTCRtpSender({ ...transceiver.sender, track });\n        const remoteTrack = transceiver.receiver.track ? new MediaStreamTrack(transceiver.receiver.track) : null;\n        const newReceiver = new RTCRtpReceiver({ ...transceiver.receiver, track: remoteTrack });\n        const newTransceiver = new RTCRtpTransceiver({\n            ...transceiver,\n            sender: newSender,\n            receiver: newReceiver,\n        });\n\n        this._insertTransceiverSorted(transceiverOrder, newTransceiver);\n\n        return newSender;\n    }\n\n    addTransceiver(source: 'audio' | 'video' | MediaStreamTrack, init): RTCRtpTransceiver {\n        log.debug(`${this._pcId} addTransceiver`);\n\n        let src = {};\n\n        if (source === 'audio') {\n            src = { type: 'audio' };\n        } else if (source === 'video') {\n            src = { type: 'video' };\n        } else {\n            src = { trackId: source.id };\n        }\n\n        // Extract the stream ids\n        if (init && init.streams) {\n            init.streamIds = init.streams.map(stream => stream.id);\n        }\n\n        const result = WebRTCModule.peerConnectionAddTransceiver(this._pcId, { ...src, init: { ...init } });\n\n        if (result === null) {\n            throw new Error('Transceiver could not be added');\n        }\n\n        const t = result.transceiver;\n        let track: MediaStreamTrack | null = null;\n\n        if (typeof source === 'string') {\n            if (t.sender.track) {\n                track = new MediaStreamTrack(t.sender.track);\n            }\n        } else {\n            // 'source' is a MediaStreamTrack\n            track = source;\n        }\n\n        const sender = new RTCRtpSender({ ...t.sender, track });\n        const remoteTrack = t.receiver.track ? new MediaStreamTrack(t.receiver.track) : null;\n        const receiver = new RTCRtpReceiver({ ...t.receiver, track: remoteTrack });\n        const transceiver = new RTCRtpTransceiver({\n            ...result.transceiver,\n            sender,\n            receiver\n        });\n\n        this._insertTransceiverSorted(result.transceiverOrder, transceiver);\n\n        return transceiver;\n    }\n\n    removeTrack(sender: RTCRtpSender) {\n        log.debug(`${this._pcId} removeTrack`);\n\n        if (this._pcId !== sender._peerConnectionId) {\n            throw new Error('Sender does not belong to this peer connection');\n        }\n\n        if (this.connectionState === 'closed') {\n            throw new Error('Peer Connection is closed');\n        }\n\n        const existingSender = this\n            .getSenders()\n            .find(s => s === sender);\n\n        if (!existingSender) {\n            throw new Error('Sender does not exist');\n        }\n\n        if (existingSender.track === null) {\n            return;\n        }\n\n        // Blocking!\n        WebRTCModule.peerConnectionRemoveTrack(this._pcId, sender.id);\n\n        existingSender._track = null;\n\n        const [ existingTransceiver ] = this\n            .getTransceivers()\n            .filter(t => t.sender.id === existingSender.id);\n\n        existingTransceiver._direction = existingTransceiver.direction === 'sendrecv' ? 'recvonly' : 'inactive';\n    }\n\n    async getStats(selector?: MediaStreamTrack) {\n        log.debug(`${this._pcId} getStats`);\n\n        if (!selector) {\n            const data = await WebRTCModule.peerConnectionGetStats(this._pcId);\n\n            /**\n             * On both Android and iOS it is faster to construct a single\n             * JSON string representing the Map of StatsReports and have it\n             * pass through the React Native bridge rather than the Map of\n             * StatsReports. While the implementations do try to be faster in\n             * general, the stress is on being faster to pass through the React\n             * Native bridge which is a bottleneck that tends to be visible in\n             * the UI when there is congestion involving UI-related passing.\n             */\n            return new Map(JSON.parse(data));\n        } else {\n            const senders = this.getSenders().filter(s => s.track === selector);\n            const receivers = this.getReceivers().filter(r => r.track === selector);\n            const matches = senders.length + receivers.length;\n\n            if (matches === 0) {\n                throw new Error('Invalid selector: could not find matching sender / receiver');\n            } else if (matches > 1) {\n                throw new Error('Invalid selector: multiple matching senders / receivers');\n            } else {\n                const sr = senders[0] || receivers[0];\n\n                return sr.getStats();\n            }\n        }\n    }\n\n    getTransceivers(): RTCRtpTransceiver[] {\n        return this._transceivers.map(e => e.transceiver);\n    }\n\n    getSenders(): RTCRtpSender[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.sender);\n    }\n\n    getReceivers(): RTCRtpReceiver[] {\n        return this._transceivers.filter(e => !e.transceiver.stopped).map(e => e.transceiver.receiver);\n    }\n\n    close(): void {\n        log.debug(`${this._pcId} close`);\n\n        if (this.connectionState === 'closed') {\n            return;\n        }\n\n        WebRTCModule.peerConnectionClose(this._pcId);\n\n        // Mark transceivers as stopped.\n        this._transceivers.forEach(({ transceiver })=> {\n            transceiver._setStopped();\n        });\n    }\n\n    restartIce(): void {\n        WebRTCModule.peerConnectionRestartIce(this._pcId);\n    }\n\n    _registerEvents(): void {\n        addListener(this, 'peerConnectionOnRenegotiationNeeded', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.dispatchEvent(new Event('negotiationneeded'));\n        });\n\n        addListener(this, 'peerConnectionIceConnectionChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceConnectionState = ev.iceConnectionState;\n\n            this.dispatchEvent(new Event('iceconnectionstatechange'));\n        });\n\n        addListener(this, 'peerConnectionStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.connectionState = ev.connectionState;\n\n            this.dispatchEvent(new Event('connectionstatechange'));\n\n            if (ev.connectionState === 'closed') {\n                // This PeerConnection is done, clean up.\n                removeListener(this);\n\n                WebRTCModule.peerConnectionDispose(this._pcId);\n            }\n        });\n\n        addListener(this, 'peerConnectionSignalingStateChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.signalingState = ev.signalingState;\n\n            this.dispatchEvent(new Event('signalingstatechange'));\n        });\n\n        // Consider moving away from this event: https://github.com/WebKit/WebKit/pull/3953\n        addListener(this, 'peerConnectionOnTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} ontrack`);\n\n            // NOTE: We need to make sure the track event fires right before sRD completes,\n            // so we queue them up here and dispatch the events when sRD fires, but before completing it.\n            // In the future we should probably implement out own logic and drop this event altogether.\n            this._pendingTrackEvents.push(ev);\n        });\n\n        addListener(this, 'peerConnectionOnRemoveTrack', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            log.debug(`${this._pcId} onremovetrack ${ev.receiverId}`);\n\n            const receiver = this.getReceivers().find(r => r.id === ev.receiverId);\n            const track = receiver?.track;\n\n            if (receiver && track) {\n                // As per the spec:\n                // - Remove the track from any media streams that were previously passed to the `track` event.\n                // https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-removetrack,\n                // - Mark the track as muted:\n                // https://w3c.github.io/webrtc-pc/#process-remote-track-removal\n                for (const stream of this._remoteStreams.values()) {\n                    if (stream._tracks.includes(track)) {\n                        const trackIdx = stream._tracks.indexOf(track);\n\n                        log.debug(`${this._pcId} removetrack ${track.id}`);\n\n                        stream._tracks.splice(trackIdx, 1);\n\n                        stream.dispatchEvent(new MediaStreamTrackEvent('removetrack', { track }));\n\n                        // Dispatch a mute event for the track.\n                        track._setMutedInternal(true);\n                    }\n                }\n            }\n        });\n\n        addListener(this, 'peerConnectionGotICECandidate', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const sdpInfo = ev.sdp;\n\n            // Can happen when doing a rollback.\n            if (sdpInfo.type && sdpInfo.sdp) {\n                this.localDescription = new RTCSessionDescription(sdpInfo);\n            } else {\n                this.localDescription = null;\n            }\n\n            const candidate = new RTCIceCandidate(ev.candidate);\n\n            this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate }));\n        });\n\n        addListener(this, 'peerConnectionIceGatheringChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            this.iceGatheringState = ev.iceGatheringState;\n\n            if (this.iceGatheringState === 'complete') {\n                const sdpInfo = ev.sdp;\n\n                // Can happen when doing a rollback.\n                if (sdpInfo.type && sdpInfo.sdp) {\n                    this.localDescription = new RTCSessionDescription(sdpInfo);\n                } else {\n                    this.localDescription = null;\n                }\n\n                this.dispatchEvent(new RTCIceCandidateEvent('icecandidate', { candidate: null }));\n            }\n\n            this.dispatchEvent(new Event('icegatheringstatechange'));\n        });\n\n        addListener(this, 'peerConnectionDidOpenDataChannel', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const channel = new RTCDataChannel(ev.dataChannel);\n\n            this.dispatchEvent(new RTCDataChannelEvent('datachannel', { channel }));\n\n            // Send 'open' event. Native doesn't update the state since it's already\n            // set at this point.\n            channel.dispatchEvent(new RTCDataChannelEvent('open', { channel }));\n        });\n\n        addListener(this, 'mediaStreamTrackMuteChanged', (ev: any) => {\n            if (ev.pcId !== this._pcId) {\n                return;\n            }\n\n            const [\n                track\n            ] = this.getReceivers().map(r => r.track).filter(t => t?.id === ev.trackId);\n\n            if (track) {\n                track._setMutedInternal(ev.muted);\n            }\n        });\n    }\n\n    /**\n     * Creates a new RTCDataChannel object with the given label. The\n     * RTCDataChannelInit dictionary can be used to configure properties of the\n     * underlying channel such as data reliability.\n     *\n     * @param {string} label - the value with which the label attribute of the new\n     * instance is to be initialized\n     * @param {RTCDataChannelInit} dataChannelDict - an optional dictionary of\n     * values with which to initialize corresponding attributes of the new\n     * instance such as id\n     */\n    createDataChannel(label: string, dataChannelDict?: RTCDataChannelInit): RTCDataChannel {\n        if (arguments.length === 0) {\n            throw new TypeError('1 argument required, but 0 present');\n        }\n\n        if (dataChannelDict && 'id' in dataChannelDict) {\n            const id = dataChannelDict.id;\n\n            if (typeof id !== 'number') {\n                throw new TypeError('DataChannel id must be a number: ' + id);\n            }\n        }\n\n        const channelInfo = WebRTCModule.createDataChannel(this._pcId, String(label), dataChannelDict);\n\n        if (channelInfo === null) {\n            throw new TypeError('Failed to create new DataChannel');\n        }\n\n        return new RTCDataChannel(channelInfo);\n    }\n\n    /**\n     * Check whether a media stream track exists already in a sender.\n     * See https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-addtrack for more information\n     */\n    _trackExists(track: MediaStreamTrack): boolean {\n        const [ sender ] = this\n            .getSenders()\n            .filter(\n                sender => sender.track?.id === track.id\n            );\n\n        return sender? true : false;\n    }\n\n    /**\n     * Updates transceivers after offer/answer updates if necessary.\n     */\n    _updateTransceivers(transceiverUpdates, removeStopped = false) {\n        for (const update of transceiverUpdates) {\n            const [ transceiver ] = this\n                .getTransceivers()\n                .filter(t => t.sender.id === update.transceiverId);\n\n            if (!transceiver) {\n                continue;\n            }\n\n            if (update.currentDirection) {\n                transceiver._currentDirection = update.currentDirection;\n            }\n\n            transceiver._mid = update.mid;\n            transceiver._stopped = Boolean(update.isStopped);\n            transceiver._sender._rtpParameters = new RTCRtpSendParameters(update.senderRtpParameters);\n            transceiver._receiver._rtpParameters = new RTCRtpReceiveParameters(update.receiverRtpParameters);\n        }\n\n        if (removeStopped) {\n            const stopped = this.getTransceivers().filter(t => t.stopped);\n            const newTransceivers = this._transceivers.filter(t => !stopped.includes(t.transceiver));\n\n            this._transceivers = newTransceivers;\n        }\n    }\n\n    /**\n     * Inserts transceiver into the transceiver array in the order they are created (timestamp).\n     * @param order an index that refers to when it it was created relatively.\n     * @param transceiver the transceiver object to be inserted.\n     */\n    _insertTransceiverSorted(order: number, transceiver: RTCRtpTransceiver) {\n        this._transceivers.push({ order, transceiver });\n        this._transceivers.sort((a, b) => a.order - b.order);\n    }\n}\n\n/**\n * Define the `onxxx` event handlers.\n */\nconst proto = RTCPeerConnection.prototype;\n\ndefineEventAttribute(proto, 'connectionstatechange');\ndefineEventAttribute(proto, 'icecandidate');\ndefineEventAttribute(proto, 'icecandidateerror');\ndefineEventAttribute(proto, 'iceconnectionstatechange');\ndefineEventAttribute(proto, 'icegatheringstatechange');\ndefineEventAttribute(proto, 'negotiationneeded');\ndefineEventAttribute(proto, 'signalingstatechange');\ndefineEventAttribute(proto, 'datachannel');\ndefineEventAttribute(proto, 'track');\ndefineEventAttribute(proto, 'error');\n"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js b/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js
index b582ea8..cd1be68 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js
@@ -1,5 +1,5 @@
 function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 /**
  * @eventClass
  * This event is fired whenever the Track is changed in PeerConnection.
diff --git a/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js.map b/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js.map
index 14ff932..d7ad31e 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js.map
+++ b/node_modules/@livekit/react-native-webrtc/lib/module/RTCTrackEvent.js.map
@@ -1 +1 @@
-{"version":3,"names":["Event","RTCTrackEvent","constructor","type","eventInitDict","_defineProperty","streams","transceiver","receiver","track"],"sources":["RTCTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim/index';\n\nimport MediaStream from './MediaStream';\nimport type MediaStreamTrack from './MediaStreamTrack';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\n\ntype TRACK_EVENTS = 'track'\n\ninterface IRTCTrackEventInitDict extends Event.EventInit {\n    streams: MediaStream[]\n    transceiver: RTCRtpTransceiver\n}\n\n/**\n * @eventClass\n * This event is fired whenever the Track is changed in PeerConnection.\n * @param {TRACK_EVENTS} type - The type of event.\n * @param {IRTCTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/track_event MDN} for details.\n */\nexport default class RTCTrackEvent<TEventType extends TRACK_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    readonly streams: MediaStream[] = [];\n\n    /** @eventProperty */\n    readonly transceiver: RTCRtpTransceiver;\n\n    /** @eventProperty */\n    readonly receiver: RTCRtpReceiver | null;\n\n    /** @eventProperty */\n    readonly track: MediaStreamTrack | null;\n\n    constructor(type: TEventType, eventInitDict: IRTCTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.streams = eventInitDict.streams;\n        this.transceiver = eventInitDict.transceiver;\n        this.receiver = eventInitDict.transceiver.receiver;\n        this.track = eventInitDict.transceiver.receiver ? eventInitDict.transceiver.receiver.track : null;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAc/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,aAAa,SAA0CD,KAAK,CAAa;EAC1F;;EAGA;;EAGA;;EAGA;;EAGAE,WAAWA,CAACC,IAAgB,EAAEC,aAAqC,EAAE;IACjE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA,kBAZG,EAAE;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAahC,IAAI,CAACC,OAAO,GAAGF,aAAa,CAACE,OAAO;IACpC,IAAI,CAACC,WAAW,GAAGH,aAAa,CAACG,WAAW;IAC5C,IAAI,CAACC,QAAQ,GAAGJ,aAAa,CAACG,WAAW,CAACC,QAAQ;IAClD,IAAI,CAACC,KAAK,GAAGL,aAAa,CAACG,WAAW,CAACC,QAAQ,GAAGJ,aAAa,CAACG,WAAW,CAACC,QAAQ,CAACC,KAAK,GAAG,IAAI;EACrG;AACJ"}
\ No newline at end of file
+{"version":3,"names":["Event","RTCTrackEvent","constructor","type","eventInitDict","_defineProperty","streams","transceiver","receiver","track"],"sources":["RTCTrackEvent.ts"],"sourcesContent":["import { Event } from 'event-target-shim';\n\nimport MediaStream from './MediaStream';\nimport type MediaStreamTrack from './MediaStreamTrack';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpTransceiver from './RTCRtpTransceiver';\n\ntype TRACK_EVENTS = 'track'\n\ninterface IRTCTrackEventInitDict extends Event.EventInit {\n    streams: MediaStream[]\n    transceiver: RTCRtpTransceiver\n}\n\n/**\n * @eventClass\n * This event is fired whenever the Track is changed in PeerConnection.\n * @param {TRACK_EVENTS} type - The type of event.\n * @param {IRTCTrackEventInitDict} eventInitDict - The event init properties.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/track_event MDN} for details.\n */\nexport default class RTCTrackEvent<TEventType extends TRACK_EVENTS> extends Event<TEventType> {\n    /** @eventProperty */\n    readonly streams: MediaStream[] = [];\n\n    /** @eventProperty */\n    readonly transceiver: RTCRtpTransceiver;\n\n    /** @eventProperty */\n    readonly receiver: RTCRtpReceiver | null;\n\n    /** @eventProperty */\n    readonly track: MediaStreamTrack | null;\n\n    constructor(type: TEventType, eventInitDict: IRTCTrackEventInitDict) {\n        super(type, eventInitDict);\n        this.streams = eventInitDict.streams;\n        this.transceiver = eventInitDict.transceiver;\n        this.receiver = eventInitDict.transceiver.receiver;\n        this.track = eventInitDict.transceiver.receiver ? eventInitDict.transceiver.receiver.track : null;\n    }\n}\n"],"mappings":";AAAA,SAASA,KAAK,QAAQ,yBAAyB;AAc/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,aAAa,SAA0CD,KAAK,CAAa;EAC1F;;EAGA;;EAGA;;EAGA;;EAGAE,WAAWA,CAACC,IAAgB,EAAEC,aAAqC,EAAE;IACjE,KAAK,CAACD,IAAI,EAAEC,aAAa,CAAC;IAACC,eAAA,kBAZG,EAAE;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAahC,IAAI,CAACC,OAAO,GAAGF,aAAa,CAACE,OAAO;IACpC,IAAI,CAACC,WAAW,GAAGH,aAAa,CAACG,WAAW;IAC5C,IAAI,CAACC,QAAQ,GAAGJ,aAAa,CAACG,WAAW,CAACC,QAAQ;IAClD,IAAI,CAACC,KAAK,GAAGL,aAAa,CAACG,WAAW,CAACC,QAAQ,GAAGJ,aAAa,CAACG,WAAW,CAACC,QAAQ,CAACC,KAAK,GAAG,IAAI;EACrG;AACJ"}
\ No newline at end of file
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaDevices.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaDevices.d.ts
index eac4e73..6546ec1 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaDevices.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaDevices.d.ts
@@ -1,4 +1,4 @@
-import { EventTarget, Event } from 'event-target-shim/index';
+import { EventTarget, Event } from 'event-target-shim';
 import { Constraints } from './getUserMedia';
 declare type MediaDevicesEventMap = {
     devicechange: Event<'devicechange'>;
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStream.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStream.d.ts
index 1a3c0c4..f747948 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStream.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStream.d.ts
@@ -1,4 +1,4 @@
-import { EventTarget } from 'event-target-shim/index';
+import { EventTarget } from 'event-target-shim';
 import MediaStreamTrack, { MediaStreamTrackInfo } from './MediaStreamTrack';
 import MediaStreamTrackEvent from './MediaStreamTrackEvent';
 declare type MediaStreamEventMap = {
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrack.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrack.d.ts
index cc1f652..b43d5c7 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrack.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrack.d.ts
@@ -1,4 +1,4 @@
-import { EventTarget, Event } from 'event-target-shim/index';
+import { EventTarget, Event } from 'event-target-shim';
 import { MediaTrackConstraints } from './Constraints';
 declare type MediaStreamTrackState = 'live' | 'ended';
 export declare type MediaStreamTrackInfo = {
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrackEvent.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrackEvent.d.ts
index 18da83f..5f54581 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrackEvent.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/MediaStreamTrackEvent.d.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 import type MediaStreamTrack from './MediaStreamTrack';
 declare type MEDIA_STREAM_EVENTS = 'addtrack' | 'removetrack';
 interface IMediaStreamTrackEventInitDict extends Event.EventInit {
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/MessageEvent.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/MessageEvent.d.ts
index aa0f6be..1798891 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/MessageEvent.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/MessageEvent.d.ts
@@ -1,5 +1,5 @@
 /// <reference types="react-native" />
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 export declare type MessageEventData = string | ArrayBuffer | Blob;
 declare type MESSAGE_EVENTS = 'message' | 'messageerror';
 interface IMessageEventInitDict extends Event.EventInit {
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannel.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannel.d.ts
index 82addbe..497f872 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannel.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannel.d.ts
@@ -1,4 +1,4 @@
-import { EventTarget } from 'event-target-shim/index';
+import { EventTarget } from 'event-target-shim';
 import MessageEvent from './MessageEvent';
 import RTCDataChannelEvent from './RTCDataChannelEvent';
 declare type RTCDataChannelState = 'connecting' | 'open' | 'closing' | 'closed';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannelEvent.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannelEvent.d.ts
index 5612c63..af3cccf 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannelEvent.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCDataChannelEvent.d.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 import type RTCDataChannel from './RTCDataChannel';
 declare type DATA_CHANNEL_EVENTS = 'open' | 'message' | 'bufferedamountlow' | 'closing' | 'close' | 'error' | 'datachannel';
 interface IRTCDataChannelEventInitDict extends Event.EventInit {
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCErrorEvent.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCErrorEvent.d.ts
index e52d544..40039df 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCErrorEvent.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCErrorEvent.d.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 declare type RTCPeerConnectionErrorFunc = 'addTransceiver' | 'getTransceivers' | 'addTrack' | 'removeTrack';
 /**
  * @brief This class Represents internal error happening on the native side as
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCFrameCryptor.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCFrameCryptor.d.ts
index 9f492b0..8e535ad 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCFrameCryptor.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCFrameCryptor.d.ts
@@ -1,4 +1,4 @@
-import { Event, EventTarget } from 'event-target-shim/index';
+import { Event, EventTarget } from 'event-target-shim';
 declare type FRAME_CRYPTOR_EVENTS = 'onframecryptorstatechanged';
 interface IRTCDataChannelEventInitDict extends Event.EventInit {
     frameCryptor: RTCFrameCryptor;
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCIceCandidateEvent.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCIceCandidateEvent.d.ts
index 518cbd5..3263ce1 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCIceCandidateEvent.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCIceCandidateEvent.d.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 import type RTCIceCandidate from './RTCIceCandidate';
 declare type RTC_ICECANDIDATE_EVENTS = 'icecandidate' | 'icecandidateerror';
 interface IRTCDataChannelEventInitDict extends Event.EventInit {
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCPeerConnection.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCPeerConnection.d.ts
index c20fdba..e37cd0d 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCPeerConnection.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCPeerConnection.d.ts
@@ -1,4 +1,4 @@
-import { EventTarget, Event } from 'event-target-shim/index';
+import { EventTarget, Event } from 'event-target-shim';
 import MediaStream from './MediaStream';
 import MediaStreamTrack from './MediaStreamTrack';
 import RTCDataChannel from './RTCDataChannel';
diff --git a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCTrackEvent.d.ts b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCTrackEvent.d.ts
index b87c7ae..6738e3f 100644
--- a/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCTrackEvent.d.ts
+++ b/node_modules/@livekit/react-native-webrtc/lib/typescript/RTCTrackEvent.d.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 import MediaStream from './MediaStream';
 import type MediaStreamTrack from './MediaStreamTrack';
 import RTCRtpReceiver from './RTCRtpReceiver';
diff --git a/node_modules/@livekit/react-native-webrtc/src/MediaDevices.ts b/node_modules/@livekit/react-native-webrtc/src/MediaDevices.ts
index c647667..42920f6 100644
--- a/node_modules/@livekit/react-native-webrtc/src/MediaDevices.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/MediaDevices.ts
@@ -1,4 +1,4 @@
-import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 
 import getDisplayMedia from './getDisplayMedia';
diff --git a/node_modules/@livekit/react-native-webrtc/src/MediaStream.ts b/node_modules/@livekit/react-native-webrtc/src/MediaStream.ts
index 1c2437e..74c9c11 100644
--- a/node_modules/@livekit/react-native-webrtc/src/MediaStream.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/MediaStream.ts
@@ -1,4 +1,4 @@
-import { EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 
 import MediaStreamTrack, { MediaStreamTrackInfo } from './MediaStreamTrack';
diff --git a/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrack.ts b/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrack.ts
index 5ac31f5..1a7648c 100644
--- a/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrack.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrack.ts
@@ -1,4 +1,4 @@
-import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 
 import { MediaTrackConstraints } from './Constraints';
diff --git a/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrackEvent.ts b/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrackEvent.ts
index 501de5a..935e110 100644
--- a/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrackEvent.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/MediaStreamTrackEvent.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 
 import type MediaStreamTrack from './MediaStreamTrack';
 
diff --git a/node_modules/@livekit/react-native-webrtc/src/MessageEvent.ts b/node_modules/@livekit/react-native-webrtc/src/MessageEvent.ts
index 5f6dcf9..5c50a8a 100644
--- a/node_modules/@livekit/react-native-webrtc/src/MessageEvent.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/MessageEvent.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 
 export type MessageEventData = string | ArrayBuffer | Blob;
 
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCDataChannel.ts b/node_modules/@livekit/react-native-webrtc/src/RTCDataChannel.ts
index a99ed1e..4c0a0a2 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCDataChannel.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCDataChannel.ts
@@ -1,5 +1,5 @@
 import * as base64 from 'base64-js';
-import { EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 
 import { addListener, removeListener } from './EventEmitter';
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCDataChannelEvent.ts b/node_modules/@livekit/react-native-webrtc/src/RTCDataChannelEvent.ts
index 956d059..fca48f1 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCDataChannelEvent.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCDataChannelEvent.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 
 import type RTCDataChannel from './RTCDataChannel';
 
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCErrorEvent.ts b/node_modules/@livekit/react-native-webrtc/src/RTCErrorEvent.ts
index 6a0a286..0072726 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCErrorEvent.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCErrorEvent.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 
 type RTCPeerConnectionErrorFunc =
     | 'addTransceiver'
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCFrameCryptor.ts b/node_modules/@livekit/react-native-webrtc/src/RTCFrameCryptor.ts
index 22cf3f3..f269392 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCFrameCryptor.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCFrameCryptor.ts
@@ -1,4 +1,4 @@
-import { Event, EventTarget, defineEventAttribute } from 'event-target-shim/index';
+import { Event, EventTarget, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 
 import { addListener, removeListener } from './EventEmitter';
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCIceCandidateEvent.ts b/node_modules/@livekit/react-native-webrtc/src/RTCIceCandidateEvent.ts
index af4d11a..663bc2a 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCIceCandidateEvent.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCIceCandidateEvent.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 
 import type RTCIceCandidate from './RTCIceCandidate';
 
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCPeerConnection.ts b/node_modules/@livekit/react-native-webrtc/src/RTCPeerConnection.ts
index 9cfe1a5..3dbff5b 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCPeerConnection.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCPeerConnection.ts
@@ -1,4 +1,4 @@
-import { EventTarget, Event, defineEventAttribute } from 'event-target-shim/index';
+import { EventTarget, Event, defineEventAttribute } from 'event-target-shim';
 import { NativeModules } from 'react-native';
 
 import { addListener, removeListener } from './EventEmitter';
diff --git a/node_modules/@livekit/react-native-webrtc/src/RTCTrackEvent.ts b/node_modules/@livekit/react-native-webrtc/src/RTCTrackEvent.ts
index ea9bea4..7995006 100644
--- a/node_modules/@livekit/react-native-webrtc/src/RTCTrackEvent.ts
+++ b/node_modules/@livekit/react-native-webrtc/src/RTCTrackEvent.ts
@@ -1,4 +1,4 @@
-import { Event } from 'event-target-shim/index';
+import { Event } from 'event-target-shim';
 
 import MediaStream from './MediaStream';
 import type MediaStreamTrack from './MediaStreamTrack';
